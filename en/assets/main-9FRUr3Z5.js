import{r as Be,o as S1,n as a1,a as ta,w as t1,b as ra,c as na,u as ia,d as re,e as i1,f as s1,g as sa,t as d1,h as l1,i as De,j as la,k as oa,l as _a,m as r1,p as z1,B as b1,q as ua,s as o1,v as P1,P as X1,x as $e,y as e1,z as va,A as p1,I as ca,L as fa,C as ha,D as ma,E as U1,F as da,G as Y1,H as ba,J as pa,K as xa,M as Sa,N as Aa,O as L1,Q as wa,R as Ba,S as Ma,T as ya,U as Pe,V as He,W as Oe,X as Me,Y as n1,Z as Xe,_ as Ta,$ as Ra,a0 as Ea,a1 as Ca,a2 as I1,a3 as H1,a4 as O1,a5 as D1,a6 as ka}from"./index-B85UskFZ.js";const La=(z,T0)=>{const _0=Be(),Y=()=>{_0.value=ia(z).height};return S1(()=>{if(a1(Y),T0)for(let y0=1;y0<=3;y0++)setTimeout(Y,100*y0)}),ta(()=>a1(Y)),t1([ra,na],Y),_0};function Ia(z,T0){const _0=La(z,!0);return Y=>re("div",{class:T0("placeholder"),style:{height:_0.value?`${_0.value}px`:void 0}},[Y()])}const[q1,g1]=i1("action-bar"),j1=Symbol(q1),Ha={placeholder:Boolean,safeAreaInsetBottom:d1};var Oa=s1({name:q1,props:Ha,setup(z,{slots:T0}){const _0=Be(),Y=Ia(_0,g1),{linkChildren:y0}=sa(j1);y0();const $=()=>{var h0;return re("div",{ref:_0,class:[g1(),{"van-safe-area-bottom":z.safeAreaInsetBottom}]},[(h0=T0.default)==null?void 0:h0.call(T0)])};return()=>z.placeholder?Y($):$()}});const Da=l1(Oa),[ga,Na]=i1("action-bar-button"),Va=De({},la,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Fa=s1({name:ga,props:Va,setup(z,{slots:T0}){const _0=oa(),{parent:Y,index:y0}=_a(j1),$=r1(()=>{if(Y){const P=Y.children[y0.value-1];return!(P&&"isButton"in P)}}),h0=r1(()=>{if(Y){const P=Y.children[y0.value+1];return!(P&&"isButton"in P)}});return z1({isButton:!0}),()=>{const{type:P,icon:d0,text:b0,color:R0,loading:p0,disabled:O0}=z;return re(b1,{class:Na([P,{last:h0.value,first:$.value}]),size:"large",type:P,icon:d0,color:R0,loading:p0,disabled:O0,onClick:_0},{default:()=>[T0.default?T0.default():b0]})}}});const N1=l1(Fa);let Qe=0;function za(z){z?(Qe||document.body.classList.add("van-toast--unclickable"),Qe++):Qe&&(Qe--,Qe||document.body.classList.remove("van-toast--unclickable"))}const[Pa,ze]=i1("toast"),Xa=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],Ua={icon:String,show:Boolean,type:$e("text"),overlay:Boolean,message:e1,iconSize:e1,duration:va(2e3),position:$e("middle"),teleport:[String,Object],wordBreak:String,className:p1,iconPrefix:String,transition:$e("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:p1,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:e1};var Q1=s1({name:Pa,props:Ua,emits:["update:show"],setup(z,{emit:T0,slots:_0}){let Y,y0=!1;const $=()=>{const p0=z.show&&z.forbidClick;y0!==p0&&(y0=p0,za(y0))},h0=p0=>T0("update:show",p0),P=()=>{z.closeOnClick&&h0(!1)},d0=()=>clearTimeout(Y),b0=()=>{const{icon:p0,type:O0,iconSize:g0,iconPrefix:q,loadingType:e0}=z;if(p0||O0==="success"||O0==="fail")return re(ca,{name:p0||O0,size:g0,class:ze("icon"),classPrefix:q},null);if(O0==="loading")return re(fa,{class:ze("loading"),size:g0,type:e0},null)},R0=()=>{const{type:p0,message:O0}=z;if(_0.message)return re("div",{class:ze("text")},[_0.message()]);if(ha(O0)&&O0!=="")return p0==="html"?re("div",{key:0,class:ze("text"),innerHTML:String(O0)},null):re("div",{class:ze("text")},[O0])};return t1(()=>[z.show,z.forbidClick],$),t1(()=>[z.show,z.type,z.message,z.duration],()=>{d0(),z.show&&z.duration>0&&(Y=setTimeout(()=>{h0(!1)},z.duration))}),S1($),ua($),()=>re(X1,o1({class:[ze([z.position,z.wordBreak==="normal"?"break-normal":z.wordBreak,{[z.type]:!z.icon}]),z.className],lockScroll:!1,onClick:P,onClosed:d0,"onUpdate:show":h0},P1(z,Xa)),{default:()=>[b0(),R0()]})}});function Z1(){const z=U1({show:!1}),T0=y0=>{z.show=y0},_0=y0=>{De(z,y0,{transitionAppear:!0}),T0(!0)},Y=()=>T0(!1);return z1({open:_0,close:Y,toggle:T0}),{open:_0,close:Y,state:z,toggle:T0}}function G1(z){const T0=ma(z),_0=document.createElement("div");return document.body.appendChild(_0),{instance:T0.mount(_0),unmount(){T0.unmount(),document.body.removeChild(_0)}}}const Ya={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let Ke=[],qa=!1,V1=De({},Ya);const ja=new Map;function W1(z){return da(z)?z:{message:z}}function Qa(){const{instance:z,unmount:T0}=G1({setup(){const _0=Be(""),{open:Y,state:y0,close:$,toggle:h0}=Z1(),P=()=>{},d0=()=>re(Q1,o1(y0,{onClosed:P,"onUpdate:show":h0}),null);return t1(_0,b0=>{y0.message=b0}),ba().render=d0,{open:Y,close:$,message:_0}}});return z}function Za(){if(!Ke.length||qa){const z=Qa();Ke.push(z)}return Ke[Ke.length-1]}function Ga(z={}){if(!Y1)return{};const T0=Za(),_0=W1(z);return T0.open(De({},V1,ja.get(_0.type||V1.type),_0)),T0}const Wa=z=>T0=>Ga(De({type:z},W1(T0))),Ka=Wa("success");l1(Q1);const[Ja,Ce,Je]=i1("dialog"),$a=De({},pa,{title:String,theme:String,width:e1,message:[String,Function],callback:Function,allowHtml:Boolean,className:p1,transition:$e("van-dialog-bounce"),messageAlign:String,closeOnPopstate:d1,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:d1,closeOnClickOverlay:Boolean}),et=[...xa,"transition","closeOnPopstate"];var K1=s1({name:Ja,props:$a,emits:["confirm","cancel","keydown","update:show"],setup(z,{emit:T0,slots:_0}){const Y=Be(),y0=U1({confirm:!1,cancel:!1}),$=m0=>T0("update:show",m0),h0=m0=>{var U;$(!1),(U=z.callback)==null||U.call(z,m0)},P=m0=>()=>{z.show&&(T0(m0),z.beforeClose?(y0[m0]=!0,ya(z.beforeClose,{args:[m0],done(){h0(m0),y0[m0]=!1},canceled(){y0[m0]=!1}})):h0(m0))},d0=P("cancel"),b0=P("confirm"),R0=Sa(m0=>{var U,x0;if(m0.target!==((x0=(U=Y.value)==null?void 0:U.popupRef)==null?void 0:x0.value))return;({Enter:z.showConfirmButton?b0:L1,Escape:z.showCancelButton?d0:L1})[m0.key](),T0("keydown",m0)},["enter","esc"]),p0=()=>{const m0=_0.title?_0.title():z.title;if(m0)return re("div",{class:Ce("header",{isolated:!z.message&&!_0.default})},[m0])},O0=m0=>{const{message:U,allowHtml:x0,messageAlign:C0}=z,V0=Ce("message",{"has-title":m0,[C0]:C0}),z0=wa(U)?U():U;return x0&&typeof z0=="string"?re("div",{class:V0,innerHTML:z0},null):re("div",{class:V0},[z0])},g0=()=>{if(_0.default)return re("div",{class:Ce("content")},[_0.default()]);const{title:m0,message:U,allowHtml:x0}=z;if(U){const C0=!!(m0||_0.title);return re("div",{key:x0?1:0,class:Ce("content",{isolated:!C0})},[O0(C0)])}},q=()=>re("div",{class:[Ma,Ce("footer")]},[z.showCancelButton&&re(b1,{size:"large",text:z.cancelButtonText||Je("cancel"),class:Ce("cancel"),style:{color:z.cancelButtonColor},loading:y0.cancel,disabled:z.cancelButtonDisabled,onClick:d0},null),z.showConfirmButton&&re(b1,{size:"large",text:z.confirmButtonText||Je("confirm"),class:[Ce("confirm"),{[Ba]:z.showCancelButton}],style:{color:z.confirmButtonColor},loading:y0.confirm,disabled:z.confirmButtonDisabled,onClick:b0},null)]),e0=()=>re(Da,{class:Ce("footer")},{default:()=>[z.showCancelButton&&re(N1,{type:"warning",text:z.cancelButtonText||Je("cancel"),class:Ce("cancel"),color:z.cancelButtonColor,loading:y0.cancel,disabled:z.cancelButtonDisabled,onClick:d0},null),z.showConfirmButton&&re(N1,{type:"danger",text:z.confirmButtonText||Je("confirm"),class:Ce("confirm"),color:z.confirmButtonColor,loading:y0.confirm,disabled:z.confirmButtonDisabled,onClick:b0},null)]}),A0=()=>_0.footer?_0.footer():z.theme==="round-button"?e0():q();return()=>{const{width:m0,title:U,theme:x0,message:C0,className:V0}=z;return re(X1,o1({ref:Y,role:"dialog",class:[Ce([x0]),V0],style:{width:Aa(m0)},tabindex:0,"aria-labelledby":U||C0,onKeydown:R0,"onUpdate:show":$},P1(z,et)),{default:()=>[p0(),g0(),A0()]})}}});let x1;const at={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let tt=De({},at);function rt(){({instance:x1}=G1({setup(){const{state:T0,toggle:_0}=Z1();return()=>re(K1,o1(T0,{"onUpdate:show":_0}),null)}}))}function nt(z){return Y1?new Promise((T0,_0)=>{x1||rt(),x1.open(De({},tt,z,{callback:Y=>{(Y==="confirm"?T0:_0)(Y)}}))}):Promise.resolve(void 0)}l1(K1);const it=[{level:1,unit:1,audio:"My Family",phonetic:"/ maɪ ˈfæməli /",zh:"我的家庭"},{level:1,unit:1,audio:"Let's listen and say.",phonetic:"",zh:"听一听，说一说。"},{level:1,unit:1,audio:"mum",phonetic:"/ mɒm /",zh:"（非正式）妈妈"},{level:1,unit:1,audio:"Look，look, my mum.",phonetic:"",zh:"看，看，我的妈妈。"},{level:1,unit:1,audio:"dad",phonetic:"/ dæd /",zh:"爸爸；爹爹"},{level:1,unit:1,audio:"Look，look, my dad.",phonetic:"",zh:"看，看，我的爸爸。"},{level:1,unit:1,audio:"grandma",phonetic:"/ ˈɡrænmɑː /",zh:"奶奶；外婆"},{level:1,unit:1,audio:"Look, look, my grandma.",phonetic:"",zh:"看，看，我的奶奶。"},{level:1,unit:1,audio:"grandpa",phonetic:"/ ˈɡrænpɑː /",zh:"爷爷；外公"},{level:1,unit:1,audio:"Look, look, my grandpa.",phonetic:"",zh:"看，看，我的爷爷。 "},{level:1,unit:1,audio:"Good morning.",phonetic:"",zh:"早上好 "},{level:1,unit:2,audio:"fruit",phonetic:"/ fruːt /",zh:"水果"},{level:1,unit:2,audio:"peach",phonetic:"/ piːtʃ /",zh:"桃子；桃树；桃红色；<非正式>极好的人（或物）"},{level:1,unit:2,audio:"a peach",phonetic:"",zh:"一个桃子"},{level:1,unit:2,audio:"A peach for you,Grandpa",phonetic:"",zh:"爷爷，给你一个桃子。"},{level:1,unit:2,audio:"Thank you!",phonetic:"",zh:"谢谢!"},{level:1,unit:2,audio:"banana",phonetic:"/ bəˈnɑːnə /",zh:"香蕉；香蕉树"},{level:1,unit:2,audio:"a banana",phonetic:"",zh:"一根香蕉"},{level:1,unit:2,audio:"A banana for you,Grandma",phonetic:"",zh:"奶奶，给你一个香蕉。"},{level:1,unit:2,audio:"Thank you!",phonetic:"",zh:"谢谢!"},{level:1,unit:2,audio:"melon",phonetic:"/ ˈmelən /",zh:"瓜，香瓜"},{level:1,unit:2,audio:"watermelon",phonetic:"/ ˈwɔːtəmelən /",zh:"西瓜"},{level:1,unit:2,audio:"a watermelon",phonetic:"",zh:"一个西瓜"},{level:1,unit:2,audio:"A watermelon for you and me.",phonetic:"",zh:"一个西瓜给你和我"},{level:1,unit:2,audio:"orange",phonetic:"/ ˈɒrɪndʒ /",zh:"橙，柑橘；橙汁，橘汁饮料；橙树，橘树；"},{level:1,unit:2,audio:"an orange",phonetic:"",zh:"一个橙子"},{level:1,unit:2,audio:"An orange for you,dad",phonetic:"",zh:"爸爸，给你一个橙子。"},{level:1,unit:2,audio:"Thank you!",phonetic:"",zh:"谢谢!"},{level:1,unit:2,audio:"apple",phonetic:"/ ˈæp(ə)l /",zh:"苹果"},{level:1,unit:2,audio:"an apple",phonetic:"",zh:"一个苹果"},{level:1,unit:2,audio:"An apple for you,mum",phonetic:"",zh:"妈妈，给你一个苹果。"},{level:1,unit:2,audio:"Thank you!",phonetic:"",zh:"谢谢!"},{level:1,unit:2,audio:"pear",phonetic:"/ peə(r) /",zh:"梨"},{level:1,unit:2,audio:"A pear,please.",phonetic:"",zh:"请给我一个梨。"},{level:1,unit:2,audio:"Here you are.",phonetic:"",zh:"给你"},{level:1,unit:2,audio:"Thank you!",phonetic:"",zh:"谢谢!"},{level:1,unit:2,audio:"You're' welcome.",phonetic:"",zh:"不客气"},{level:1,unit:3,audio:"red",phonetic:"/ red /",zh:"红色，红颜料；红色的"},{level:1,unit:3,audio:"Apple,red,my apple is red.",phonetic:"",zh:"苹果，红色的，我的苹果是红色的。"},{level:1,unit:3,audio:"yellow",phonetic:"/ ˈjeləʊ /",zh:"黄色，黄颜料；黄色的"},{level:1,unit:3,audio:"Banana,yellow,my banana is yellow.",phonetic:"",zh:"香蕉，黄色的，我的香蕉是黄色的。"},{level:1,unit:3,audio:"green",phonetic:"/ ɡriːn /",zh:"绿色；绿色的"},{level:1,unit:3,audio:"Watermelon,green,my watermelon is green.",phonetic:"",zh:"西瓜，绿色的，我的西瓜是绿色的。"},{level:1,unit:3,audio:"pink",phonetic:"/ pɪŋk /",zh:"粉红色；粉红色的"},{level:1,unit:3,audio:"Peach,pink,my peach is pink.",phonetic:"",zh:"桃子，粉色的，我的桃子是粉色的。"},{level:1,unit:3,audio:"orange",phonetic:"/ ˈɒrɪndʒ /",zh:"橙色，橘黄色"},{level:1,unit:3,audio:"Orange,orange,my orange is orange.",phonetic:"",zh:"橙子，橙色的，我的橙子是橙色的。"},{level:1,unit:3,audio:"What colour?",phonetic:"",zh:"是什么颜色？"},{level:1,unit:4,audio:"pencil",phonetic:"/ ˈpens(ə)l /",zh:"铅笔"},{level:1,unit:4,audio:"a pencil",phonetic:"",zh:"一支 铅笔"},{level:1,unit:4,audio:"bag",phonetic:"/ bæɡ /",zh:"包,书包"},{level:1,unit:4,audio:"a bag",phonetic:"",zh:"一个书包"},{level:1,unit:4,audio:"eraser",phonetic:"/ ɪˈreɪzə(r) /",zh:"橡皮擦，黑板擦"},{level:1,unit:4,audio:"an eraser",phonetic:"",zh:"一个橡皮擦"},{level:1,unit:4,audio:"ruler",phonetic:"/ ˈruːlə(r) /",zh:"尺子，直尺"},{level:1,unit:4,audio:"a ruler",phonetic:"",zh:"一把尺子"},{level:1,unit:4,audio:"marker",phonetic:"/ ˈmɑːkə(r) /",zh:"麦克笔"},{level:1,unit:4,audio:"a marker",phonetic:"",zh:"一支马克笔"},{level:1,unit:4,audio:"Give me a marker,please.",phonetic:"",zh:"给我一支马克笔"},{level:1,unit:4,audio:"Thank you!",phonetic:"",zh:"谢谢!"},{level:1,unit:4,audio:"You're' welcome.",phonetic:"",zh:"不客气"},{level:1,unit:5,audio:"bird",phonetic:"/ bɜːd /",zh:"鸟"},{level:1,unit:5,audio:"puppy",phonetic:"/ ˈpʌpi /",zh:"小狗，幼犬"},{level:1,unit:5,audio:"fish",phonetic:"/ fɪʃ /",zh:"鱼；鱼肉；双鱼座；"},{level:1,unit:5,audio:"chick",phonetic:"/ tʃɪk /",zh:"小鸡"},{level:1,unit:5,audio:"kitten",phonetic:"/ ˈkɪt(ə)n /",zh:"小猫"},{level:1,unit:5,audio:"I want a cat.",phonetic:"",zh:"我想要一只小猫。"},{level:1,unit:5,audio:"Come here,please.",phonetic:"",zh:"快过来。"},{level:1,unit:5,audio:"We love animals.",phonetic:"",zh:"我们喜欢动物。"},{level:1,unit:6,audio:"one",phonetic:"/ wʌn /",zh:" 一"},{level:1,unit:6,audio:"two",phonetic:"/ tuː /",zh:"二"},{level:1,unit:6,audio:"three",phonetic:"/ θriː /",zh:"三"},{level:1,unit:6,audio:"four",phonetic:"/ fɔː(r) /",zh:"四"},{level:1,unit:6,audio:"five",phonetic:"/ faɪv /",zh:"五"},{level:1,unit:6,audio:"How many cats?",phonetic:"",zh:"有几只猫？"},{level:1,unit:6,audio:"five",phonetic:"/ faɪv /",zh:"五"}];function st(z){return z&&z.__esModule&&Object.prototype.hasOwnProperty.call(z,"default")?z.default:z}var J1={exports:{}};(function(z){(function(T0){var _0=typeof window=="object"&&!!window.document,Y=_0?window:Object;T0(Y,_0),z.exports&&(z.exports=Y.Recorder)})(function(T0,_0){var Y=function(){},y0=function(b){return typeof b=="number"},$=function(b){return new H(b)},h0=$.LM="2023-12-24 18:09",P="https://github.com/xiangyuecn/Recorder",d0="Recorder",b0="getUserMedia",R0="srcSampleRate",p0="sampleRate",O0="bitRate",g0="catch",q=T0[d0];if(q&&q.LM==h0){q.CLog(q.i18n.$T("K8zP::重复导入{1}",0,d0),3);return}$.IsOpen=function(){var b=$.Stream;if(b){var M=b.getTracks&&b.getTracks()||b.audioTracks||[],S=M[0];if(S){var k=S.readyState;return k=="live"||k==S.LIVE}}return!1},$.BufferSize=4096,$.Destroy=function(){Y0(d0+" Destroy"),ee();for(var b in e0)e0[b]()};var e0={};$.BindDestroy=function(b,M){e0[b]=M},$.Support=function(){if(!_0)return!1;var b=navigator.mediaDevices||{};return b[b0]||(b=navigator,b[b0]||(b[b0]=b.webkitGetUserMedia||b.mozGetUserMedia||b.msGetUserMedia)),!(!b[b0]||($.Scope=b,!$.GetContext()))},$.GetContext=function(b){if(!_0)return null;var M=window.AudioContext;if(M||(M=window.webkitAudioContext),!M)return null;var S=$.Ctx;if((!S||S.state=="closed")&&(S=$.Ctx=new M,$.NewCtxs=$.NewCtxs||[],$.BindDestroy("Ctx",function(){var k=$.Ctx;k&&k.close&&(k.close(),$.Ctx=0);var G=$.NewCtxs;$.NewCtxs=[];for(var c0=0;c0<G.length;c0++)G[c0].close()})),b&&S.close)try{S=new M,$.NewCtxs.push(S)}catch(k){Y0("GetContext tryNew Error",1,k)}return S},$.CloseNewCtx=function(b){if(b&&b!=$.Ctx){b.close&&b.close();for(var M=$.NewCtxs||[],S=M.length,k=0;k<M.length;k++)if(M[k]==b){M.splice(k,1);break}Y0(o0("mSxV::剩{1}个GetContext未close",0,S+"-1="+M.length),M.length?3:0)}};var A0=function(b){var M=b.state,S="ctx.state="+M;return M=="suspended"&&(S+=o0("nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）")),S},m0="ConnectEnableWebM";$[m0]=!0;var U="ConnectEnableWorklet";$[U]=!1;var x0=function(b,M){var S=b.BufferSize||$.BufferSize,k=b.Stream,G=k._RC||k._c||$.GetContext(!0);k._c=G;var c0=function(F){var x=k._m=G.createMediaStreamSource(k),W=G.destination,f="createMediaStreamDestination";G[f]&&(W=k._d=G[f]()),x.connect(F),F.connect(W)},t0,_,l0,D0="",K0=k._call,ce=function(F){for(var x in K0){for(var W=F.length,f=new Int16Array(W),L=0,j=0;j<W;j++){var y=Math.max(-1,Math.min(1,F[j]));y=y<0?y*32768:y*32767,f[j]=y,L+=Math.abs(y)}for(var X in K0)K0[X](f,L);return}},E0="ScriptProcessor",J0="audioWorklet",X0=d0+" "+J0,s0="RecProc",te="MediaRecorder",G0=te+".WebM.PCM",U0=G.createScriptProcessor||G.createJavaScriptNode,se=o0("ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。",0,J0),j0=function(){_=k.isWorklet=!1,V0(k),Y0(o0("7TU0::Connect采用老的{1}，",0,E0)+ve.get($[U]?o0("JwCL::但已设置{1}尝试启用{2}",2):o0("VGjB::可设置{1}尝试启用{2}",2),[d0+"."+U+"=true",J0])+D0+se,3);var F=k._p=U0.call(G,S,1,1);c0(F),F.onaudioprocess=function(x){var W=x.inputBuffer.getChannelData(0);ce(W)}},u=function(){t0=k.isWebM=!1,z0(k),_=k.isWorklet=!U0||$[U];var F=window.AudioWorkletNode;if(!(_&&G[J0]&&F)){j0();return}var x=function(){var j=function(X){return X.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,X0)},y="class "+s0+" extends AudioWorkletProcessor{";return y+="constructor "+j(function(X){DEL_super(X);var T=this,K=X.processorOptions.bufferSize;T.bufferSize=K,T.buffer=new Float32Array(K*2),T.pos=0,T.port.onmessage=function(w){w.data.kill&&(T.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",X)}),y+="process "+j(function(X,T,K){var w=this,E=w.bufferSize,e=w.buffer,n=w.pos;if(X=(X[0]||[])[0]||[],X.length){e.set(X,n),n+=X.length;var d=~~(n/E)*E;if(d){this.port.postMessage({val:e.slice(0,d)});var C=e.subarray(d,n);e=new Float32Array(E*2),e.set(C),n=C.length,w.buffer=e}w.pos=n}return!w.kill}),y+='}try{registerProcessor("'+s0+'", '+s0+')}catch(e){$C.error("'+X0+' Reg Error",e)}',y=y.replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(y)))},W=function(){return _&&k._na},f=k._na=function(){l0!==""&&(clearTimeout(l0),l0=setTimeout(function(){l0=0,W()&&(Y0(o0("MxX1::{1}未返回任何音频，恢复使用{2}",0,J0,E0),3),U0&&j0())},500))},L=function(){if(W()){var j=k._n=new F(G,s0,{processorOptions:{bufferSize:S}});c0(j),j.port.onmessage=function(y){l0&&(clearTimeout(l0),l0=""),W()?ce(y.data.val):_||Y0(o0("XUap::{1}多余回调",0,J0),3)},Y0(o0("yOta::Connect采用{1}，设置{2}可恢复老式{3}",0,J0,d0+"."+U+"=false",E0)+D0+se,3)}};G.resume()[K0&&"finally"](function(){if(W()){if(G[s0]){L();return}var j=x();G[J0].addModule(j).then(function(y){W()&&(G[s0]=1,L(),l0&&f())})[g0](function(y){Y0(J0+".addModule Error",1,y),W()&&j0()})}})},I=function(){var F=window[te],x="ondataavailable",W="audio/webm; codecs=pcm";t0=k.isWebM=$[m0];var f=F&&x in F.prototype&&F.isTypeSupported(W);if(D0=f?"":o0("VwPd::（此浏览器不支持{1}）",0,G0),!M||!t0||!f){u();return}var L=function(){return t0&&k._ra};k._ra=function(){l0!==""&&(clearTimeout(l0),l0=setTimeout(function(){L()&&(Y0(o0("vHnb::{1}未返回任何音频，降级使用{2}",0,te,J0),3),u())},500))};var j=Object.assign({mimeType:W},$.ConnectWebMOptions),y=k._r=new F(k,j),X=k._rd={sampleRate:G[p0]};y[x]=function(T){var K=new FileReader;K.onloadend=function(){if(L()){var w=xe(new Uint8Array(K.result),X);if(!w)return;if(w==-1){u();return}l0&&(clearTimeout(l0),l0=""),ce(w)}else t0||Y0(o0("O9P7::{1}多余回调",0,te),3)},K.readAsArrayBuffer(T.data)},y.start(~~(S/48)),Y0(o0("LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}",0,G0,d0+"."+m0+"=false",J0,E0))};I()},C0=function(b){b._na&&b._na(),b._ra&&b._ra()},V0=function(b){b._na=null,b._n&&(b._n.port.postMessage({kill:!0}),b._n.disconnect(),b._n=null)},z0=function(b){b._ra=null,b._r&&(b._r.stop(),b._r=null)},ee=function(b){b=b||$;var M=b==$,S=b.Stream;S&&(S._m&&(S._m.disconnect(),S._m=null),!S._RC&&S._c&&$.CloseNewCtx(S._c),S._RC=null,S._c=null,S._d&&(W0(S._d.stream),S._d=null),S._p&&(S._p.disconnect(),S._p.onaudioprocess=S._p=null),V0(S),z0(S),M&&W0(S)),b.Stream=0},W0=$.StopS_=function(b){for(var M=b.getTracks&&b.getTracks()||b.audioTracks||[],S=0;S<M.length;S++){var k=M[S];k.stop&&k.stop()}b.stop&&b.stop()};$.SampleData=function(b,M,S,k,G){var c0="SampleData";k||(k={});var t0=k.index||0,_=k.offset||0,l0=k.filter;if(l0&&l0.fn&&l0.sr!=M&&(l0=null,Y0(o0("d48C::{1}的filter采样率变了，重设滤波",0,c0),3)),!l0){var D0=S>M*3/4?0:S/2*3/4;l0={fn:D0?$.IIRFilter(!0,M,D0):0}}l0.sr=M;var K0=l0.fn,ce=k.frameNext||[];G||(G={});var E0=G.frameSize||1;G.frameType&&(E0=G.frameType=="mp3"?1152:1);var J0=b.length;t0>J0+1&&Y0(o0("tlbC::{1}似乎传入了未重置chunk {2}",0,c0,t0+">"+J0),3);for(var X0=0,s0=t0;s0<J0;s0++)X0+=b[s0].length;X0=Math.max(0,X0-Math.floor(_));var te=M/S;te>1?X0=Math.floor(X0/te):(te=1,S=M),X0+=ce.length;for(var G0=new Int16Array(X0),U0=0,s0=0;s0<ce.length;s0++)G0[U0]=ce[s0],U0++;for(;t0<J0;t0++){for(var se=b[t0],s0=_,j0=se.length,u=K0&&K0.Embed,I=0,F=0,x=0,W=0,f=0,L=0;f<j0;f++,L++){if(L<j0&&(u?(x=se[L],W=u.b0*x+u.b1*u.x1+u.b0*u.x2-u.a1*u.y1-u.a2*u.y2,u.x2=u.x1,u.x1=x,u.y2=u.y1,u.y1=W):W=K0?K0(se[L]):se[L]),I=F,F=W,L==0){f--;continue}var j=Math.floor(s0);if(f==j){var y=Math.ceil(s0),X=s0-j,T=I,K=y<j0?F:T,w=T+(K-T)*X;w>32767?w=32767:w<-32768&&(w=-32768),G0[U0]=w,U0++,s0+=te}}_=Math.max(0,s0-j0)}ce=null;var E=G0.length%E0;if(E>0){var e=(G0.length-E)*2;ce=new Int16Array(G0.buffer.slice(e)),G0=new Int16Array(G0.buffer.slice(0,e))}return{index:t0,offset:_,filter:l0,frameNext:ce,sampleRate:S,data:G0}},$.IIRFilter=function(b,M,S){var k=2*Math.PI*S/M,G=Math.sin(k),c0=Math.cos(k),t0=G/2,_=1+t0,l0=-2*c0/_,D0=(1-t0)/_;if(b)var K0=(1-c0)/2/_,ce=(1-c0)/_;else var K0=(1+c0)/2/_,ce=-(1+c0)/_;var E0=0,J0=0,X0=0,s0=0,te=0,G0=function(U0){return X0=K0*U0+ce*E0+K0*J0-l0*s0-D0*te,J0=E0,E0=U0,te=s0,s0=X0,X0};return G0.Embed={x1:0,x2:0,y1:0,y2:0,b0:K0,b1:ce,a1:l0,a2:D0},G0},$.PowerLevel=function(b,M){var S=b/M||0,k;return S<1251?k=Math.round(S/1250*10):k=Math.round(Math.min(100,Math.max(0,(1+Math.log(S/1e4)/Math.log(10))*100))),k},$.PowerDBFS=function(b){var M=Math.max(.1,b||0),S=32767;return M=Math.min(M,S),M=20*Math.log(M/S)/Math.log(10),Math.max(-100,Math.round(M))},$.CLog=function(b,M){if(typeof console=="object"){var S=new Date,k=("0"+S.getMinutes()).substr(-2)+":"+("0"+S.getSeconds()).substr(-2)+"."+("00"+S.getMilliseconds()).substr(-3),G=this&&this.envIn&&this.envCheck&&this.id,c0=["["+k+" "+d0+(G?":"+G:"")+"]"+b],t0=arguments,_=$.CLog,l0=2,D0=_.log||console.log;for(y0(M)?D0=M==1?_.error||console.error:M==3?_.warn||console.warn:D0:l0=1;l0<t0.length;l0++)c0.push(t0[l0]);q0?D0&&D0("[IsLoser]"+c0[0],c0.length>1?c0:""):D0.apply(console,c0)}};var Y0=function(){$.CLog.apply(this,arguments)},q0=!0;try{q0=!console.log.apply}catch{}var w0=0;function H(b){var M=this;M.id=++w0,_e();var S={type:"mp3",onProcess:Y};for(var k in b)S[k]=b[k];M.set=S;var G=S[O0],c0=S[p0];(G&&!y0(G)||c0&&!y0(c0))&&M.CLog(o0.G("IllegalArgs-1",[o0("VtS4::{1}和{2}必须是数值",0,p0,O0)]),1,b),S[O0]=+G||16,S[p0]=+c0||16e3,M.state=0,M._S=9,M.Sync={O:9,C:9}}$.Sync={O:9,C:9},$.prototype=H.prototype={CLog:Y0,_streamStore:function(){return this.set.sourceStream?this:$},_streamCtx:function(){var b=this._streamStore().Stream;return b&&b._c},open:function(b,M){var S=this,k=S.set,G=S._streamStore(),c0=0;b=b||Y;var t0=function(u,I){I=!!I,S.CLog(o0("5tWi::录音open失败：")+u+",isUserNotAllow:"+I,1),c0&&$.CloseNewCtx(c0),M&&M(u,I)};S._streamTag=b0;var _=function(){S.CLog("open ok, id:"+S.id+" stream:"+S._streamTag),b(),S._SO=0},l0=G.Sync,D0=++l0.O,K0=l0.C;S._O=S._O_=D0,S._SO=S._S;var ce=function(){if(K0!=l0.C||!S._O){var u=o0("dFm8::open被取消");return D0==l0.O?S.close():u=o0("VtJO::open被中断"),t0(u),!0}};if(!_0){t0(o0.G("NonBrowser-1",["open"])+o0("EMJq::，可尝试使用RecordApp解决方案")+"("+P+"/tree/master/app-support-sample)");return}var E0=S.envCheck({envName:"H5",canProcess:!0});if(E0){t0(o0("A5bm::不能录音：")+E0);return}if(k.sourceStream){if(S._streamTag="set.sourceStream",!$.GetContext()){t0(o0("1iU7::不支持此浏览器从流中获取录音"));return}ee(G);var J0=S.Stream=k.sourceStream;J0._RC=k.runningContext,J0._call={};try{x0(G)}catch(u){ee(G),t0(o0("BTW2::从流中打开录音失败：")+u.message);return}_();return}var X0=function(u,I){try{window.top.a}catch{t0(o0("Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})",0,'allow="camera;microphone"'));return}/Permission|Allow/i.test(u)?t0(o0("gyO5::用户拒绝了录音权限"),!0):window.isSecureContext===!1?t0(o0("oWNo::浏览器禁止不安全页面录音，可开启https解决")):/Found/i.test(u)?t0(I+o0("jBa9::，无可用麦克风")):t0(I)};if($.IsOpen()){_();return}if(!$.Support()){X0("",o0("COxc::此浏览器不支持录音"));return}var s0=k.runningContext;s0||(s0=c0=$.GetContext(!0));var te=function(u){setTimeout(function(){u._call={};var I=$.Stream;I&&(ee(),u._call=I._call),$.Stream=u,u._c=s0,u._RC=k.runningContext,!ce()&&($.IsOpen()?(I&&S.CLog(o0("upb8::发现同时多次调用open"),1),x0(G,1),_()):t0(o0("Q1GA::录音功能无效：无音频流")))},100)},G0=function(u){var I=u.name||u.message||u.code+":"+u;S.CLog(o0("xEQR::请求录音权限错误"),1,u),X0(I,o0("bDOG::无法录音：")+I)},U0=k.audioTrackSet||{};U0[p0]=s0[p0];var se={audio:U0};try{var j0=$.Scope[b0](se,te,G0)}catch(u){S.CLog(b0,3,u),se={audio:!0},j0=$.Scope[b0](se,te,G0)}S.CLog(b0+"("+JSON.stringify(se)+") "+A0(s0)+o0("RiWe::，未配置noiseSuppression和echoCancellation时浏览器可能会自动打开降噪和回声消除，移动端可能会降低系统播放音量（关闭录音后可恢复），请参阅文档中audioTrackSet配置")+"("+P+") LM:"+h0+" UA:"+navigator.userAgent),j0&&j0.then&&j0.then(te)[g0](G0)},close:function(b){b=b||Y;var M=this,S=M._streamStore();M._stop();var k=" stream:"+M._streamTag,G=S.Sync;if(M._O=0,M._O_!=G.O){M.CLog(o0("hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）")+k,3),b();return}G.C++,ee(S),M.CLog("close,"+k),b()},mock:function(b,M){var S=this;return S._stop(),S.isMock=1,S.mockEnvInfo=null,S.buffers=[b],S.recSize=b.length,S._setSrcSR(M),S._streamTag="mock",S},_setSrcSR:function(b){var M=this,S=M.set,k=S[p0];k>b?S[p0]=b:k=0,M[R0]=b,M.CLog(R0+": "+b+" set."+p0+": "+S[p0]+(k?" "+o0("UHvm::忽略")+": "+k:""),k?3:0)},envCheck:function(b){var M,S=this,k=S.set,G="CPU_BE";if(!M&&!$[G]&&typeof Int8Array=="function"&&!new Int8Array(new Int32Array([1]).buffer)[0]&&(_e(G),M=o0("Essp::不支持{1}架构",0,G)),!M){var c0=k.type,t0=S[c0+"_envCheck"];k.takeoffEncodeChunk&&(t0?b.canProcess||(M=o0("7uMV::{1}环境不支持实时处理",0,b.envName)):M=o0("2XBl::{1}类型不支持设置takeoffEncodeChunk",0,c0)+(S[c0]?"":o0("LG7e::(未加载编码器)"))),!M&&t0&&(M=S[c0+"_envCheck"](b,k))}return M||""},envStart:function(b,M){var S=this,k=S.set;if(S.isMock=b?1:0,S.mockEnvInfo=b,S.buffers=[],S.recSize=0,b&&(S._streamTag="env$"+b.envName),S.state=1,S.envInLast=0,S.envInFirst=0,S.envInFix=0,S.envInFixTs=[],S._setSrcSR(M),S.engineCtx=0,S[k.type+"_start"]){var G=S.engineCtx=S[k.type+"_start"](k);G&&(G.pcmDatas=[],G.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(b,M){var S=this,k=S.set,G=S.engineCtx;if(S.state!=1){S.state||S.CLog("envIn at state=0",3);return}var c0=S[R0],t0=b.length,_=$.PowerLevel(M,t0),l0=S.buffers,D0=l0.length;l0.push(b);var K0=l0,ce=D0,E0=Date.now(),J0=Math.round(t0/c0*1e3);S.envInLast=E0,S.buffers.length==1&&(S.envInFirst=E0-J0);var X0=S.envInFixTs;X0.splice(0,0,{t:E0,d:J0});for(var s0=E0,te=0,G0=0;G0<X0.length;G0++){var U0=X0[G0];if(E0-U0.t>3e3){X0.length=G0;break}s0=U0.t,te+=U0.d}var se=X0[1],j0=E0-s0,u=j0-te;if(u>j0/3&&(se&&j0>1e3||X0.length>=6)){var I=E0-se.t-J0;if(I>J0/5){var F=!k.disableEnvInFix;if(S.CLog("["+E0+"]"+ve.get(o0(F?"4Kfd::补偿{1}ms":"bM5i::未补偿{1}ms",1),[I]),3),S.envInFix+=I,F){var x=new Int16Array(I*c0/1e3);t0+=x.length,l0.push(x)}}}var W=S.recSize,f=t0,L=W+f;if(S.recSize=L,G){var j=$.SampleData(l0,c0,k[p0],G.chunkInfo);G.chunkInfo=j,W=G.pcmSize,f=j.data.length,L=W+f,G.pcmSize=L,l0=G.pcmDatas,D0=l0.length,l0.push(j.data),c0=j[p0]}var y=Math.round(L/c0*1e3),X=l0.length,T=K0.length,K=function(){for(var d=w?0:-f,C=l0[0]==null,h=D0;h<X;h++){var l=l0[h];l==null?C=1:(d+=l.length,G&&l.length&&S[k.type+"_encode"](G,l))}if(C&&G){var h=ce;for(K0[0]&&(h=0);h<T;h++)K0[h]=null}C&&(d=w?f:0,l0[0]=null),G?G.pcmSize+=d:S.recSize+=d},w=0,E="rec.set.onProcess";try{w=k.onProcess(l0,_,y,c0,D0,K)}catch(d){console.error(E+o0("gFUF::回调出错是不允许的，需保证不会抛异常"),d)}var e=Date.now()-E0;if(e>10&&S.envInFirst-E0>1e3&&S.CLog(E+o0("2ghS::低性能，耗时{1}ms",0,e),3),w===!0){for(var n=0,G0=D0;G0<X;G0++)l0[G0]==null?n=1:l0[G0]=new Int16Array(0);n?S.CLog(o0("ufqH::未进入异步前不能清除buffers"),3):G?G.pcmSize-=f:S.recSize-=f}else K()},start:function(){var b=this,M=1;if(b.set.sourceStream?b.Stream||(M=0):$.IsOpen()||(M=0),!M){b.CLog(o0("6WmN::start失败：未open"),1);return}var S=b._streamCtx();if(b.CLog(o0("kLDN::start 开始录音，")+A0(S)+" stream:"+b._streamTag),b._stop(),b.envStart(null,S[p0]),b.state=3,b._SO&&b._SO+1!=b._S){b.CLog(o0("Bp2y::start被中断"),3);return}b._SO=0;var k=function(){b.state==3&&(b.state=1,b.resume())};if(S.state=="suspended"){var G="AudioContext resume: ";b.CLog(G+"wait..."),S.resume().then(function(){b.CLog(G+S.state),k()})[g0](function(c0){b.CLog(G+S.state+o0("upkE::，可能无法录音：")+c0.message,1,c0),k()})}else k()},pause:function(){var b=this,M=b._streamStore().Stream;b.state&&(b.state=2,b.CLog("pause"),M&&delete M._call[b.id])},resume:function(){var b=this,M=b._streamStore().Stream;b.state&&(b.state=1,b.CLog("resume"),b.envResume(),M&&(M._call[b.id]=function(S,k){b.state==1&&b.envIn(S,k)},C0(M)))},_stop:function(b){var M=this,S=M.set;M.isMock||M._S++,M.state&&(M.pause(),M.state=0),!b&&M[S.type+"_stop"]&&(M[S.type+"_stop"](M.engineCtx),M.engineCtx=0)},stop:function(b,M,S){var k=this,G=k.set,c0,t0=k.envInLast-k.envInFirst,_=t0&&k.buffers.length;k.CLog(o0("Xq4s::stop 和start时差:")+(t0?t0+"ms "+o0("3CQP::补偿:")+k.envInFix+"ms envIn:"+_+" fps:"+(_/t0*1e3).toFixed(1):"-")+" stream:"+k._streamTag+" ("+P+") LM:"+h0);var l0=function(){k._stop(),S&&k.close()},D0=function(U0){k.CLog(o0("u8JG::结束录音失败：")+U0,1),M&&M(U0),l0()},K0=function(U0,se,j0){var u="blob",I="arraybuffer",F="dataType",x="DefaultDataType",W=k[F]||$[x]||u,f=F+"="+W,L=U0 instanceof ArrayBuffer,j=0,y=L?U0.byteLength:U0.size;if(W==I?L||(j=1):W==u?typeof Blob!="function"?j=o0.G("NonBrowser-1",[f])+o0("1skY::，请设置{1}",0,d0+"."+x+'="'+I+'"'):(L&&(U0=new Blob([U0],{type:se})),U0 instanceof Blob||(j=1),se=U0.type||se):j=o0.G("NotSupport-1",[f]),k.CLog(o0("Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b",0,Date.now()-c0,j0,y)+" "+f+","+se),j){D0(j!=1?j:o0("Vkbd::{1}编码器返回的不是{2}",0,G.type,W)+", "+f);return}if(G.takeoffEncodeChunk)k.CLog(o0("QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据"),3);else if(y<Math.max(50,j0/5)){D0(o0("Sz2H::生成的{1}无效",0,G.type));return}b&&b(U0,j0,se),l0()};if(!k.isMock){var ce=k.state==3;if(!k.state||ce){D0(o0("wf9t::未开始录音")+(ce?o0("Dl2c::，开始录音前无用户交互导致AudioContext未运行"):""));return}}k._stop(!0);var E0=k.recSize;if(!E0){D0(o0("Ltz3::未采集到录音"));return}if(!k[G.type]){D0(o0("xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载",0,G.type,d0));return}if(k.isMock){var J0=k.envCheck(k.mockEnvInfo||{envName:"mock",canProcess:!1});if(J0){D0(o0("AxOH::录音错误：")+J0);return}}var X0=k.engineCtx;if(k[G.type+"_complete"]&&X0){var G0=Math.round(X0.pcmSize/G[p0]*1e3);c0=Date.now(),k[G.type+"_complete"](X0,function(se,j0){K0(se,j0,G0)},D0);return}if(c0=Date.now(),!k.buffers[0]){D0(o0("xkKd::音频buffers被释放"));return}var s0=$.SampleData(k.buffers,k[R0],G[p0]);G[p0]=s0[p0];var te=s0.data,G0=Math.round(te.length/G[p0]*1e3);k.CLog(o0("CxeT::采样:{1} 花:{2}ms",0,E0+"->"+te.length,Date.now()-c0)),setTimeout(function(){c0=Date.now(),k[G.type](te,function(U0,se){K0(U0,se,G0)},function(U0){D0(U0)})})}};var xe=function(b,M){M.pos||(M.pos=[0],M.tracks={},M.bytes=[]);var S=M.tracks,k=[M.pos[0]],G=function(){M.pos[0]=k[0]},c0=M.bytes.length,t0=new Uint8Array(c0+b.length);if(t0.set(M.bytes),t0.set(b,c0),M.bytes=t0,!M._ht){if(N0(t0,k),Q0(t0,k),!me(N0(t0,k),[24,83,128,103]))return;for(N0(t0,k);k[0]<t0.length;){var _=N0(t0,k),l0=Q0(t0,k),D0=[0],K0=0;if(!l0)return;if(me(_,[22,84,174,107])){for(;D0[0]<l0.length;){var ce=N0(l0,D0),E0=Q0(l0,D0),J0=[0],X0={channels:0,sampleRate:0};if(me(ce,[174]))for(;J0[0]<E0.length;){var s0=N0(E0,J0),te=Q0(E0,J0),G0=[0];if(me(s0,[215])){var U0=M0(te);X0.number=U0,S[U0]=X0}else if(me(s0,[131])){var U0=M0(te);U0==1?X0.type="video":U0==2?(X0.type="audio",K0||(M.track0=X0),X0.idx=K0++):X0.type="Type-"+U0}else if(me(s0,[134])){for(var se="",j0=0;j0<te.length;j0++)se+=String.fromCharCode(te[j0]);X0.codec=se}else if(me(s0,[225]))for(;G0[0]<te.length;){var u=N0(te,G0),I=Q0(te,G0);if(me(u,[181])){var U0=0,F=new Uint8Array(I.reverse()).buffer;I.length==4?U0=new Float32Array(F)[0]:I.length==8?U0=new Float64Array(F)[0]:Y0("WebM Track !Float",1,I),X0[p0]=Math.round(U0)}else me(u,[98,100])?X0.bitDepth=M0(I):me(u,[159])&&(X0.channels=M0(I))}}}M._ht=1,Y0("WebM Tracks",S),G();break}}}var x=M.track0;if(x){if(x.bitDepth==16&&/FLOAT/i.test(x.codec)&&(x.bitDepth=32,Y0("WebM 16->32 bit",3)),x[p0]!=M[p0]||x.bitDepth!=32||x.channels<1||!/(\b|_)PCM\b/i.test(x.codec))return M.bytes=[],M.bad||Y0("WebM Track Unexpected",3,M),M.bad=1,-1;for(var W=[],f=0;k[0]<t0.length;){var ce=N0(t0,k),E0=Q0(t0,k);if(!E0)break;if(me(ce,[163])){var L=E0[0]&15,X0=S[L];if(!X0)Y0("WebM !Track"+L,1,S);else if(X0.idx===0){for(var j=new Uint8Array(E0.length-4),j0=4;j0<E0.length;j0++)j[j0-4]=E0[j0];W.push(j),f+=j.length}}G()}if(f){var y=new Uint8Array(t0.length-M.pos[0]);y.set(t0.subarray(M.pos[0])),M.bytes=y,M.pos[0]=0;for(var j=new Uint8Array(f),j0=0,X=0;j0<W.length;j0++)j.set(W[j0],X),X+=W[j0].length;var F=new Float32Array(j.buffer);if(x.channels>1){for(var T=[],j0=0;j0<F.length;)T.push(F[j0]),j0+=x.channels;F=new Float32Array(T)}return F}}},me=function(b,M){if(!b||b.length!=M.length)return!1;if(b.length==1)return b[0]==M[0];for(var S=0;S<b.length;S++)if(b[S]!=M[S])return!1;return!0},M0=function(b){for(var M="",S=0;S<b.length;S++){var k=b[S];M+=(k<16?"0":"")+k.toString(16)}return parseInt(M,16)||0},N0=function(b,M,S){var k=M[0];if(!(k>=b.length)){var G=b[k],c0=("0000000"+G.toString(2)).substr(-8),t0=/^(0*1)(\d*)$/.exec(c0);if(t0){var _=t0[1].length,l0=[];if(!(k+_>b.length)){for(var D0=0;D0<_;D0++)l0[D0]=b[k],k++;return S&&(l0[0]=parseInt(t0[2]||"0",2)),M[0]=k,l0}}}},Q0=function(b,M){var S=N0(b,M,1);if(S){var k=M0(S),G=M[0],c0=[];if(k<2147483647){if(G+k>b.length)return;for(var t0=0;t0<k;t0++)c0[t0]=b[G],G++}return M[0]=G,c0}},ve=$.i18n={lang:"zh-CN",alias:{"zh-CN":"zh","en-US":"en"},locales:{},data:{},put:function(b,M){var S=d0+".i18n.put: ",k=b.overwrite;k=k==null||k;var G=b.lang;if(G=ve.alias[G]||G,!G)throw new Error(S+"set.lang?");var c0=ve.locales[G];c0||(c0={},ve.locales[G]=c0);for(var t0=/^([\w\-]+):/,_,l0=0;l0<M.length;l0++){var K0=M[l0];if(_=t0.exec(K0),!_){Y0(S+"'key:'? "+K0,3,b);continue}var D0=_[1],K0=K0.substr(D0.length+1);!k&&c0[D0]||(c0[D0]=K0)}},get:function(){return ve.v_G.apply(null,arguments)},v_G:function(b,M,S){M=M||[],S=S||ve.lang,S=ve.alias[S]||S;var k=ve.locales[S],G=k&&k[b]||"";return!G&&S!="zh"?S=="en"?ve.v_G(b,M,"zh"):ve.v_G(b,M,"en"):(ve.lastLang=S,G=="=Empty"?"":G.replace(/\{(\d+)(\!?)\}/g,function(c0,t0,_){return t0=+t0||0,c0=M[t0-1],(t0<1||t0>M.length)&&(c0="{?}",Y0("i18n["+b+"] no {"+t0+"}: "+G,3)),_?"":c0}))},$T:function(){return ve.v_T.apply(null,arguments)},v_T:function(){for(var b=arguments,M="",S=[],k=0,G=d0+".i18n.$T:",c0=/^([\w\-]*):/,t0,_=0;_<b.length;_++){var l0=b[_];if(_==0){if(t0=c0.exec(l0),M=t0&&t0[1],!M)throw new Error(G+"0 'key:'?");l0=l0.substr(M.length+1)}if(k===-1)S.push(l0);else{if(k)throw new Error(G+" bad args");if(l0===0)k=-1;else if(y0(l0)){if(l0<1)throw new Error(G+" bad args");k=l0}else{var D0=_==1?"en":_?"":"zh";if(t0=c0.exec(l0),t0&&(D0=t0[1]||D0,l0=l0.substr(t0[1].length+1)),!t0||!D0)throw new Error(G+_+" 'lang:'?");ve.put({lang:D0,overwrite:!1},[M+":"+l0])}}}return M?k>0?M:ve.v_G(M,S):""}},o0=ve.$T;o0.G=ve.get,o0("NonBrowser-1::非浏览器环境，不支持{1}",1),o0("IllegalArgs-1::参数错误：{1}",1),o0("NeedImport-2::调用{1}需要先导入{2}",2),o0("NotSupport-1::不支持：{1}",1),$.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var _e=$.Traffic=function(b){if(_0){b=b?"/"+d0+"/Report/"+b:"";var M=$.TrafficImgUrl;if(M){var S=$.Traffic,k=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],G=k[1]||"http://file/",c0=(k[0]||G)+b;if(M.indexOf("//")==0&&(/^https:/i.test(c0)?M="https:"+M:M="http:"+M),b&&(M=M+"&cu="+encodeURIComponent(G+b)),!S[c0]){S[c0]=1;var t0=new Image;t0.src=M,Y0("Traffic Analysis Image: "+(b||d0+".TrafficImgUrl="+$.TrafficImgUrl))}}}};q&&(Y0(o0("8HO5::覆盖导入{1}",0,d0),1),q.Destroy()),T0[d0]=$})})(J1);var lt=J1.exports;const F1=st(lt);(function(z){var T0=typeof window=="object"&&!!window.document,_0=T0?window:Object,Y=_0.Recorder,y0=Y.i18n;z(Y,y0,y0.$T,T0)})(function(z,T0,_0,Y){var y0="48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000",$="8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 192, 224, 256, 320";z.prototype.enc_mp3={stable:!0,takeEC:"full",getTestMsg:function(){return _0("Zm7L::采样率范围：{1}；比特率范围：{2}（不同比特率支持的采样率范围不同，小于32kbps时采样率需小于32000）",0,y0,$)}};var h0=function(q){var e0=q.bitRate,A0=q.sampleRate,m0=A0;if((" "+$+",").indexOf(" "+e0+",")==-1&&z.CLog(_0("eGB9::{1}不在mp3支持的取值范围：{2}",0,"bitRate="+e0,$),3),(" "+y0+",").indexOf(" "+A0+",")==-1){for(var U=y0.split(", "),x0=[],C0=0;C0<U.length;C0++)x0.push({v:+U[C0],s:Math.abs(U[C0]-A0)});x0.sort(function(V0,z0){return V0.s-z0.s}),m0=x0[0].v,q.sampleRate=m0,z.CLog(_0("zLTa::sampleRate已更新为{1}，因为{2}不在mp3支持的取值范围：{3}",0,m0,A0,y0),3)}},P=function(){return _0.G("NeedImport-2",["mp3.js","src/engine/mp3-engine.js"])},d0=Y&&typeof Worker=="function";z.prototype.mp3=function(q,e0,A0){var m0=this,U=m0.set,x0=q.length;if(!z.lamejs){A0(P());return}if(d0){var C0=m0.mp3_start(U);if(C0){if(C0.isW){m0.mp3_encode(C0,q),m0.mp3_complete(C0,e0,A0,1);return}m0.mp3_stop(C0)}}h0(U);var V0=new z.lamejs.Mp3Encoder(1,U.sampleRate,U.bitRate),z0=57600,ee=new Int8Array(5e5),W0=0,Y0=0,q0=function(){try{if(Y0<x0)var w0=V0.encodeBuffer(q.subarray(Y0,Y0+z0));else var w0=V0.flush()}catch(N0){console.error(N0),A0("MP3 Encoder: "+N0.message);return}var H=w0.length;if(H>0){if(W0+H>ee.length){var xe=new Int8Array(ee.length+Math.max(5e5,H));xe.set(ee.subarray(0,W0)),ee=xe}ee.set(w0,W0),W0+=H}if(Y0<x0)Y0+=z0,setTimeout(q0);else{var me=[ee.buffer.slice(0,W0)],M0=O0.fn(me,W0,x0,U.sampleRate);g0(M0,U),e0(me[0]||new ArrayBuffer(0),"audio/mp3")}};q0()};var b0;z.BindDestroy("mp3Worker",function(){b0&&(z.CLog("mp3Worker Destroy"),b0.terminate(),b0=null)}),z.prototype.mp3_envCheck=function(q,e0){var A0="";return e0.takeoffEncodeChunk&&(p0()||(A0=_0("yhUs::当前浏览器版本太低，无法实时处理"))),!A0&&!z.lamejs&&(A0=P()),A0},z.prototype.mp3_start=function(q){return p0(q)};var R0={id:0},p0=function(q,e0){var A0=function(q0){var w0=q0.data,H=x0.wkScope.wk_ctxs,xe=x0.wkScope.wk_lame,me=x0.wkScope.wk_mp3TrimFix,M0=H[w0.id];if(w0.action=="init")H[w0.id]={sampleRate:w0.sampleRate,bitRate:w0.bitRate,takeoff:w0.takeoff,pcmSize:0,memory:new Int8Array(5e5),mOffset:0,encObj:new xe.Mp3Encoder(1,w0.sampleRate,w0.bitRate)};else if(!M0)return;var N0=function(_e){var b=_e.length;if(M0.mOffset+b>M0.memory.length){var M=new Int8Array(M0.memory.length+Math.max(5e5,b));M.set(M0.memory.subarray(0,M0.mOffset)),M0.memory=M}M0.memory.set(_e,M0.mOffset),M0.mOffset+=b};switch(w0.action){case"stop":M0.encObj=null,delete H[w0.id];break;case"encode":M0.pcmSize+=w0.pcm.length;try{var Q0=M0.encObj.encodeBuffer(w0.pcm)}catch(_e){M0.err=_e,console.error(_e)}Q0&&Q0.length>0&&(M0.takeoff?C0.onmessage({action:"takeoff",id:w0.id,chunk:Q0}):N0(Q0));break;case"complete":try{var Q0=M0.encObj.flush()}catch(_e){M0.err=_e,console.error(_e)}if(Q0&&Q0.length>0&&(M0.takeoff?C0.onmessage({action:"takeoff",id:w0.id,chunk:Q0}):N0(Q0)),M0.err){C0.onmessage({action:w0.action,id:w0.id,err:"MP3 Encoder: "+M0.err.message});break}var ve=[M0.memory.buffer.slice(0,M0.mOffset)],o0=me.fn(ve,M0.mOffset,M0.pcmSize,M0.sampleRate);C0.onmessage({action:w0.action,id:w0.id,blob:ve[0]||new ArrayBuffer(0),meta:o0});break}},m0=function(q0){C0.onmessage=function(w0){var H=w0;q0&&(H=w0.data);var xe=R0[H.id];xe&&(H.action=="takeoff"?xe.set.takeoffEncodeChunk(new Uint8Array(H.chunk.buffer)):(xe.call&&xe.call(H),xe.call=null))}},U=function(){var q0={worker:C0,set:q};return q?(q0.id=++R0.id,R0[q0.id]=q0,h0(q),C0.postMessage({action:"init",id:q0.id,sampleRate:q.sampleRate,bitRate:q.bitRate,takeoff:!!q.takeoffEncodeChunk,x:new Int16Array(5)})):C0.postMessage({x:new Int16Array(5)}),q0},x0,C0=b0;if(e0||!d0)return z.CLog(_0("k9PT::当前环境不支持Web Worker，mp3实时编码器运行在主线程中"),3),C0={postMessage:function(q0){A0({data:q0})}},x0={wkScope:{wk_ctxs:{},wk_lame:z.lamejs,wk_mp3TrimFix:O0}},m0(),U();try{if(!C0){var V0=(A0+"").replace(/[\w\$]+\.onmessage/g,"self.postMessage");V0=V0.replace(/[\w\$]+\.wkScope/g,"wkScope");var z0=");wk_lame();self.onmessage="+V0;z0+=";var wkScope={ wk_ctxs:{},wk_lame:wk_lame",z0+=",wk_mp3TrimFix:{rm:"+O0.rm+",fn:"+O0.fn+"} }";var ee=z.lamejs.toString(),W0=(window.URL||webkitURL).createObjectURL(new Blob(["var wk_lame=(",ee,z0],{type:"text/javascript"}));C0=new Worker(W0),setTimeout(function(){(window.URL||webkitURL).revokeObjectURL(W0)},1e4),m0(1)}var Y0=U();return Y0.isW=1,b0=C0,Y0}catch(q0){return C0&&C0.terminate(),console.error(q0),p0(q,1)}};z.prototype.mp3_stop=function(q){if(q&&q.worker){q.worker.postMessage({action:"stop",id:q.id}),q.worker=null,delete R0[q.id];var e0=-1;for(var A0 in R0)e0++;e0&&z.CLog(_0("fT6M::mp3 worker剩{1}个未stop",0,e0),3)}},z.prototype.mp3_encode=function(q,e0){q&&q.worker&&q.worker.postMessage({action:"encode",id:q.id,pcm:e0})},z.prototype.mp3_complete=function(q,e0,A0,m0){var U=this;q&&q.worker?(q.call=function(x0){m0&&U.mp3_stop(q),x0.err?A0(x0.err):(g0(x0.meta,q.set),e0(x0.blob,"audio/mp3"))},q.worker.postMessage({action:"complete",id:q.id})):A0(_0("mPxH::mp3编码器未start"))},z.mp3ReadMeta=function(q,e0){var A0=typeof window<"u"&&window.parseInt||typeof self<"u"&&self.parseInt||parseInt,m0=new Uint8Array(q[0]||[]);if(m0.length<4)return null;var U=function(_e,b){return("0000000"+((b||m0)[_e]||0).toString(2)).substr(-8)},x0=U(0)+U(1),C0=U(2)+U(3);if(!/^1{11}/.test(x0))return null;var V0={"00":2.5,10:2,11:1}[x0.substr(11,2)],z0={"01":3}[x0.substr(13,2)],ee={1:[44100,48e3,32e3],2:[22050,24e3,16e3],"2.5":[11025,12e3,8e3]}[V0];ee&&(ee=ee[A0(C0.substr(4,2),2)]);var W0=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320]][V0==1?1:0][A0(C0.substr(0,4),2)];if(!V0||!z0||!W0||!ee)return null;for(var Y0=Math.round(e0*8/W0),q0=z0==1?384:z0==2||V0==1?1152:576,w0=q0/ee*1e3,H=Math.floor(q0*W0/8/ee*1e3),xe=0,me=0,M0=0;M0<q.length;M0++){var N0=q[M0];if(me+=N0.byteLength,me>=H+3){var Q0=new Uint8Array(N0),ve=N0.byteLength-(me-(H+3)+1),o0=U(ve,Q0);xe=o0.charAt(6)=="1";break}}return xe&&H++,{version:V0,layer:z0,sampleRate:ee,bitRate:W0,duration:Y0,size:e0,hasPadding:xe,frameSize:H,frameDurationFloat:w0}};var O0={rm:z.mp3ReadMeta,fn:function(q,e0,A0,m0){var U=this.rm(q,e0);if(!U)return{err:"mp3 unknown format"};var x0=Math.round(A0/m0*1e3),C0=Math.floor((U.duration-x0)/U.frameDurationFloat);if(C0>0){var V0=C0*U.frameSize-(U.hasPadding?1:0);e0-=V0;for(var z0=0,ee=[],W0=0;W0<q.length;W0++){var Y0=q[W0];if(V0<=0)break;V0>=Y0.byteLength?(V0-=Y0.byteLength,ee.push(Y0),q.splice(W0,1),W0--):(q[W0]=Y0.slice(V0),z0=Y0,V0=0)}var q0=this.rm(q,e0);if(!q0){z0&&(q[0]=z0);for(var W0=0;W0<ee.length;W0++)q.splice(W0,0,ee[W0]);U.err="mp3 fix error: 已还原，错误原因不明"}var w0=U.trimFix={};w0.remove=C0,w0.removeDuration=Math.round(C0*U.frameDurationFloat),w0.duration=Math.round(e0*8/U.bitRate)}return U}},g0=function(q,e0){var A0="MP3 Info: ";(q.sampleRate&&q.sampleRate!=e0.sampleRate||q.bitRate&&q.bitRate!=e0.bitRate)&&(z.CLog(A0+_0("uY9i::和设置的不匹配{1}，已更新成{2}",0,"set:"+e0.bitRate+"kbps "+e0.sampleRate+"hz","set:"+q.bitRate+"kbps "+q.sampleRate+"hz"),3,e0),e0.sampleRate=q.sampleRate,e0.bitRate=q.bitRate);var m0=q.trimFix;m0?(A0+=_0("iMSm::Fix移除{1}帧",0,m0.remove)+" "+m0.removeDuration+"ms -> "+m0.duration+"ms",m0.remove>2&&(q.err=(q.err?q.err+", ":"")+_0("b9zm::移除帧数过多"))):A0+=(q.duration||"-")+"ms",q.err?z.CLog(A0,1,q.err,q):z.CLog(A0,q)}});(function(z){var T0=typeof window=="object"&&!!window.document,_0=T0?window:Object,Y=_0.Recorder;z(Y)})(function(z){function T0(){var _0=function(u){return Math.log(u)/Math.log(10)},Y=function(u){throw new Error("abort("+u+")")};function y0(u){return new Int8Array(u)}function $(u){return new Int16Array(u)}function h0(u){return new Int32Array(u)}function P(u){return new Float32Array(u)}function d0(u){return new Float64Array(u)}function b0(u){if(u.length==1)return P(u[0]);var I=u[0];u=u.slice(1);for(var F=[],x=0;x<I;x++)F.push(b0(u));return F}function R0(u){if(u.length==1)return h0(u[0]);var I=u[0];u=u.slice(1);for(var F=[],x=0;x<I;x++)F.push(R0(u));return F}function p0(u){if(u.length==1)return $(u[0]);var I=u[0];u=u.slice(1);for(var F=[],x=0;x<I;x++)F.push(p0(u));return F}function O0(u){if(u.length==1)return new Array(u[0]);var I=u[0];u=u.slice(1);for(var F=[],x=0;x<I;x++)F.push(O0(u));return F}var g0={};g0.fill=function(u,I,F,x){if(arguments.length==2)for(var W=0;W<u.length;W++)u[W]=arguments[1];else for(var W=I;W<F;W++)u[W]=x};var q={};q.arraycopy=function(u,I,F,x,W){for(var f=I+W;I<f;)F[x++]=u[I++]};var e0={};e0.SQRT2=1.4142135623730951,e0.FAST_LOG10=function(u){return _0(u)},e0.FAST_LOG10_X=function(u,I){return _0(u)*I};function A0(u){this.ordinal=u}A0.short_block_allowed=new A0(0),A0.short_block_coupled=new A0(1),A0.short_block_dispensed=new A0(2),A0.short_block_forced=new A0(3);var m0={};m0.MAX_VALUE=34028235e31;function U(u){this.ordinal=u}U.vbr_off=new U(0),U.vbr_mt=new U(1),U.vbr_rh=new U(2),U.vbr_abr=new U(3),U.vbr_mtrh=new U(4),U.vbr_default=U.vbr_mtrh;function x0(u){var I=u;this.ordinal=function(){return I}}x0.STEREO=new x0(0),x0.JOINT_STEREO=new x0(1),x0.DUAL_CHANNEL=new x0(2),x0.MONO=new x0(3),x0.NOT_SET=new x0(4);function C0(){var u=3,I=98,F=4;this.getLameShortVersion=function(){return u+"."+I+"."+F}}function V0(){var u=null;this.qupvt=null,this.setModules=function(s){this.qupvt=s,u=s};function I(s){this.bits=0|s}var F=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function x(s,o,v,m,A,a){var t=.5946/o;for(s=s>>1;s--!=0;)A[a++]=t>v[m++]?0:1,A[a++]=t>v[m++]?0:1}function W(s,o,v,m,A,a){s=s>>1;var t=s%2;for(s=s>>1;s--!=0;){var N,B,O,Q,J,a0,B0,I0;N=v[m++]*o,B=v[m++]*o,J=0|N,O=v[m++]*o,a0=0|B,Q=v[m++]*o,B0=0|O,N+=u.adj43[J],I0=0|Q,B+=u.adj43[a0],A[a++]=0|N,O+=u.adj43[B0],A[a++]=0|B,Q+=u.adj43[I0],A[a++]=0|O,A[a++]=0|Q}if(t!=0){var N,B,J,a0;N=v[m++]*o,B=v[m++]*o,J=0|N,a0=0|B,N+=u.adj43[J],B+=u.adj43[a0],A[a++]=0|N,A[a++]=0|B}}function f(s,o,v,m,A){var a,t,N=0,B,O=0,Q=0,J=0,a0=o,B0=0,I0=a0,k0=0,de=s,be=0;for(B=A!=null&&m.global_gain==A.global_gain,m.block_type==_.SHORT_TYPE?t=38:t=21,a=0;a<=t;a++){var le=-1;if((B||m.block_type==_.NORM_TYPE)&&(le=m.global_gain-(m.scalefac[a]+(m.preflag!=0?u.pretab[a]:0)<<m.scalefac_scale+1)-m.subblock_gain[m.window[a]]*8),B&&A.step[a]==le)O!=0&&(W(O,v,de,be,I0,k0),O=0),Q!=0&&Y();else{var fe=m.width[a];if(N+m.width[a]>m.max_nonzero_coeff){var Se;Se=m.max_nonzero_coeff-N+1,g0.fill(o,m.max_nonzero_coeff,576,0),fe=Se,fe<0&&(fe=0),a=t+1}if(O==0&&Q==0&&(I0=a0,k0=B0,de=s,be=J),A!=null&&A.sfb_count1>0&&a>=A.sfb_count1&&A.step[a]>0&&le>=A.step[a]?(O!=0&&(W(O,v,de,be,I0,k0),O=0,I0=a0,k0=B0,de=s,be=J),Q+=fe):(Q!=0&&(x(Q,v,de,be,I0,k0),Q=0,I0=a0,k0=B0,de=s,be=J),O+=fe),fe<=0){Q!=0&&Y(),O!=0&&Y();break}}a<=t&&(B0+=m.width[a],J+=m.width[a],N+=m.width[a])}O!=0&&(W(O,v,de,be,I0,k0),O=0),Q!=0&&Y()}function L(s,o,v){var m=0,A=0;do{var a=s[o++],t=s[o++];m<a&&(m=a),A<t&&(A=t)}while(o<v);return m<A&&(m=A),m}function j(s,o,v,m,A,a){var t=H.ht[m].xlen*65536+H.ht[A].xlen,N=0,B;do{var O=s[o++],Q=s[o++];O!=0&&(O>14&&(O=15,N+=t),O*=16),Q!=0&&(Q>14&&(Q=15,N+=t),O+=Q),N+=H.largetbl[O]}while(o<v);return B=N&65535,N>>=16,N>B&&(N=B,m=A),a.bits+=N,m}function y(s,o,v,m){var A=0,a=H.ht[1].hlen;do{var t=s[o+0]*2+s[o+1];o+=2,A+=a[t]}while(o<v);return m.bits+=A,1}function X(s,o,v,m,A){var a=0,t,N=H.ht[m].xlen,B;m==2?B=H.table23:B=H.table56;do{var O=s[o+0]*N+s[o+1];o+=2,a+=B[O]}while(o<v);return t=a&65535,a>>=16,a>t&&(a=t,m++),A.bits+=a,m}function T(s,o,v,m,A){var a=0,t=0,N=0,B=H.ht[m].xlen,O=H.ht[m].hlen,Q=H.ht[m+1].hlen,J=H.ht[m+2].hlen;do{var a0=s[o+0]*B+s[o+1];o+=2,a+=O[a0],t+=Q[a0],N+=J[a0]}while(o<v);var B0=m;return a>t&&(a=t,B0++),a>N&&(a=N,B0=m+2),A.bits+=a,B0}var K=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function w(s,o,v,m){var A=L(s,o,v);switch(A){case 0:return A;case 1:return y(s,o,v,m);case 2:case 3:return X(s,o,v,K[A-1],m);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return T(s,o,v,K[A-1],m);default:A>b.IXMAX_VAL&&Y(),A-=15;var a;for(a=24;a<32&&!(H.ht[a].linmax>=A);a++);var t;for(t=a-8;t<24&&!(H.ht[t].linmax>=A);t++);return j(s,o,v,t,a,m)}}this.noquant_count_bits=function(s,o,v){var m=o.l3_enc,A=Math.min(576,o.max_nonzero_coeff+2>>1<<1);for(v!=null&&(v.sfb_count1=0);A>1&&!(m[A-1]|m[A-2]);A-=2);o.count1=A;for(var a=0,t=0;A>3;A-=4){var N;if(((m[A-1]|m[A-2]|m[A-3]|m[A-4])&2147483647)>1)break;N=((m[A-4]*2+m[A-3])*2+m[A-2])*2+m[A-1],a+=H.t32l[N],t+=H.t33l[N]}var B=a;if(o.count1table_select=0,a>t&&(B=t,o.count1table_select=1),o.count1bits=B,o.big_values=A,A==0)return B;if(o.block_type==_.SHORT_TYPE)a=3*s.scalefac_band.s[3],a>o.big_values&&(a=o.big_values),t=o.big_values;else if(o.block_type==_.NORM_TYPE){if(a=o.region0_count=s.bv_scf[A-2],t=o.region1_count=s.bv_scf[A-1],t=s.scalefac_band.l[a+t+2],a=s.scalefac_band.l[a+1],t<A){var O=new I(B);o.table_select[2]=w(m,t,A,O),B=O.bits}}else o.region0_count=7,o.region1_count=_.SBMAX_l-1-7-1,a=s.scalefac_band.l[8],t=A,a>t&&(a=t);if(a=Math.min(a,A),t=Math.min(t,A),0<a){var O=new I(B);o.table_select[0]=w(m,0,a,O),B=O.bits}if(a<t){var O=new I(B);o.table_select[1]=w(m,a,t,O),B=O.bits}if(s.use_best_huffman==2&&Y(),v!=null&&o.block_type==_.NORM_TYPE){for(var Q=0;s.scalefac_band.l[Q]<o.big_values;)Q++;v.sfb_count1=Q}return B},this.count_bits=function(s,o,v,m){var A=v.l3_enc,a=b.IXMAX_VAL/u.IPOW20(v.global_gain);return v.xrpow_max>a?b.LARGE_BITS:(f(o,A,u.IPOW20(v.global_gain),v,m),s.substep_shaping&2&&Y(),this.noquant_count_bits(s,v,m))};function E(s,o,v,m,A,a,t){for(var N=o.big_values,B=0;B<=22;B++)m[B]=b.LARGE_BITS;for(var B=0;B<16;B++){var O=s.scalefac_band.l[B+1];if(O>=N)break;var Q=0,J=new I(Q),a0=w(v,0,O,J);Q=J.bits;for(var B0=0;B0<8;B0++){var I0=s.scalefac_band.l[B+B0+2];if(I0>=N)break;var k0=Q;J=new I(k0);var de=w(v,O,I0,J);k0=J.bits,m[B+B0]>k0&&(m[B+B0]=k0,A[B+B0]=B,a[B+B0]=a0,t[B+B0]=de)}}}function e(s,o,v,m,A,a,t,N){for(var B=o.big_values,O=2;O<_.SBMAX_l+1;O++){var Q=s.scalefac_band.l[O];if(Q>=B)break;var J=A[O-2]+o.count1bits;if(v.part2_3_length<=J)break;var a0=new I(J),B0=w(m,Q,B,a0);J=a0.bits,!(v.part2_3_length<=J)&&(v.assign(o),v.part2_3_length=J,v.region0_count=a[O-2],v.region1_count=O-2-a[O-2],v.table_select[0]=t[O-2],v.table_select[1]=N[O-2],v.table_select[2]=B0)}}this.best_huffman_divide=function(s,o){var v=new S,m=o.l3_enc,A=h0(23),a=h0(23),t=h0(23),N=h0(23);if(!(o.block_type==_.SHORT_TYPE&&s.mode_gr==1)){v.assign(o),o.block_type==_.NORM_TYPE&&(E(s,o,m,A,a,t,N),e(s,v,o,m,A,a,t,N));var B=v.big_values;if(!(B==0||(m[B-2]|m[B-1])>1)&&(B=o.count1+2,!(B>576))){v.assign(o),v.count1=B;for(var O=0,Q=0;B>v.big_values;B-=4){var J=((m[B-4]*2+m[B-3])*2+m[B-2])*2+m[B-1];O+=H.t32l[J],Q+=H.t33l[J]}if(v.big_values=B,v.count1table_select=0,O>Q&&(O=Q,v.count1table_select=1),v.count1bits=O,v.block_type==_.NORM_TYPE)e(s,v,o,m,A,a,t,N);else{if(v.part2_3_length=O,O=s.scalefac_band.l[8],O>B&&(O=B),O>0){var a0=new I(v.part2_3_length);v.table_select[0]=w(m,0,O,a0),v.part2_3_length=a0.bits}if(B>O){var a0=new I(v.part2_3_length);v.table_select[1]=w(m,O,B,a0),v.part2_3_length=a0.bits}o.part2_3_length>v.part2_3_length&&o.assign(v)}}}};var n=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],d=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],C=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],h=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];V0.slen1_tab=C,V0.slen2_tab=h;function l(s,o){for(var v,m=o.tt[1][s],A=o.tt[0][s],a=0;a<H.scfsi_band.length-1;a++){for(v=H.scfsi_band[a];v<H.scfsi_band[a+1]&&!(A.scalefac[v]!=m.scalefac[v]&&m.scalefac[v]>=0);v++);if(v==H.scfsi_band[a+1]){for(v=H.scfsi_band[a];v<H.scfsi_band[a+1];v++)m.scalefac[v]=-1;o.scfsi[s][a]=1}}var t=0,N=0;for(v=0;v<11;v++)m.scalefac[v]!=-1&&(N++,t<m.scalefac[v]&&(t=m.scalefac[v]));for(var B=0,O=0;v<_.SBPSY_l;v++)m.scalefac[v]!=-1&&(O++,B<m.scalefac[v]&&(B=m.scalefac[v]));for(var a=0;a<16;a++)if(t<n[a]&&B<d[a]){var Q=C[a]*N+h[a]*O;m.part2_length>Q&&(m.part2_length=Q,m.scalefac_compress=a)}}this.best_scalefac_store=function(s,o,v,m){var A=m.tt[o][v],a,t,N,B,O=0;for(N=0,a=0;a<A.sfbmax;a++){var Q=A.width[a];for(N+=Q,B=-Q;B<0&&A.l3_enc[B+N]==0;B++);B==0&&(A.scalefac[a]=O=-2)}if(A.scalefac_scale==0&&A.preflag==0){var J=0;for(a=0;a<A.sfbmax;a++)A.scalefac[a]>0&&(J|=A.scalefac[a]);if(!(J&1)&&J!=0){for(a=0;a<A.sfbmax;a++)A.scalefac[a]>0&&(A.scalefac[a]>>=1);A.scalefac_scale=O=1}}if(A.preflag==0&&A.block_type!=_.SHORT_TYPE&&s.mode_gr==2){for(a=11;a<_.SBPSY_l&&!(A.scalefac[a]<u.pretab[a]&&A.scalefac[a]!=-2);a++);if(a==_.SBPSY_l){for(a=11;a<_.SBPSY_l;a++)A.scalefac[a]>0&&(A.scalefac[a]-=u.pretab[a]);A.preflag=O=1}}for(t=0;t<4;t++)m.scfsi[v][t]=0;for(s.mode_gr==2&&o==1&&m.tt[0][v].block_type!=_.SHORT_TYPE&&m.tt[1][v].block_type!=_.SHORT_TYPE&&(l(v,m),O=0),a=0;a<A.sfbmax;a++)A.scalefac[a]==-2&&(A.scalefac[a]=0);O!=0&&(s.mode_gr==2?this.scale_bitcount(A):this.scale_bitcount_lsf(s,A))};var c=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],i=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],p=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(s){var o,v,m=0,A=0,a,t=s.scalefac;if(s.block_type==_.SHORT_TYPE)a=c,s.mixed_block_flag!=0&&(a=i);else if(a=p,s.preflag==0){for(v=11;v<_.SBPSY_l&&!(t[v]<u.pretab[v]);v++);if(v==_.SBPSY_l)for(s.preflag=1,v=11;v<_.SBPSY_l;v++)t[v]-=u.pretab[v]}for(v=0;v<s.sfbdivide;v++)m<t[v]&&(m=t[v]);for(;v<s.sfbmax;v++)A<t[v]&&(A=t[v]);for(s.part2_length=b.LARGE_BITS,o=0;o<16;o++)m<n[o]&&A<d[o]&&s.part2_length>a[o]&&(s.part2_length=a[o],s.scalefac_compress=o);return s.part2_length==b.LARGE_BITS};var r=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(s,o){var v,m,A,a,t,N,B,O,Q=h0(4),J=o.scalefac;for(o.preflag!=0?v=2:v=0,B=0;B<4;B++)Q[B]=0;if(o.block_type==_.SHORT_TYPE){m=1;var a0=u.nr_of_sfb_block[v][m];for(O=0,A=0;A<4;A++)for(a=a0[A]/3,B=0;B<a;B++,O++)for(t=0;t<3;t++)J[O*3+t]>Q[A]&&(Q[A]=J[O*3+t])}else{m=0;var a0=u.nr_of_sfb_block[v][m];for(O=0,A=0;A<4;A++)for(a=a0[A],B=0;B<a;B++,O++)J[O]>Q[A]&&(Q[A]=J[O])}for(N=!1,A=0;A<4;A++)Q[A]>r[v][A]&&(N=!0);if(!N){var B0,I0,k0,de;for(o.sfb_partition_table=u.nr_of_sfb_block[v][m],A=0;A<4;A++)o.slen[A]=g[Q[A]];switch(B0=o.slen[0],I0=o.slen[1],k0=o.slen[2],de=o.slen[3],v){case 0:o.scalefac_compress=(B0*5+I0<<4)+(k0<<2)+de;break;case 1:o.scalefac_compress=400+(B0*5+I0<<2)+k0;break;case 2:o.scalefac_compress=500+B0*3+I0;break}}if(!N)for(o.part2_length=0,A=0;A<4;A++)o.part2_length+=o.slen[A]*o.sfb_partition_table[A];return N};var g=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(s){for(var o=2;o<=576;o+=2){for(var v=0,m;s.scalefac_band.l[++v]<o;);for(m=F[v][0];s.scalefac_band.l[m+1]>o;)m--;for(m<0&&(m=F[v][0]),s.bv_scf[o-2]=m,m=F[v][1];s.scalefac_band.l[m+s.bv_scf[o-2]+2]>o;)m--;m<0&&(m=F[v][1]),s.bv_scf[o-1]=m}}}z0.STEPS_per_dB=100,z0.MAX_dB=120,z0.GAIN_NOT_ENOUGH_SAMPLES=-24601,z0.GAIN_ANALYSIS_ERROR=0,z0.GAIN_ANALYSIS_OK=1,z0.INIT_GAIN_ANALYSIS_ERROR=0,z0.INIT_GAIN_ANALYSIS_OK=1,z0.YULE_ORDER=10,z0.MAX_ORDER=z0.YULE_ORDER,z0.MAX_SAMP_FREQ=48e3,z0.RMS_WINDOW_TIME_NUMERATOR=1,z0.RMS_WINDOW_TIME_DENOMINATOR=20,z0.MAX_SAMPLES_PER_WINDOW=z0.MAX_SAMP_FREQ*z0.RMS_WINDOW_TIME_NUMERATOR/z0.RMS_WINDOW_TIME_DENOMINATOR+1;function z0(){}function ee(){function u(f,L,j,y,X,T,K,w,E,e,n,d,C,h){this.quant_comp=L,this.quant_comp_s=j,this.safejoint=y,this.nsmsfix=X,this.st_lrm=T,this.st_s=K,this.nsbass=w,this.scale=E,this.masking_adj=e,this.ath_lower=n,this.ath_curve=d,this.interch=C,this.sfscale=h}var I;this.setModules=function(f){I=f};function F(f,L,j){Y()}var x=[new u(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new u(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new u(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new u(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new u(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new u(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new u(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new u(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new u(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new u(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new u(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new u(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new u(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new u(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new u(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new u(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new u(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function W(f,L,j){var y=L,X=I.nearestBitrateFullIndex(L);if(f.VBR=U.vbr_abr,f.VBR_mean_bitrate_kbps=y,f.VBR_mean_bitrate_kbps=Math.min(f.VBR_mean_bitrate_kbps,320),f.VBR_mean_bitrate_kbps=Math.max(f.VBR_mean_bitrate_kbps,8),f.brate=f.VBR_mean_bitrate_kbps,f.VBR_mean_bitrate_kbps>320&&(f.disable_reservoir=!0),x[X].safejoint>0&&(f.exp_nspsytune=f.exp_nspsytune|2),x[X].sfscale>0&&(f.internal_flags.noise_shaping=2),Math.abs(x[X].nsbass)>0){var T=int(x[X].nsbass*4);T<0&&(T+=64),f.exp_nspsytune=f.exp_nspsytune|T<<2}return j!=0?f.quant_comp=x[X].quant_comp:Math.abs(f.quant_comp- -1)>0||(f.quant_comp=x[X].quant_comp),j!=0?f.quant_comp_short=x[X].quant_comp_s:Math.abs(f.quant_comp_short- -1)>0||(f.quant_comp_short=x[X].quant_comp_s),j!=0?f.msfix=x[X].nsmsfix:Math.abs(f.msfix- -1)>0||(f.msfix=x[X].nsmsfix),j!=0?f.internal_flags.nsPsy.attackthre=x[X].st_lrm:Math.abs(f.internal_flags.nsPsy.attackthre- -1)>0||(f.internal_flags.nsPsy.attackthre=x[X].st_lrm),j!=0?f.internal_flags.nsPsy.attackthre_s=x[X].st_s:Math.abs(f.internal_flags.nsPsy.attackthre_s- -1)>0||(f.internal_flags.nsPsy.attackthre_s=x[X].st_s),j!=0?f.scale=x[X].scale:Math.abs(f.scale- -1)>0||(f.scale=x[X].scale),j!=0?f.maskingadjust=x[X].masking_adj:Math.abs(f.maskingadjust-0)>0||(f.maskingadjust=x[X].masking_adj),x[X].masking_adj>0?j!=0?f.maskingadjust_short=x[X].masking_adj*.9:Math.abs(f.maskingadjust_short-0)>0||(f.maskingadjust_short=x[X].masking_adj*.9):j!=0?f.maskingadjust_short=x[X].masking_adj*1.1:Math.abs(f.maskingadjust_short-0)>0||(f.maskingadjust_short=x[X].masking_adj*1.1),j!=0?f.ATHlower=-x[X].ath_lower/10:Math.abs(-f.ATHlower*10-0)>0||(f.ATHlower=-x[X].ath_lower/10),j!=0?f.ATHcurve=x[X].ath_curve:Math.abs(f.ATHcurve- -1)>0||(f.ATHcurve=x[X].ath_curve),j!=0?f.interChRatio=x[X].interch:Math.abs(f.interChRatio- -1)>0||(f.interChRatio=x[X].interch),L}this.apply_preset=function(f,L,j){switch(L){case s0.R3MIX:{L=s0.V3,f.VBR=U.vbr_mtrh;break}case s0.MEDIUM:{L=s0.V4,f.VBR=U.vbr_rh;break}case s0.MEDIUM_FAST:{L=s0.V4,f.VBR=U.vbr_mtrh;break}case s0.STANDARD:{L=s0.V2,f.VBR=U.vbr_rh;break}case s0.STANDARD_FAST:{L=s0.V2,f.VBR=U.vbr_mtrh;break}case s0.EXTREME:{L=s0.V0,f.VBR=U.vbr_rh;break}case s0.EXTREME_FAST:{L=s0.V0,f.VBR=U.vbr_mtrh;break}case s0.INSANE:return L=320,f.preset=L,W(f,L,j),f.VBR=U.vbr_off,L}switch(f.preset=L,L){case s0.V9:return F(),L;case s0.V8:return F(),L;case s0.V7:return F(),L;case s0.V6:return F(),L;case s0.V5:return F(),L;case s0.V4:return F(),L;case s0.V3:return F(),L;case s0.V2:return F(),L;case s0.V1:return F(),L;case s0.V0:return F(),L}return 8<=L&&L<=320?W(f,L,j):(f.preset=0,L)}}function W0(){var u;this.setModules=function(I){u=I},this.ResvFrameBegin=function(I,F){var x=I.internal_flags,W,f=x.l3_side,L=u.getframebits(I);F.bits=(L-x.sideinfo_len*8)/x.mode_gr;var j=8*256*x.mode_gr-8;I.brate>320?Y():(W=8*1440,I.strict_ISO&&Y()),x.ResvMax=W-L,x.ResvMax>j&&(x.ResvMax=j),(x.ResvMax<0||I.disable_reservoir)&&(x.ResvMax=0);var y=F.bits*x.mode_gr+Math.min(x.ResvSize,x.ResvMax);return y>W&&(y=W),f.resvDrain_pre=0,x.pinfo!=null&&Y(),y},this.ResvMaxBits=function(I,F,x,W){var f=I.internal_flags,L,j=f.ResvSize,y=f.ResvMax;W!=0&&(j+=F),f.substep_shaping&1&&(y*=.9),x.bits=F,j*10>y*9?(L=j-y*9/10,x.bits+=L,f.substep_shaping|=128):(L=0,f.substep_shaping&=127,!I.disable_reservoir&&!(f.substep_shaping&1)&&(x.bits-=.1*F));var X=j<f.ResvMax*6/10?j:f.ResvMax*6/10;return X-=L,X<0&&(X=0),X},this.ResvAdjust=function(I,F){I.ResvSize-=F.part2_3_length+F.part2_length},this.ResvFrameEnd=function(I,F){var x,W=I.l3_side;I.ResvSize+=F*I.mode_gr;var f=0;W.resvDrain_post=0,W.resvDrain_pre=0,(x=I.ResvSize%8)!=0&&(f+=x),x=I.ResvSize-f-I.ResvMax,x>0&&(f+=x);{var L=Math.min(W.main_data_begin*8,f)/8;W.resvDrain_pre+=8*L,f-=8*L,I.ResvSize-=8*L,W.main_data_begin-=L}W.resvDrain_post+=f,I.ResvSize-=f}}Y0.NUMTOCENTRIES=100,Y0.MAXFRAMESIZE=2880;function Y0(){this.setModules=function(F,x,W){};var u=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function I(F,x){var W=x^F;return x=x>>8^u[W&255],x}this.updateMusicCRC=function(F,x,W,f){for(var L=0;L<f;++L)F[0]=I(x[W+L],F[0])}}q0.EQ=function(u,I){return Math.abs(u)>Math.abs(I)?Math.abs(u-I)<=Math.abs(u)*1e-6:Math.abs(u-I)<=Math.abs(I)*1e-6},q0.NEQ=function(u,I){return!q0.EQ(u,I)};function q0(){var u=this,I=null,F=null;this.setModules=function(l,c,i,p){I=i,F=p};var x=null,W=0,f=0,L=0;this.getframebits=function(l){var c=l.internal_flags,i;c.bitrate_index!=0?i=H.bitrate_table[l.version][c.bitrate_index]:i=l.brate;var p=0|(l.version+1)*72e3*i/l.out_samplerate+c.padding;return 8*p};function j(l){q.arraycopy(l.header[l.w_ptr].buf,0,x,f,l.sideinfo_len),f+=l.sideinfo_len,W+=l.sideinfo_len*8,l.w_ptr=l.w_ptr+1&E0.MAX_HEADER_BUF-1}function y(l,c,i){for(;i>0;){var p;L==0&&(L=8,f++,l.header[l.w_ptr].write_timing==W&&j(l),x[f]=0),p=Math.min(i,L),i-=p,L-=p,x[f]|=c>>i<<L,W+=p}}function X(l,c){var i=l.internal_flags,p;if(c>=8&&(y(i,76,8),c-=8),c>=8&&(y(i,65,8),c-=8),c>=8&&(y(i,77,8),c-=8),c>=8&&(y(i,69,8),c-=8),c>=32){var r=I.getLameShortVersion();if(c>=32)for(p=0;p<r.length&&c>=8;++p)c-=8,y(i,r.charCodeAt(p),8)}for(;c>=1;c-=1)y(i,i.ancillary_flag,1),i.ancillary_flag^=l.disable_reservoir?0:1}function T(l,c,i){for(var p=l.header[l.h_ptr].ptr;i>0;){var r=Math.min(i,8-(p&7));i-=r,l.header[l.h_ptr].buf[p>>3]|=c>>i<<8-(p&7)-r,p+=r}l.header[l.h_ptr].ptr=p}function K(l,c){var i=l.internal_flags,p,r,g;if(p=i.l3_side,i.header[i.h_ptr].ptr=0,g0.fill(i.header[i.h_ptr].buf,0,i.sideinfo_len,0),l.out_samplerate<16e3?T(i,4094,12):T(i,4095,12),T(i,l.version,1),T(i,1,2),T(i,l.error_protection?0:1,1),T(i,i.bitrate_index,4),T(i,i.samplerate_index,2),T(i,i.padding,1),T(i,l.extension,1),T(i,l.mode.ordinal(),2),T(i,i.mode_ext,2),T(i,l.copyright,1),T(i,l.original,1),T(i,l.emphasis,2),l.error_protection&&T(i,0,16),l.version==1){for(T(i,p.main_data_begin,9),i.channels_out==2?T(i,p.private_bits,3):T(i,p.private_bits,5),g=0;g<i.channels_out;g++){var s;for(s=0;s<4;s++)T(i,p.scfsi[g][s],1)}for(r=0;r<2;r++)for(g=0;g<i.channels_out;g++){var o=p.tt[r][g];T(i,o.part2_3_length+o.part2_length,12),T(i,o.big_values/2,9),T(i,o.global_gain,8),T(i,o.scalefac_compress,4),o.block_type!=_.NORM_TYPE?(T(i,1,1),T(i,o.block_type,2),T(i,o.mixed_block_flag,1),o.table_select[0]==14&&(o.table_select[0]=16),T(i,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),T(i,o.table_select[1],5),T(i,o.subblock_gain[0],3),T(i,o.subblock_gain[1],3),T(i,o.subblock_gain[2],3)):(T(i,0,1),o.table_select[0]==14&&(o.table_select[0]=16),T(i,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),T(i,o.table_select[1],5),o.table_select[2]==14&&(o.table_select[2]=16),T(i,o.table_select[2],5),T(i,o.region0_count,4),T(i,o.region1_count,3)),T(i,o.preflag,1),T(i,o.scalefac_scale,1),T(i,o.count1table_select,1)}}else for(T(i,p.main_data_begin,8),T(i,p.private_bits,i.channels_out),r=0,g=0;g<i.channels_out;g++){var o=p.tt[r][g];T(i,o.part2_3_length+o.part2_length,12),T(i,o.big_values/2,9),T(i,o.global_gain,8),T(i,o.scalefac_compress,9),o.block_type!=_.NORM_TYPE?(T(i,1,1),T(i,o.block_type,2),T(i,o.mixed_block_flag,1),o.table_select[0]==14&&(o.table_select[0]=16),T(i,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),T(i,o.table_select[1],5),T(i,o.subblock_gain[0],3),T(i,o.subblock_gain[1],3),T(i,o.subblock_gain[2],3)):(T(i,0,1),o.table_select[0]==14&&(o.table_select[0]=16),T(i,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),T(i,o.table_select[1],5),o.table_select[2]==14&&(o.table_select[2]=16),T(i,o.table_select[2],5),T(i,o.region0_count,4),T(i,o.region1_count,3)),T(i,o.scalefac_scale,1),T(i,o.count1table_select,1)}l.error_protection&&Y();{var v=i.h_ptr;i.h_ptr=v+1&E0.MAX_HEADER_BUF-1,i.header[i.h_ptr].write_timing=i.header[v].write_timing+c,i.h_ptr==i.w_ptr}}function w(l,c){var i=H.ht[c.count1table_select+32],p,r=0,g=c.big_values,s=c.big_values;for(p=(c.count1-c.big_values)/4;p>0;--p){var o=0,v=0,m;m=c.l3_enc[g+0],m!=0&&(v+=8,c.xr[s+0]<0&&o++),m=c.l3_enc[g+1],m!=0&&(v+=4,o*=2,c.xr[s+1]<0&&o++),m=c.l3_enc[g+2],m!=0&&(v+=2,o*=2,c.xr[s+2]<0&&o++),m=c.l3_enc[g+3],m!=0&&(v++,o*=2,c.xr[s+3]<0&&o++),g+=4,s+=4,y(l,o+i.table[v],i.hlen[v]),r+=i.hlen[v]}return r}function E(l,c,i,p,r){var g=H.ht[c],s=0;if(c==0)return s;for(var o=i;o<p;o+=2){var v=0,m=0,A=g.xlen,a=g.xlen,t=0,N=r.l3_enc[o],B=r.l3_enc[o+1];if(N!=0&&(r.xr[o]<0&&t++,v--),c>15){if(N>14){var O=N-15;t|=O<<1,m=A,N=15}if(B>14){var Q=B-15;t<<=A,t|=Q,m+=A,B=15}a=16}B!=0&&(t<<=1,r.xr[o+1]<0&&t++,v--),N=N*a+B,m-=v,v+=g.hlen[N],y(l,g.table[N],v),y(l,t,m),s+=v+m}return s}function e(l,c){var i=3*l.scalefac_band.s[3];i>c.big_values&&(i=c.big_values);var p=E(l,c.table_select[0],0,i,c);return p+=E(l,c.table_select[1],i,c.big_values,c),p}function n(l,c){var i,p,r,g;i=c.big_values;var s=c.region0_count+1;return r=l.scalefac_band.l[s],s+=c.region1_count+1,g=l.scalefac_band.l[s],r>i&&(r=i),g>i&&(g=i),p=E(l,c.table_select[0],0,r,c),p+=E(l,c.table_select[1],r,g,c),p+=E(l,c.table_select[2],g,i,c),p}function d(l){var c,i,p,r,g=0,s=l.internal_flags,o=s.l3_side;if(l.version==1)for(c=0;c<2;c++)for(i=0;i<s.channels_out;i++){var v=o.tt[c][i],m=V0.slen1_tab[v.scalefac_compress],A=V0.slen2_tab[v.scalefac_compress];for(r=0,p=0;p<v.sfbdivide;p++)v.scalefac[p]!=-1&&(y(s,v.scalefac[p],m),r+=m);for(;p<v.sfbmax;p++)v.scalefac[p]!=-1&&(y(s,v.scalefac[p],A),r+=A);v.block_type==_.SHORT_TYPE?r+=e(s,v):r+=n(s,v),r+=w(s,v),g+=r}else for(c=0,i=0;i<s.channels_out;i++){var v=o.tt[c][i],a,t,N=0;if(r=0,p=0,t=0,v.block_type==_.SHORT_TYPE){for(;t<4;t++){var B=v.sfb_partition_table[t]/3,O=v.slen[t];for(a=0;a<B;a++,p++)y(s,Math.max(v.scalefac[p*3+0],0),O),y(s,Math.max(v.scalefac[p*3+1],0),O),y(s,Math.max(v.scalefac[p*3+2],0),O),N+=3*O}r+=e(s,v)}else{for(;t<4;t++){var B=v.sfb_partition_table[t],O=v.slen[t];for(a=0;a<B;a++,p++)y(s,Math.max(v.scalefac[p],0),O),N+=O}r+=n(s,v)}r+=w(s,v),g+=N+r}return g}function C(){this.total=0}function h(l,c){var i=l.internal_flags,p,r,g;return i.w_ptr,g=i.h_ptr-1,g==-1&&(g=E0.MAX_HEADER_BUF-1),p=i.header[g].write_timing-W,c.total=p,p>=0&&Y(),r=u.getframebits(l),p+=r,c.total+=r,c.total%8!=0?c.total=1+c.total/8:c.total=c.total/8,c.total+=f+1,p}this.flush_bitstream=function(l){var c=l.internal_flags,i,p;c.h_ptr-1,i=c.l3_side,!((p=h(l,new C))<0)&&(X(l,p),c.ResvSize=0,i.main_data_begin=0,c.findReplayGain&&Y(),c.findPeakSample&&Y())},this.format_bitstream=function(l){var c=l.internal_flags,i;i=c.l3_side;var p=this.getframebits(l);X(l,i.resvDrain_pre),K(l,p);var r=8*c.sideinfo_len;if(r+=d(l),X(l,i.resvDrain_post),r+=i.resvDrain_post,i.main_data_begin+=(p-r)/8,h(l,new C)!=c.ResvSize,i.main_data_begin*8!=c.ResvSize&&(c.ResvSize=i.main_data_begin*8),W>1e9){var g;for(g=0;g<E0.MAX_HEADER_BUF;++g)c.header[g].write_timing-=W;W=0}return 0},this.copy_buffer=function(l,c,i,p,r){var g=f+1;if(g<=0)return 0;if(p!=0&&g>p)return-1;if(q.arraycopy(x,0,c,i,g),f=-1,L=0,r!=0){var s=h0(1);s[0]=l.nMusicCRC,F.updateMusicCRC(s,c,i,g),l.nMusicCRC=s[0],g>0&&(l.VBR_seek_table.nBytesWritten+=g),l.decode_on_the_fly&&Y()}return g},this.init_bit_stream_w=function(l){x=y0(s0.LAME_MAXMP3BUFFER),l.h_ptr=l.w_ptr=0,l.header[l.h_ptr].write_timing=0,f=-1,L=0,W=0}}function w0(u,I,F,x){this.xlen=u,this.linmax=I,this.table=F,this.hlen=x}var H={};H.t1HB=[1,1,1,0],H.t2HB=[1,2,1,3,1,1,3,2,0],H.t3HB=[3,2,1,1,1,1,3,2,0],H.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],H.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],H.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],H.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],H.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],H.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],H.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],H.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],H.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],H.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],H.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],H.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],H.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],H.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],H.t1l=[1,4,3,5],H.t2l=[1,4,7,4,5,7,6,7,8],H.t3l=[2,3,7,4,4,7,6,7,8],H.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],H.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],H.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],H.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],H.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],H.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],H.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],H.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],H.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],H.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],H.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],H.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],H.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],H.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],H.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],H.ht=[new w0(0,0,null,null),new w0(2,0,H.t1HB,H.t1l),new w0(3,0,H.t2HB,H.t2l),new w0(3,0,H.t3HB,H.t3l),new w0(0,0,null,null),new w0(4,0,H.t5HB,H.t5l),new w0(4,0,H.t6HB,H.t6l),new w0(6,0,H.t7HB,H.t7l),new w0(6,0,H.t8HB,H.t8l),new w0(6,0,H.t9HB,H.t9l),new w0(8,0,H.t10HB,H.t10l),new w0(8,0,H.t11HB,H.t11l),new w0(8,0,H.t12HB,H.t12l),new w0(16,0,H.t13HB,H.t13l),new w0(0,0,null,H.t16_5l),new w0(16,0,H.t15HB,H.t15l),new w0(1,1,H.t16HB,H.t16l),new w0(2,3,H.t16HB,H.t16l),new w0(3,7,H.t16HB,H.t16l),new w0(4,15,H.t16HB,H.t16l),new w0(6,63,H.t16HB,H.t16l),new w0(8,255,H.t16HB,H.t16l),new w0(10,1023,H.t16HB,H.t16l),new w0(13,8191,H.t16HB,H.t16l),new w0(4,15,H.t24HB,H.t24l),new w0(5,31,H.t24HB,H.t24l),new w0(6,63,H.t24HB,H.t24l),new w0(7,127,H.t24HB,H.t24l),new w0(8,255,H.t24HB,H.t24l),new w0(9,511,H.t24HB,H.t24l),new w0(11,2047,H.t24HB,H.t24l),new w0(13,8191,H.t24HB,H.t24l),new w0(0,0,H.t32HB,H.t32l),new w0(0,0,H.t33HB,H.t33l)],H.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],H.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],H.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],H.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],H.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],H.scfsi_band=[0,6,11,16,21];function xe(u){this.bits=u}function me(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function M0(){this.setModules=function(u,I){}}function N0(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=P(_.SBMAX_l),this.s=P(_.SBMAX_s),this.psfb21=P(_.PSFB21),this.psfb12=P(_.PSFB12),this.cb_l=P(_.CBANDS),this.cb_s=P(_.CBANDS),this.eql_w=P(_.BLKSIZE/2)}function Q0(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=x0.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function ve(u){var I=u;this.quantize=I,this.iteration_loop=function(F,x,W,f){var L=F.internal_flags,j=P(k.SFBMAX),y=P(576),X=h0(2),T=0,K=L.l3_side,w=new xe(T);this.quantize.rv.ResvFrameBegin(F,w),T=w.bits;for(var E=0;E<L.mode_gr;E++){this.quantize.qupvt.on_pe(F,x,X,T,E,E),L.mode_ext==_.MPG_MD_MS_LR&&Y();for(var e=0;e<L.channels_out;e++){var n,d,C=K.tt[E][e];C.block_type!=_.SHORT_TYPE?(n=0,d=L.PSY.mask_adjust-n):(n=0,d=L.PSY.mask_adjust_short-n),L.masking_lower=Math.pow(10,d*.1),this.quantize.init_outer_loop(L,C),this.quantize.init_xrpow(L,C,y)&&(this.quantize.qupvt.calc_xmin(F,f[E][e],C,j),this.quantize.outer_loop(F,C,j,y,e,X[e])),this.quantize.iteration_finish_one(L,E,e)}}this.quantize.rv.ResvFrameEnd(L,T)}}function o0(){}function _e(u,I,F,x){this.l=h0(1+_.SBMAX_l),this.s=h0(1+_.SBMAX_s),this.psfb21=h0(1+_.PSFB21),this.psfb12=h0(1+_.PSFB12);var W=this.l,f=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],q.arraycopy(this.arrL,0,W,0,Math.min(this.arrL.length,this.l.length)),q.arraycopy(this.arrS,0,f,0,Math.min(this.arrS.length,this.s.length)),q.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),q.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}b.Q_MAX=257,b.Q_MAX2=116,b.LARGE_BITS=1e5,b.IXMAX_VAL=8206;function b(){var u=null,I=null,F=null;this.setModules=function(h,l,c){u=h,I=l,F=c};function x(h){return K[h+b.Q_MAX2]}this.IPOW20=function(h){return w[h]};var W=2220446049250313e-31,f=b.IXMAX_VAL,L=f+2,j=b.Q_MAX,y=b.Q_MAX2,X=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var T=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=T,this.sfBandIndex=[new _e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var K=P(j+y+1),w=P(j),E=P(L),e=P(L);this.adj43=e;function n(h,l){var c=F.ATHformula(l,h);return c-=X,c=Math.pow(10,c/10+h.ATHlower),c}function d(h){for(var l=h.internal_flags.ATH.l,c=h.internal_flags.ATH.psfb21,i=h.internal_flags.ATH.s,p=h.internal_flags.ATH.psfb12,r=h.internal_flags,g=h.out_samplerate,s=0;s<_.SBMAX_l;s++){var o=r.scalefac_band.l[s],v=r.scalefac_band.l[s+1];l[s]=m0.MAX_VALUE;for(var m=o;m<v;m++){var A=m*g/1152,a=n(h,A);l[s]=Math.min(l[s],a)}}for(var s=0;s<_.PSFB21;s++){var o=r.scalefac_band.psfb21[s],v=r.scalefac_band.psfb21[s+1];c[s]=m0.MAX_VALUE;for(var m=o;m<v;m++){var A=m*g/1152,a=n(h,A);c[s]=Math.min(c[s],a)}}for(var s=0;s<_.SBMAX_s;s++){var o=r.scalefac_band.s[s],v=r.scalefac_band.s[s+1];i[s]=m0.MAX_VALUE;for(var m=o;m<v;m++){var A=m*g/384,a=n(h,A);i[s]=Math.min(i[s],a)}i[s]*=r.scalefac_band.s[s+1]-r.scalefac_band.s[s]}for(var s=0;s<_.PSFB12;s++){var o=r.scalefac_band.psfb12[s],v=r.scalefac_band.psfb12[s+1];p[s]=m0.MAX_VALUE;for(var m=o;m<v;m++){var A=m*g/384,a=n(h,A);p[s]=Math.min(p[s],a)}p[s]*=r.scalefac_band.s[13]-r.scalefac_band.s[12]}h.noATH&&Y(),r.ATH.floor=10*_0(n(h,-1))}this.iteration_init=function(h){var l=h.internal_flags,c=l.l3_side,i;if(l.iteration_init_init==0){for(l.iteration_init_init=1,c.main_data_begin=0,d(h),E[0]=0,i=1;i<L;i++)E[i]=Math.pow(i,4/3);for(i=0;i<L-1;i++)e[i]=i+1-Math.pow(.5*(E[i]+E[i+1]),.75);for(e[i]=.5,i=0;i<j;i++)w[i]=Math.pow(2,(i-210)*-.1875);for(i=0;i<=j+y;i++)K[i]=Math.pow(2,(i-210-y)*.25);u.huffman_init(l);{var p,r,g,s;for(i=h.exp_nspsytune>>2&63,i>=32&&(i-=64),p=Math.pow(10,i/4/10),i=h.exp_nspsytune>>8&63,i>=32&&(i-=64),r=Math.pow(10,i/4/10),i=h.exp_nspsytune>>14&63,i>=32&&(i-=64),g=Math.pow(10,i/4/10),i=h.exp_nspsytune>>20&63,i>=32&&(i-=64),s=g*Math.pow(10,i/4/10),i=0;i<_.SBMAX_l;i++){var o;i<=6?o=p:i<=13?o=r:i<=20?o=g:o=s,l.nsPsy.longfact[i]=o}for(i=0;i<_.SBMAX_s;i++){var o;i<=5?o=p:i<=10?o=r:i<=11?o=g:o=s,l.nsPsy.shortfact[i]=o}}}},this.on_pe=function(h,l,c,i,p,r){var g=h.internal_flags,s=0,o,v=h0(2),m,A=new xe(s),a=I.ResvMaxBits(h,i,A,r);s=A.bits;var t=s+a;for(t>E0.MAX_BITS_PER_GRANULE&&(t=E0.MAX_BITS_PER_GRANULE),o=0,m=0;m<g.channels_out;++m)c[m]=Math.min(E0.MAX_BITS_PER_CHANNEL,s/g.channels_out),v[m]=0|c[m]*l[p][m]/700-c[m],v[m]>i*3/4&&(v[m]=i*3/4),v[m]<0&&(v[m]=0),v[m]+c[m]>E0.MAX_BITS_PER_CHANNEL&&(v[m]=Math.max(0,E0.MAX_BITS_PER_CHANNEL-c[m])),o+=v[m];if(o>a)for(m=0;m<g.channels_out;++m)v[m]=a*v[m]/o;for(m=0;m<g.channels_out;++m)c[m]+=v[m],a-=v[m];for(o=0,m=0;m<g.channels_out;++m)o+=c[m];return o>E0.MAX_BITS_PER_GRANULE&&Y(),t},this.athAdjust=function(h,l,c){var i=90.30873362,p=94.82444863,r=e0.FAST_LOG10_X(l,10),g=h*h,s=0;return r-=c,g>1e-20&&(s=1+e0.FAST_LOG10_X(g,10/i)),s<0&&(s=0),r*=s,r+=c+i-p,Math.pow(10,.1*r)},this.calc_xmin=function(h,l,c,i){var p=0,r=h.internal_flags,g,s=0,o=0,v=r.ATH,m=c.xr,A=h.VBR==U.vbr_mtrh?1:0,a=r.masking_lower;for((h.VBR==U.vbr_mtrh||h.VBR==U.vbr_mt)&&(a=1),g=0;g<c.psy_lmax;g++){var t,N,B,O,Q,J;h.VBR==U.vbr_rh||h.VBR==U.vbr_mtrh?N=athAdjust(v.adjust,v.l[g],v.floor):N=v.adjust*v.l[g],Q=c.width[g],B=N/Q,O=W,J=Q>>1,t=0;do{var a0,B0;a0=m[s]*m[s],t+=a0,O+=a0<B?a0:B,s++,B0=m[s]*m[s],t+=B0,O+=B0<B?B0:B,s++}while(--J>0);if(t>N&&o++,g==_.SBPSY_l&&Y(),A!=0&&(N=O),!h.ATHonly){var I0=l.en.l[g];if(I0>0){var k0;k0=t*l.thm.l[g]*a/I0,A!=0&&(k0*=r.nsPsy.longfact[g]),N<k0&&(N=k0)}}A!=0?i[p++]=N:i[p++]=N*r.nsPsy.longfact[g]}var de=575;if(c.block_type!=_.SHORT_TYPE)for(var be=576;be--!=0&&q0.EQ(m[be],0);)de=be;c.max_nonzero_coeff=de;for(var le=c.sfb_smin;g<c.psymax;le++,g+=3){var Q,fe,Se;for(h.VBR==U.vbr_rh||h.VBR==U.vbr_mtrh?Se=athAdjust(v.adjust,v.s[le],v.floor):Se=v.adjust*v.s[le],Q=c.width[g],fe=0;fe<3;fe++){var t=0,N,B,O,J=Q>>1;B=Se/Q,O=W;do{var a0,B0;a0=m[s]*m[s],t+=a0,O+=a0<B?a0:B,s++,B0=m[s]*m[s],t+=B0,O+=B0<B?B0:B,s++}while(--J>0);if(t>Se&&o++,le==_.SBPSY_s&&Y(),A!=0?N=O:N=Se,!h.ATHonly&&!h.ATHshort){var I0=l.en.s[le][fe];if(I0>0){var k0;k0=t*l.thm.s[le][fe]*a/I0,A!=0&&(k0*=r.nsPsy.shortfact[le]),N<k0&&(N=k0)}}A!=0?i[p++]=N:i[p++]=N*r.nsPsy.shortfact[le]}h.useTemporal&&(i[p-3]>i[p-3+1]&&(i[p-3+1]+=(i[p-3]-i[p-3+1])*r.decay),i[p-3+1]>i[p-3+2]&&(i[p-3+2]+=(i[p-3+1]-i[p-3+2])*r.decay))}return o};function C(h){this.s=h}this.calc_noise_core=function(h,l,c,i){var p=0,r=l.s,g=h.l3_enc;if(r>h.count1)for(;c--!=0;){var s;s=h.xr[r],r++,p+=s*s,s=h.xr[r],r++,p+=s*s}else if(r>h.big_values){var o=P(2);for(o[0]=0,o[1]=i;c--!=0;){var s;s=Math.abs(h.xr[r])-o[g[r]],r++,p+=s*s,s=Math.abs(h.xr[r])-o[g[r]],r++,p+=s*s}}else for(;c--!=0;){var s;s=Math.abs(h.xr[r])-E[g[r]]*i,r++,p+=s*s,s=Math.abs(h.xr[r])-E[g[r]]*i,r++,p+=s*s}return l.s=r,p},this.calc_noise=function(h,l,c,i,p){var r=0,g=0,s,o,v=0,m=0,A=0,a=-20,t=0,N=h.scalefac,B=0;for(i.over_SSD=0,s=0;s<h.psymax;s++){var O=h.global_gain-(N[B++]+(h.preflag!=0?T[s]:0)<<h.scalefac_scale+1)-h.subblock_gain[h.window[s]]*8,Q=0;if(p!=null&&p.step[s]==O)Q=p.noise[s],t+=h.width[s],c[r++]=Q/l[g++],Q=p.noise_log[s];else{var J=x(O);if(o=h.width[s]>>1,t+h.width[s]>h.max_nonzero_coeff){var a0;a0=h.max_nonzero_coeff-t+1,a0>0?o=a0>>1:o=0}var B0=new C(t);Q=this.calc_noise_core(h,B0,o,J),t=B0.s,p!=null&&(p.step[s]=O,p.noise[s]=Q),Q=c[r++]=Q/l[g++],Q=e0.FAST_LOG10(Math.max(Q,1e-20)),p!=null&&(p.noise_log[s]=Q)}if(p!=null&&(p.global_gain=h.global_gain),A+=Q,Q>0){var I0;I0=Math.max(0|Q*10+.5,1),i.over_SSD+=I0*I0,v++,m+=Q}a=Math.max(a,Q)}return i.over_count=v,i.tot_noise=A,i.over_noise=m,i.max_noise=a,v}}function M(){this.global_gain=0,this.sfb_count1=0,this.step=h0(39),this.noise=P(39),this.noise_log=P(39)}function S(){this.xr=P(576),this.l3_enc=h0(576),this.scalefac=h0(k.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=h0(3),this.subblock_gain=h0(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=h0(k.SFBMAX),this.window=h0(k.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=h0(4),this.max_nonzero_coeff=0;var u=this;function I(x){return new Int32Array(x)}function F(x){return new Float32Array(x)}this.assign=function(x){u.xr=F(x.xr),u.l3_enc=I(x.l3_enc),u.scalefac=I(x.scalefac),u.xrpow_max=x.xrpow_max,u.part2_3_length=x.part2_3_length,u.big_values=x.big_values,u.count1=x.count1,u.global_gain=x.global_gain,u.scalefac_compress=x.scalefac_compress,u.block_type=x.block_type,u.mixed_block_flag=x.mixed_block_flag,u.table_select=I(x.table_select),u.subblock_gain=I(x.subblock_gain),u.region0_count=x.region0_count,u.region1_count=x.region1_count,u.preflag=x.preflag,u.scalefac_scale=x.scalefac_scale,u.count1table_select=x.count1table_select,u.part2_length=x.part2_length,u.sfb_lmax=x.sfb_lmax,u.sfb_smin=x.sfb_smin,u.psy_lmax=x.psy_lmax,u.sfbmax=x.sfbmax,u.psymax=x.psymax,u.sfbdivide=x.sfbdivide,u.width=I(x.width),u.window=I(x.window),u.count1bits=x.count1bits,u.sfb_partition_table=x.sfb_partition_table.slice(0),u.slen=I(x.slen),u.max_nonzero_coeff=x.max_nonzero_coeff}}var k={};k.SFBMAX=_.SBMAX_s*3;function G(){this.rv=null;var u;this.qupvt=null;var I,F=new M0,x;this.setModules=function(e,n,d,C){u=n,this.rv=n,I=d,this.qupvt=d,x=C,F.setModules(I,x)};function W(e,n,d,C){C=0;for(var h=0;h<=d;++h){var l=Math.abs(e.xr[h]);C+=l,n[h]=Math.sqrt(l*Math.sqrt(l)),n[h]>e.xrpow_max&&(e.xrpow_max=n[h])}return C}this.init_xrpow=function(e,n,d){var C=0,h=0|n.max_nonzero_coeff;if(n.xrpow_max=0,g0.fill(d,h,576,0),C=W(n,d,h,C),C>1e-20){var l=0;e.substep_shaping&2&&(l=1);for(var c=0;c<n.psymax;c++)e.pseudohalf[c]=l;return!0}return g0.fill(n.l3_enc,0,576,0),!1};function f(e,n){var d=e.ATH,C=n.xr;if(n.block_type!=_.SHORT_TYPE)for(var h=!1,l=_.PSFB21-1;l>=0&&!h;l--){var c=e.scalefac_band.psfb21[l],i=e.scalefac_band.psfb21[l+1],p=I.athAdjust(d.adjust,d.psfb21[l],d.floor);e.nsPsy.longfact[21]>1e-12&&(p*=e.nsPsy.longfact[21]);for(var r=i-1;r>=c;r--)if(Math.abs(C[r])<p)C[r]=0;else{h=!0;break}}else for(var g=0;g<3;g++)for(var h=!1,l=_.PSFB12-1;l>=0&&!h;l--){var c=e.scalefac_band.s[12]*3+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*g+(e.scalefac_band.psfb12[l]-e.scalefac_band.psfb12[0]),i=c+(e.scalefac_band.psfb12[l+1]-e.scalefac_band.psfb12[l]),s=I.athAdjust(d.adjust,d.psfb12[l],d.floor);e.nsPsy.shortfact[12]>1e-12&&(s*=e.nsPsy.shortfact[12]);for(var r=i-1;r>=c;r--)if(Math.abs(C[r])<s)C[r]=0;else{h=!0;break}}}this.init_outer_loop=function(e,n){n.part2_3_length=0,n.big_values=0,n.count1=0,n.global_gain=210,n.scalefac_compress=0,n.table_select[0]=0,n.table_select[1]=0,n.table_select[2]=0,n.subblock_gain[0]=0,n.subblock_gain[1]=0,n.subblock_gain[2]=0,n.subblock_gain[3]=0,n.region0_count=0,n.region1_count=0,n.preflag=0,n.scalefac_scale=0,n.count1table_select=0,n.part2_length=0,n.sfb_lmax=_.SBPSY_l,n.sfb_smin=_.SBPSY_s,n.psy_lmax=e.sfb21_extra?_.SBMAX_l:_.SBPSY_l,n.psymax=n.psy_lmax,n.sfbmax=n.sfb_lmax,n.sfbdivide=11;for(var d=0;d<_.SBMAX_l;d++)n.width[d]=e.scalefac_band.l[d+1]-e.scalefac_band.l[d],n.window[d]=3;if(n.block_type==_.SHORT_TYPE){var C=P(576);n.sfb_smin=0,n.sfb_lmax=0,n.mixed_block_flag!=0&&Y(),n.psymax=n.sfb_lmax+3*((e.sfb21_extra?_.SBMAX_s:_.SBPSY_s)-n.sfb_smin),n.sfbmax=n.sfb_lmax+3*(_.SBPSY_s-n.sfb_smin),n.sfbdivide=n.sfbmax-18,n.psy_lmax=n.sfb_lmax;var h=e.scalefac_band.l[n.sfb_lmax];q.arraycopy(n.xr,0,C,0,576);for(var d=n.sfb_smin;d<_.SBMAX_s;d++)for(var l=e.scalefac_band.s[d],c=e.scalefac_band.s[d+1],i=0;i<3;i++)for(var p=l;p<c;p++)n.xr[h++]=C[3*p+i];for(var r=n.sfb_lmax,d=n.sfb_smin;d<_.SBMAX_s;d++)n.width[r]=n.width[r+1]=n.width[r+2]=e.scalefac_band.s[d+1]-e.scalefac_band.s[d],n.window[r]=0,n.window[r+1]=1,n.window[r+2]=2,r+=3}n.count1bits=0,n.sfb_partition_table=I.nr_of_sfb_block[0][0],n.slen[0]=0,n.slen[1]=0,n.slen[2]=0,n.slen[3]=0,n.max_nonzero_coeff=575,g0.fill(n.scalefac,0),f(e,n)};function L(e){this.ordinal=e}L.BINSEARCH_NONE=new L(0),L.BINSEARCH_UP=new L(1),L.BINSEARCH_DOWN=new L(2);function j(e,n,d,C,h){var l,c=e.CurrentStep[C],i=!1,p=e.OldValue[C],r=L.BINSEARCH_NONE;for(n.global_gain=p,d-=n.part2_length;;){var g;if(l=x.count_bits(e,h,n,null),c==1||l==d)break;l>d?(r==L.BINSEARCH_DOWN&&(i=!0),i&&(c/=2),r=L.BINSEARCH_UP,g=c):(r==L.BINSEARCH_UP&&(i=!0),i&&(c/=2),r=L.BINSEARCH_DOWN,g=-c),n.global_gain+=g,n.global_gain<0&&Y(),n.global_gain>255&&Y()}for(;l>d&&n.global_gain<255;)n.global_gain++,l=x.count_bits(e,h,n,null);return e.CurrentStep[C]=p-n.global_gain>=4?4:2,e.OldValue[C]=n.global_gain,n.part2_3_length=l,l}function y(e){for(var n=0;n<e.sfbmax;n++)if(e.scalefac[n]+e.subblock_gain[e.window[n]]==0)return!1;return!0}function X(e,n,d,C,h){var l;switch(e){default:case 9:{n.over_count>0?(l=d.over_SSD<=n.over_SSD,d.over_SSD==n.over_SSD&&(l=d.bits<n.bits)):l=d.max_noise<0&&d.max_noise*10+d.bits<=n.max_noise*10+n.bits;break}case 0:l=d.over_count<n.over_count||d.over_count==n.over_count&&d.over_noise<n.over_noise||d.over_count==n.over_count&&q0.EQ(d.over_noise,n.over_noise)&&d.tot_noise<n.tot_noise;break;case 8:Y();case 1:l=d.max_noise<n.max_noise;break;case 2:l=d.tot_noise<n.tot_noise;break;case 3:l=d.tot_noise<n.tot_noise&&d.max_noise<n.max_noise;break;case 4:l=d.max_noise<=0&&n.max_noise>.2||d.max_noise<=0&&n.max_noise<0&&n.max_noise>d.max_noise-.2&&d.tot_noise<n.tot_noise||d.max_noise<=0&&n.max_noise>0&&n.max_noise>d.max_noise-.2&&d.tot_noise<n.tot_noise+n.over_noise||d.max_noise>0&&n.max_noise>-.05&&n.max_noise>d.max_noise-.1&&d.tot_noise+d.over_noise<n.tot_noise+n.over_noise||d.max_noise>0&&n.max_noise>-.1&&n.max_noise>d.max_noise-.15&&d.tot_noise+d.over_noise+d.over_noise<n.tot_noise+n.over_noise+n.over_noise;break;case 5:l=d.over_noise<n.over_noise||q0.EQ(d.over_noise,n.over_noise)&&d.tot_noise<n.tot_noise;break;case 6:l=d.over_noise<n.over_noise||q0.EQ(d.over_noise,n.over_noise)&&(d.max_noise<n.max_noise||q0.EQ(d.max_noise,n.max_noise)&&d.tot_noise<=n.tot_noise);break;case 7:l=d.over_count<n.over_count||d.over_noise<n.over_noise;break}return n.over_count==0&&(l=l&&d.bits<n.bits),l}function T(e,n,d,C,h){var l=e.internal_flags,c;n.scalefac_scale==0?c=1.2968395546510096:c=1.6817928305074292;for(var i=0,p=0;p<n.sfbmax;p++)i<d[p]&&(i=d[p]);var r=l.noise_shaping_amp;switch(r==3&&Y(),r){case 2:break;case 1:i>1?i=Math.pow(i,.5):i*=.95;break;case 0:default:i>1?i=1:i*=.95;break}for(var g=0,p=0;p<n.sfbmax;p++){var s=n.width[p],o;if(g+=s,!(d[p]<i)){for(l.substep_shaping&2&&Y(),n.scalefac[p]++,o=-s;o<0;o++)C[g+o]*=c,C[g+o]>n.xrpow_max&&(n.xrpow_max=C[g+o]);if(l.noise_shaping_amp==2)return}}}function K(e,n){for(var d=1.2968395546510096,C=0,h=0;h<e.sfbmax;h++){var l=e.width[h],c=e.scalefac[h];if(e.preflag!=0&&(c+=I.pretab[h]),C+=l,c&1){c++;for(var i=-l;i<0;i++)n[C+i]*=d,n[C+i]>e.xrpow_max&&(e.xrpow_max=n[C+i])}e.scalefac[h]=c>>1}e.preflag=0,e.scalefac_scale=1}function w(e,n,d){var C,h=n.scalefac;for(C=0;C<n.sfb_lmax;C++)if(h[C]>=16)return!0;for(var l=0;l<3;l++){var c=0,i=0;for(C=n.sfb_lmax+l;C<n.sfbdivide;C+=3)c<h[C]&&(c=h[C]);for(;C<n.sfbmax;C+=3)i<h[C]&&(i=h[C]);if(!(c<16&&i<8)){if(n.subblock_gain[l]>=7)return!0;n.subblock_gain[l]++;var p=e.scalefac_band.l[n.sfb_lmax];for(C=n.sfb_lmax+l;C<n.sfbmax;C+=3){var r,g=n.width[C],s=h[C];if(s=s-(4>>n.scalefac_scale),s>=0){h[C]=s,p+=g*3;continue}h[C]=0;{var o=210+(s<<n.scalefac_scale+1);r=I.IPOW20(o)}p+=g*(l+1);for(var v=-g;v<0;v++)d[p+v]*=r,d[p+v]>n.xrpow_max&&(n.xrpow_max=d[p+v]);p+=g*(3-l-1)}{var r=I.IPOW20(202);p+=n.width[C]*(l+1);for(var v=-n.width[C];v<0;v++)d[p+v]*=r,d[p+v]>n.xrpow_max&&(n.xrpow_max=d[p+v])}}}return!1}function E(e,n,d,C,h){var l=e.internal_flags;T(e,n,d,C);var c=y(n);return c?!1:(l.mode_gr==2?c=x.scale_bitcount(n):c=x.scale_bitcount_lsf(l,n),c?(l.noise_shaping>1&&(g0.fill(l.pseudohalf,0),n.scalefac_scale==0?(K(n,C),c=!1):n.block_type==_.SHORT_TYPE&&l.subblock_gain>0&&(c=w(l,n,C)||y(n))),c||(l.mode_gr==2?c=x.scale_bitcount(n):c=x.scale_bitcount_lsf(l,n)),!c):!0)}this.outer_loop=function(e,n,d,C,h,l){var c=e.internal_flags,i=new S,p=P(576),r=P(k.SFBMAX),g=new me,s,o=new M,v=9999999,m=!1,A=!1,a=0;if(j(c,n,l,h,C),c.noise_shaping==0)return 100;I.calc_noise(n,d,r,g,o),g.bits=n.part2_3_length,i.assign(n);var t=0;for(q.arraycopy(C,0,p,0,576);!m;){do{var N=new me,B,O=255;if(c.substep_shaping&2?B=20:B=3,c.sfb21_extra&&Y(),!E(e,i,r,C))break;i.scalefac_scale!=0&&(O=254);var Q=l-i.part2_length;if(Q<=0)break;for(;(i.part2_3_length=x.count_bits(c,C,i,o))>Q&&i.global_gain<=O;)i.global_gain++;if(i.global_gain>O)break;if(g.over_count==0){for(;(i.part2_3_length=x.count_bits(c,C,i,o))>v&&i.global_gain<=O;)i.global_gain++;if(i.global_gain>O)break}if(I.calc_noise(i,d,r,N,o),N.bits=i.part2_3_length,n.block_type!=_.SHORT_TYPE?s=e.quant_comp:s=e.quant_comp_short,s=X(s,g,N)?1:0,s!=0)v=n.part2_3_length,g=N,n.assign(i),t=0,q.arraycopy(C,0,p,0,576);else if(c.full_outer_loop==0&&(++t>B&&g.over_count==0||c.noise_shaping_amp==3&&A&&t>30||c.noise_shaping_amp==3&&A&&i.global_gain-a>15))break}while(i.global_gain+i.scalefac_scale<255);c.noise_shaping_amp==3?Y():m=!0}return e.VBR==U.vbr_rh||e.VBR==U.vbr_mtrh?q.arraycopy(p,0,C,0,576):c.substep_shaping&1&&Y(),g.over_count},this.iteration_finish_one=function(e,n,d){var C=e.l3_side,h=C.tt[n][d];x.best_scalefac_store(e,n,d,C),e.use_best_huffman==1&&x.best_huffman_divide(e,h),u.ResvAdjust(e,h)}}function c0(){var u=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*e0.SQRT2*.5/2384e-9,.017876148*e0.SQRT2*.5/2384e-9,.003134727*e0.SQRT2*.5/2384e-9,.002457142*e0.SQRT2*.5/2384e-9,971317e-9*e0.SQRT2*.5/2384e-9,218868e-9*e0.SQRT2*.5/2384e-9,101566e-9*e0.SQRT2*.5/2384e-9,13828e-9*e0.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],I=12,F=36,x=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],W=x[_.SHORT_TYPE],f=x[_.SHORT_TYPE],L=x[_.SHORT_TYPE],j=x[_.SHORT_TYPE],y=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function X(w,E,e){for(var n=10,d=E+238-14-286,C=-15;C<0;C++){var h,l,c;h=u[n+-10],l=w[d+-224]*h,c=w[E+224]*h,h=u[n+-9],l+=w[d+-160]*h,c+=w[E+160]*h,h=u[n+-8],l+=w[d+-96]*h,c+=w[E+96]*h,h=u[n+-7],l+=w[d+-32]*h,c+=w[E+32]*h,h=u[n+-6],l+=w[d+32]*h,c+=w[E+-32]*h,h=u[n+-5],l+=w[d+96]*h,c+=w[E+-96]*h,h=u[n+-4],l+=w[d+160]*h,c+=w[E+-160]*h,h=u[n+-3],l+=w[d+224]*h,c+=w[E+-224]*h,h=u[n+-2],l+=w[E+-256]*h,c-=w[d+256]*h,h=u[n+-1],l+=w[E+-192]*h,c-=w[d+192]*h,h=u[n+0],l+=w[E+-128]*h,c-=w[d+128]*h,h=u[n+1],l+=w[E+-64]*h,c-=w[d+64]*h,h=u[n+2],l+=w[E+0]*h,c-=w[d+0]*h,h=u[n+3],l+=w[E+64]*h,c-=w[d+-64]*h,h=u[n+4],l+=w[E+128]*h,c-=w[d+-128]*h,h=u[n+5],l+=w[E+192]*h,c-=w[d+-192]*h,l*=u[n+6],h=c-l,e[30+C*2]=c+l,e[31+C*2]=u[n+7]*h,n+=18,E--,d++}{var l,c,i,p;c=w[E+-16]*u[n+-10],l=w[E+-32]*u[n+-2],c+=(w[E+-48]-w[E+16])*u[n+-9],l+=w[E+-96]*u[n+-1],c+=(w[E+-80]+w[E+48])*u[n+-8],l+=w[E+-160]*u[n+0],c+=(w[E+-112]-w[E+80])*u[n+-7],l+=w[E+-224]*u[n+1],c+=(w[E+-144]+w[E+112])*u[n+-6],l-=w[E+32]*u[n+2],c+=(w[E+-176]-w[E+144])*u[n+-5],l-=w[E+96]*u[n+3],c+=(w[E+-208]+w[E+176])*u[n+-4],l-=w[E+160]*u[n+4],c+=(w[E+-240]-w[E+208])*u[n+-3],l-=w[E+224],i=l-c,p=l+c,c=e[14],l=e[15]-c,e[31]=p+c,e[30]=i+l,e[15]=i-l,e[14]=p-c}{var r;r=e[28]-e[0],e[0]+=e[28],e[28]=r*u[n+-2*18+7],r=e[29]-e[1],e[1]+=e[29],e[29]=r*u[n+-2*18+7],r=e[26]-e[2],e[2]+=e[26],e[26]=r*u[n+-4*18+7],r=e[27]-e[3],e[3]+=e[27],e[27]=r*u[n+-4*18+7],r=e[24]-e[4],e[4]+=e[24],e[24]=r*u[n+-6*18+7],r=e[25]-e[5],e[5]+=e[25],e[25]=r*u[n+-6*18+7],r=e[22]-e[6],e[6]+=e[22],e[22]=r*e0.SQRT2,r=e[23]-e[7],e[7]+=e[23],e[23]=r*e0.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],r=e[6],e[6]=e[31]-r,e[31]=e[31]+r,r=e[7],e[7]=e[30]-r,e[30]=e[30]+r,r=e[22],e[22]=e[15]-r,e[15]=e[15]+r,r=e[23],e[23]=e[14]-r,e[14]=e[14]+r,r=e[20]-e[8],e[8]+=e[20],e[20]=r*u[n+-10*18+7],r=e[21]-e[9],e[9]+=e[21],e[21]=r*u[n+-10*18+7],r=e[18]-e[10],e[10]+=e[18],e[18]=r*u[n+-12*18+7],r=e[19]-e[11],e[11]+=e[19],e[19]=r*u[n+-12*18+7],r=e[16]-e[12],e[12]+=e[16],e[16]=r*u[n+-14*18+7],r=e[17]-e[13],e[13]+=e[17],e[17]=r*u[n+-14*18+7],r=-e[20]+e[24],e[20]+=e[24],e[24]=r*u[n+-12*18+7],r=-e[21]+e[25],e[21]+=e[25],e[25]=r*u[n+-12*18+7],r=e[4]-e[8],e[4]+=e[8],e[8]=r*u[n+-12*18+7],r=e[5]-e[9],e[5]+=e[9],e[9]=r*u[n+-12*18+7],r=e[0]-e[12],e[0]+=e[12],e[12]=r*u[n+-4*18+7],r=e[1]-e[13],e[1]+=e[13],e[13]=r*u[n+-4*18+7],r=e[16]-e[28],e[16]+=e[28],e[28]=r*u[n+-4*18+7],r=-e[17]+e[29],e[17]+=e[29],e[29]=r*u[n+-4*18+7],r=e0.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=r,r=e0.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=r,r=e0.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=r-e[18],r=e0.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=r-e[19],r=e[2],e[19]-=e[3],e[3]-=r,e[2]=e[31]-r,e[31]+=r,r=e[3],e[11]-=e[19],e[18]-=r,e[3]=e[30]-r,e[30]+=r,r=e[18],e[27]-=e[11],e[19]-=r,e[18]=e[15]-r,e[15]+=r,r=e[19],e[10]-=r,e[19]=e[14]-r,e[14]+=r,r=e[10],e[11]-=r,e[10]=e[23]-r,e[23]+=r,r=e[11],e[26]-=r,e[11]=e[22]-r,e[22]+=r,r=e[26],e[27]-=r,e[26]=e[7]-r,e[7]+=r,r=e[27],e[27]=e[6]-r,e[6]+=r,r=e0.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=r,r=e0.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=r,r=e0.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=r,r=e0.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=r,r=-e0.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=r-e[8],r=-e0.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=r-e[9],r=-e0.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=r-e[25],r=-e0.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=r-e[24],r=e[24]-e[16],e[24]=r,r=e[20]-r,e[20]=r,r=e[28]-r,e[28]=r,r=e[25]-e[17],e[25]=r,r=e[21]-r,e[21]=r,r=e[29]-r,e[29]=r,r=e[17]-e[1],e[17]=r,r=e[9]-r,e[9]=r,r=e[25]-r,e[25]=r,r=e[5]-r,e[5]=r,r=e[21]-r,e[21]=r,r=e[13]-r,e[13]=r,r=e[29]-r,e[29]=r,r=e[1]-e[0],e[1]=r,r=e[16]-r,e[16]=r,r=e[17]-r,e[17]=r,r=e[8]-r,e[8]=r,r=e[9]-r,e[9]=r,r=e[24]-r,e[24]=r,r=e[25]-r,e[25]=r,r=e[4]-r,e[4]=r,r=e[5]-r,e[5]=r,r=e[20]-r,e[20]=r,r=e[21]-r,e[21]=r,r=e[12]-r,e[12]=r,r=e[13]-r,e[13]=r,r=e[28]-r,e[28]=r,r=e[29]-r,e[29]=r,r=e[0],e[0]+=e[31],e[31]-=r,r=e[1],e[1]+=e[30],e[30]-=r,r=e[16],e[16]+=e[15],e[15]-=r,r=e[17],e[17]+=e[14],e[14]-=r,r=e[8],e[8]+=e[23],e[23]-=r,r=e[9],e[9]+=e[22],e[22]-=r,r=e[24],e[24]+=e[7],e[7]-=r,r=e[25],e[25]+=e[6],e[6]-=r,r=e[4],e[4]+=e[27],e[27]-=r,r=e[5],e[5]+=e[26],e[26]-=r,r=e[20],e[20]+=e[11],e[11]-=r,r=e[21],e[21]+=e[10],e[10]-=r,r=e[12],e[12]+=e[19],e[19]-=r,r=e[13],e[13]+=e[18],e[18]-=r,r=e[28],e[28]+=e[3],e[3]-=r,r=e[29],e[29]+=e[2],e[2]-=r}}function T(w,E){for(var e=0;e<3;e++){var n,d,C,h,l,c;h=w[E+2*3]*x[_.SHORT_TYPE][0]-w[E+5*3],n=w[E+0*3]*x[_.SHORT_TYPE][2]-w[E+3*3],d=h+n,C=h-n,h=w[E+5*3]*x[_.SHORT_TYPE][0]+w[E+2*3],n=w[E+3*3]*x[_.SHORT_TYPE][2]+w[E+0*3],l=h+n,c=-h+n,n=(w[E+1*3]*x[_.SHORT_TYPE][1]-w[E+4*3])*2069978111953089e-26,h=(w[E+4*3]*x[_.SHORT_TYPE][1]+w[E+1*3])*2069978111953089e-26,w[E+3*0]=d*190752519173728e-25+n,w[E+3*5]=-l*190752519173728e-25+h,C=C*.8660254037844387*1907525191737281e-26,l=l*.5*1907525191737281e-26+h,w[E+3*1]=C-l,w[E+3*2]=C+l,d=d*.5*1907525191737281e-26-n,c=c*.8660254037844387*1907525191737281e-26,w[E+3*3]=d+c,w[E+3*4]=d-c,E++}}function K(w,E,e){var n,d;{var C,h,l,c,i,p,r,g;C=e[17]-e[9],l=e[15]-e[11],c=e[14]-e[12],i=e[0]+e[8],p=e[1]+e[7],r=e[2]+e[6],g=e[3]+e[5],w[E+17]=i+r-g-(p-e[4]),d=(i+r-g)*f[19]+(p-e[4]),n=(C-l-c)*f[18],w[E+5]=n+d,w[E+6]=n-d,h=(e[16]-e[10])*f[18],p=p*f[19]+e[4],n=C*f[12]+h+l*f[13]+c*f[14],d=-i*f[16]+p-r*f[17]+g*f[15],w[E+1]=n+d,w[E+2]=n-d,n=C*f[13]-h-l*f[14]+c*f[12],d=-i*f[17]+p-r*f[15]+g*f[16],w[E+9]=n+d,w[E+10]=n-d,n=C*f[14]-h+l*f[12]-c*f[13],d=i*f[15]-p+r*f[16]-g*f[17],w[E+13]=n+d,w[E+14]=n-d}{var s,o,v,m,A,a,t,N;s=e[8]-e[0],v=e[6]-e[2],m=e[5]-e[3],A=e[17]+e[9],a=e[16]+e[10],t=e[15]+e[11],N=e[14]+e[12],w[E+0]=A+t+N+(a+e[13]),n=(A+t+N)*f[19]-(a+e[13]),d=(s-v+m)*f[18],w[E+11]=n+d,w[E+12]=n-d,o=(e[7]-e[1])*f[18],a=e[13]-a*f[19],n=A*f[15]-a+t*f[16]+N*f[17],d=s*f[14]+o+v*f[12]+m*f[13],w[E+3]=n+d,w[E+4]=n-d,n=-A*f[17]+a-t*f[15]-N*f[16],d=s*f[13]+o-v*f[14]-m*f[12],w[E+7]=n+d,w[E+8]=n-d,n=-A*f[16]+a-t*f[17]-N*f[15],d=s*f[12]-o+v*f[13]-m*f[14],w[E+15]=n+d,w[E+16]=n-d}}this.mdct_sub48=function(w,E,e){for(var n=E,d=286,C=0;C<w.channels_out;C++){for(var h=0;h<w.mode_gr;h++){for(var l,c=w.l3_side.tt[h][C],i=c.xr,p=0,r=w.sb_sample[C][1-h],g=0,s=0;s<18/2;s++)for(X(n,d,r[g]),X(n,d+32,r[g+1]),g+=2,d+=64,l=1;l<32;l+=2)r[g-1][l]*=-1;for(l=0;l<32;l++,p+=18){var o=c.block_type,v=w.sb_sample[C][h],m=w.sb_sample[C][1-h];if(c.mixed_block_flag!=0&&l<2&&(o=0),w.amp_filter[l]<1e-12)g0.fill(i,p+0,p+18,0);else if(w.amp_filter[l]<1&&Y(),o==_.SHORT_TYPE){for(var s=-I/4;s<0;s++){var A=x[_.SHORT_TYPE][s+3];i[p+s*3+9]=v[9+s][y[l]]*A-v[8-s][y[l]],i[p+s*3+18]=v[14-s][y[l]]*A+v[15+s][y[l]],i[p+s*3+10]=v[15+s][y[l]]*A-v[14-s][y[l]],i[p+s*3+19]=m[2-s][y[l]]*A+m[3+s][y[l]],i[p+s*3+11]=m[3+s][y[l]]*A-m[2-s][y[l]],i[p+s*3+20]=m[8-s][y[l]]*A+m[9+s][y[l]]}T(i,p)}else{for(var a=P(18),s=-F/4;s<0;s++){var t,N;t=x[o][s+27]*m[s+9][y[l]]+x[o][s+36]*m[8-s][y[l]],N=x[o][s+9]*v[s+9][y[l]]-x[o][s+18]*v[8-s][y[l]],a[s+9]=t-N*W[3+s+9],a[s+18]=t*W[3+s+9]+N}K(i,p,a)}if(o!=_.SHORT_TYPE&&l!=0)for(var s=7;s>=0;--s){var B,O;B=i[p+s]*L[20+s]+i[p+-1-s]*j[28+s],O=i[p+s]*j[28+s]-i[p+-1-s]*L[20+s],i[p+-1-s]=B,i[p+s]=O}}}if(n=e,d=286,w.mode_gr==1)for(var Q=0;Q<18;Q++)q.arraycopy(w.sb_sample[C][1][Q],0,w.sb_sample[C][0][Q],0,32)}}}function t0(){this.thm=new K0,this.en=new K0}_.ENCDELAY=576,_.POSTDELAY=1152,_.MDCTDELAY=48,_.FFTOFFSET=224+_.MDCTDELAY,_.DECDELAY=528,_.SBLIMIT=32,_.CBANDS=64,_.SBPSY_l=21,_.SBPSY_s=12,_.SBMAX_l=22,_.SBMAX_s=13,_.PSFB21=6,_.PSFB12=6,_.BLKSIZE=1024,_.HBLKSIZE=_.BLKSIZE/2+1,_.BLKSIZE_s=256,_.HBLKSIZE_s=_.BLKSIZE_s/2+1,_.NORM_TYPE=0,_.START_TYPE=1,_.SHORT_TYPE=2,_.STOP_TYPE=3,_.MPG_MD_LR_LR=0,_.MPG_MD_LR_I=1,_.MPG_MD_MS_LR=2,_.MPG_MD_MS_I=3,_.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function _(){var u=_.MPG_MD_MS_LR,I=null;this.psy=null;var F=null,x=null;this.setModules=function(y,X,T,K){I=y,this.psy=X,F=X,x=K};var W=new c0;function f(y){var X,T;if(y.ATH.useAdjust==0){y.ATH.adjust=1;return}if(T=y.loudness_sq[0][0],X=y.loudness_sq[1][0],y.channels_out==2?Y():(T+=T,X+=X),y.mode_gr==2&&(T=Math.max(T,X)),T*=.5,T*=y.ATH.aaSensitivityP,T>.03125)y.ATH.adjust>=1?y.ATH.adjust=1:y.ATH.adjust<y.ATH.adjustLimit&&(y.ATH.adjust=y.ATH.adjustLimit),y.ATH.adjustLimit=1;else{var K=31.98*T+625e-6;y.ATH.adjust>=K?(y.ATH.adjust*=K*.075+.925,y.ATH.adjust<K&&(y.ATH.adjust=K)):y.ATH.adjustLimit>=K?y.ATH.adjust=K:y.ATH.adjust<y.ATH.adjustLimit&&(y.ATH.adjust=y.ATH.adjustLimit),y.ATH.adjustLimit=K}}function L(y){var X,T;for(y.bitrate_stereoMode_Hist[y.bitrate_index][4]++,y.bitrate_stereoMode_Hist[15][4]++,y.channels_out==2&&Y(),X=0;X<y.mode_gr;++X)for(T=0;T<y.channels_out;++T){var K=y.l3_side.tt[X][T].block_type|0;y.l3_side.tt[X][T].mixed_block_flag!=0&&(K=4),y.bitrate_blockType_Hist[y.bitrate_index][K]++,y.bitrate_blockType_Hist[y.bitrate_index][5]++,y.bitrate_blockType_Hist[15][K]++,y.bitrate_blockType_Hist[15][5]++}}function j(y,X){var T=y.internal_flags,K,w;if(T.lame_encode_frame_init==0){var E,e,n=P(2014),d=P(2014);for(T.lame_encode_frame_init=1,E=0,e=0;E<286+576*(1+T.mode_gr);++E)E<576*T.mode_gr?(n[E]=0,T.channels_out==2&&(d[E]=0)):(n[E]=X[0][e],T.channels_out==2&&(d[E]=X[1][e]),++e);for(w=0;w<T.mode_gr;w++)for(K=0;K<T.channels_out;K++)T.l3_side.tt[w][K].block_type=_.SHORT_TYPE;W.mdct_sub48(T,n,d)}}this.lame_encode_mp3_frame=function(y,X,T,K,w,E){var e,n=O0([2,2]);n[0][0]=new t0,n[0][1]=new t0,n[1][0]=new t0,n[1][1]=new t0;var d=O0([2,2]);d[0][0]=new t0,d[0][1]=new t0,d[1][0]=new t0,d[1][1]=new t0;var C,h=[null,null],l=y.internal_flags,c=b0([2,4]),i=[.5,.5],p=[[0,0],[0,0]],r=[[0,0],[0,0]],g,s,o;if(h[0]=X,h[1]=T,l.lame_encode_frame_init==0&&j(y,h),l.padding=0,(l.slot_lag-=l.frac_SpF)<0&&(l.slot_lag+=y.out_samplerate,l.padding=1),l.psymodel!=0){var v,m=[null,null],A=0,a=h0(2);for(o=0;o<l.mode_gr;o++){for(s=0;s<l.channels_out;s++)m[s]=h[s],A=576+o*576-_.FFTOFFSET;if(y.VBR==U.vbr_mtrh||y.VBR==U.vbr_mt?Y():v=F.L3psycho_anal_ns(y,m,A,o,n,d,p[o],r[o],c[o],a),v!=0)return-4;for(y.mode==x0.JOINT_STEREO&&Y(),s=0;s<l.channels_out;s++){var t=l.l3_side.tt[o][s];t.block_type=a[s],t.mixed_block_flag=0}}}else Y();if(f(l),W.mdct_sub48(l,h[0],h[1]),l.mode_ext=_.MPG_MD_LR_LR,y.force_ms?l.mode_ext=_.MPG_MD_MS_LR:y.mode==x0.JOINT_STEREO&&Y(),l.mode_ext==u?(C=d,g=r):(C=n,g=p),y.analysis&&l.pinfo!=null&&Y(),y.VBR==U.vbr_off||y.VBR==U.vbr_abr){var N,B;for(N=0;N<18;N++)l.nsPsy.pefirbuf[N]=l.nsPsy.pefirbuf[N+1];for(B=0,o=0;o<l.mode_gr;o++)for(s=0;s<l.channels_out;s++)B+=g[o][s];for(l.nsPsy.pefirbuf[18]=B,B=l.nsPsy.pefirbuf[9],N=0;N<9;N++)B+=(l.nsPsy.pefirbuf[N]+l.nsPsy.pefirbuf[18-N])*_.fircoef[N];for(B=670*5*l.mode_gr*l.channels_out/B,o=0;o<l.mode_gr;o++)for(s=0;s<l.channels_out;s++)g[o][s]*=B}return l.iteration_loop.iteration_loop(y,g,i,C),I.format_bitstream(y),e=I.copy_buffer(l,K,w,E,1),y.bWriteVbrTag&&x.addVbrFrame(y),y.analysis&&l.pinfo!=null&&Y(),L(l),e}}function l0(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function D0(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[h0(4),h0(4)];for(var u=0;u<2;u++)for(var I=0;I<2;I++)this.tt[u][I]=new S}function K0(){this.l=P(_.SBMAX_l),this.s=b0([_.SBMAX_s,3]);var u=this;this.assign=function(I){q.arraycopy(I.l,0,u.l,0,_.SBMAX_l);for(var F=0;F<_.SBMAX_s;F++)for(var x=0;x<3;x++)u.s[F][x]=I.s[F][x]}}function ce(){this.last_en_subshort=b0([4,9]),this.lastAttacks=h0(4),this.pefirbuf=P(19),this.longfact=P(_.SBMAX_l),this.shortfact=P(_.SBMAX_s),this.attackthre=0,this.attackthre_s=0}E0.MFSIZE=3*1152+_.ENCDELAY-_.MDCTDELAY,E0.MAX_HEADER_BUF=256,E0.MAX_BITS_PER_CHANNEL=4095,E0.MAX_BITS_PER_GRANULE=7680,E0.BPC=320;function E0(){var u=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=b0([2,E0.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new D0,this.ms_ratio=P(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=h0(2),this.CurrentStep=h0(2),this.masking_lower=0,this.bv_scf=h0(576),this.pseudohalf=h0(k.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*E0.BPC+1),this.itime=d0(2),this.sideinfo_len=0,this.sb_sample=b0([2,2,18,_.SBLIMIT]),this.amp_filter=P(32);function I(){this.write_timing=0,this.ptr=0,this.buf=y0(u)}this.header=new Array(E0.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new _e,this.minval_l=P(_.CBANDS),this.minval_s=P(_.CBANDS),this.nb_1=b0([4,_.CBANDS]),this.nb_2=b0([4,_.CBANDS]),this.nb_s1=b0([4,_.CBANDS]),this.nb_s2=b0([4,_.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=P(4),this.loudness_sq=b0([2,2]),this.loudness_sq_save=P(2),this.mld_l=P(_.SBMAX_l),this.mld_s=P(_.SBMAX_s),this.bm_l=h0(_.SBMAX_l),this.bo_l=h0(_.SBMAX_l),this.bm_s=h0(_.SBMAX_s),this.bo_s=h0(_.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=R0([_.CBANDS,2]),this.s3ind_s=R0([_.CBANDS,2]),this.numlines_s=h0(_.CBANDS),this.numlines_l=h0(_.CBANDS),this.rnumlines_l=P(_.CBANDS),this.mld_cb_l=P(_.CBANDS),this.mld_cb_s=P(_.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=P(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=h0(2),this.nsPsy=new ce,this.VBR_seek_table=new l0,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=R0([16,5]),this.bitrate_blockType_Hist=R0([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var F=0;F<this.en.length;F++)this.en[F]=new K0;for(var F=0;F<this.thm.length;F++)this.thm[F]=new K0;for(var F=0;F<this.header.length;F++)this.header[F]=new I}function J0(){var u=P(_.BLKSIZE),I=P(_.BLKSIZE_s/2),F=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function x(f,L,j){var y=0,X,T,K;j<<=1;var w=L+j;X=4;do{var E,e,n,d,C,h,l;l=X>>1,d=X,C=X<<1,h=C+d,X=C<<1,T=L,K=T+l;do{var c,i,p,r;i=f[T+0]-f[T+d],c=f[T+0]+f[T+d],r=f[T+C]-f[T+h],p=f[T+C]+f[T+h],f[T+C]=c-p,f[T+0]=c+p,f[T+h]=i-r,f[T+d]=i+r,i=f[K+0]-f[K+d],c=f[K+0]+f[K+d],r=e0.SQRT2*f[K+h],p=e0.SQRT2*f[K+C],f[K+C]=c-p,f[K+0]=c+p,f[K+h]=i-r,f[K+d]=i+r,K+=X,T+=X}while(T<w);for(e=F[y+0],E=F[y+1],n=1;n<l;n++){var g,s;g=1-2*E*E,s=2*E*e,T=L+n,K=L+d-n;do{var o,v,m,c,i,A,p,a,r,t;v=s*f[T+d]-g*f[K+d],o=g*f[T+d]+s*f[K+d],i=f[T+0]-o,c=f[T+0]+o,A=f[K+0]-v,m=f[K+0]+v,v=s*f[T+h]-g*f[K+h],o=g*f[T+h]+s*f[K+h],r=f[T+C]-o,p=f[T+C]+o,t=f[K+C]-v,a=f[K+C]+v,v=E*p-e*t,o=e*p+E*t,f[T+C]=c-o,f[T+0]=c+o,f[K+h]=A-v,f[K+d]=A+v,v=e*a-E*r,o=E*a+e*r,f[K+C]=m-o,f[K+0]=m+o,f[T+h]=i-v,f[T+d]=i+v,K+=X,T+=X}while(T<w);g=e,e=g*F[y+0]-E*F[y+1],E=g*F[y+1]+E*F[y+0]}y+=2}while(X<j)}var W=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(f,L,j,y,X){for(var T=0;T<3;T++){var K=_.BLKSIZE_s/2,w=65535&576/3*(T+1),E=_.BLKSIZE_s/8-1;do{var e,n,d,C,h,l=W[E<<2]&255;e=I[l]*y[j][X+l+w],h=I[127-l]*y[j][X+l+w+128],n=e-h,e=e+h,d=I[l+64]*y[j][X+l+w+64],h=I[63-l]*y[j][X+l+w+192],C=d-h,d=d+h,K-=4,L[T][K+0]=e+d,L[T][K+2]=e-d,L[T][K+1]=n+C,L[T][K+3]=n-C,e=I[l+1]*y[j][X+l+w+1],h=I[126-l]*y[j][X+l+w+129],n=e-h,e=e+h,d=I[l+65]*y[j][X+l+w+65],h=I[62-l]*y[j][X+l+w+193],C=d-h,d=d+h,L[T][K+_.BLKSIZE_s/2+0]=e+d,L[T][K+_.BLKSIZE_s/2+2]=e-d,L[T][K+_.BLKSIZE_s/2+1]=n+C,L[T][K+_.BLKSIZE_s/2+3]=n-C}while(--E>=0);x(L[T],K,_.BLKSIZE_s/2)}},this.fft_long=function(f,L,j,y,X){var T=_.BLKSIZE/8-1,K=_.BLKSIZE/2;do{var w,E,e,n,d,C=W[T]&255;w=u[C]*y[j][X+C],d=u[C+512]*y[j][X+C+512],E=w-d,w=w+d,e=u[C+256]*y[j][X+C+256],d=u[C+768]*y[j][X+C+768],n=e-d,e=e+d,K-=4,L[K+0]=w+e,L[K+2]=w-e,L[K+1]=E+n,L[K+3]=E-n,w=u[C+1]*y[j][X+C+1],d=u[C+513]*y[j][X+C+513],E=w-d,w=w+d,e=u[C+257]*y[j][X+C+257],d=u[C+769]*y[j][X+C+769],n=e-d,e=e+d,L[K+_.BLKSIZE/2+0]=w+e,L[K+_.BLKSIZE/2+2]=w-e,L[K+_.BLKSIZE/2+1]=E+n,L[K+_.BLKSIZE/2+3]=E-n}while(--T>=0);x(L,K,_.BLKSIZE/2)},this.init_fft=function(f){for(var L=0;L<_.BLKSIZE;L++)u[L]=.42-.5*Math.cos(2*Math.PI*(L+.5)/_.BLKSIZE)+.08*Math.cos(4*Math.PI*(L+.5)/_.BLKSIZE);for(var L=0;L<_.BLKSIZE_s/2;L++)I[L]=.5*(1-Math.cos(2*Math.PI*(L+.5)/_.BLKSIZE_s))}}function X0(){var u=new J0,I=2.302585092994046,F=2,x=16,W=2,f=16,L=.34,j=1/(14752*14752)/(_.BLKSIZE/2),y=.01,X=.8,T=.6,K=.3,w=3.5,E=21,e=.2302585093;function n(V,R){for(var D=0,u0=0;u0<_.BLKSIZE/2;++u0)D+=V[u0]*R.ATH.eql_w[u0];return D*=j,D}function d(V,R,D,u0,r0,Z,n0,i0,v0,F0,f0){var oe=V.internal_flags;v0<2?(u.fft_long(oe,u0[r0],v0,F0,f0),u.fft_short(oe,Z[n0],v0,F0,f0)):v0==2&&Y(),R[0]=u0[r0+0][0],R[0]*=R[0];for(var Z0=_.BLKSIZE/2-1;Z0>=0;--Z0){var ie=u0[r0+0][_.BLKSIZE/2-Z0],he=u0[r0+0][_.BLKSIZE/2+Z0];R[_.BLKSIZE/2-Z0]=(ie*ie+he*he)*.5}for(var $0=2;$0>=0;--$0){D[$0][0]=Z[n0+0][$0][0],D[$0][0]*=D[$0][0];for(var Z0=_.BLKSIZE_s/2-1;Z0>=0;--Z0){var ie=Z[n0+0][$0][_.BLKSIZE_s/2-Z0],he=Z[n0+0][$0][_.BLKSIZE_s/2+Z0];D[$0][_.BLKSIZE_s/2-Z0]=(ie*ie+he*he)*.5}}{for(var H0=0,Z0=11;Z0<_.HBLKSIZE;Z0++)H0+=R[Z0];oe.tot_ener[v0]=H0}V.analysis&&Y(),V.athaa_loudapprox==2&&v0<2&&(oe.loudness_sq[i0][v0]=oe.loudness_sq_save[v0],oe.loudness_sq_save[v0]=n(R,oe))}var C=8,h=23,l=15,c,i,p,r=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function g(){c=Math.pow(10,(C+1)/16),i=Math.pow(10,(h+1)/16),p=Math.pow(10,l/10)}var s=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],o=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],v=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function m(V,R,D,u0,r0,Z){var n0;if(R>V)if(R<V*i)n0=R/V;else return V+R;else{if(V>=R*i)return V+R;n0=V/R}if(V+=R,u0+3<=6){if(n0>=c)return V;var i0=0|e0.FAST_LOG10_X(n0,16);return V*o[i0]}var i0=0|e0.FAST_LOG10_X(n0,16);if(Z!=0?R=r0.ATH.cb_s[D]*r0.ATH.adjust:R=r0.ATH.cb_l[D]*r0.ATH.adjust,V<p*R){if(V>R){var v0,F0;return v0=1,i0<=13&&(v0=v[i0]),F0=e0.FAST_LOG10_X(V/R,10/15),V*((s[i0]-v0)*F0+v0)}return i0>13?V:V*v[i0]}return V*s[i0]}function A(V,R,D,u0,r0){var Z,n0,i0=0,v0=0;for(Z=n0=0;Z<_.SBMAX_s;++n0,++Z){for(var F0=V.bo_s[Z],f0=V.npart_s,oe=F0<f0?F0:f0;n0<oe;)i0+=R[n0],v0+=D[n0],n0++;if(V.en[u0].s[Z][r0]=i0,V.thm[u0].s[Z][r0]=v0,n0>=f0){++Z;break}{var Z0=V.PSY.bo_s_weight[Z],ie=1-Z0;i0=Z0*R[n0],v0=Z0*D[n0],V.en[u0].s[Z][r0]+=i0,V.thm[u0].s[Z][r0]+=v0,i0=ie*R[n0],v0=ie*D[n0]}}for(;Z<_.SBMAX_s;++Z)V.en[u0].s[Z][r0]=0,V.thm[u0].s[Z][r0]=0}function a(V,R,D,u0){var r0,Z,n0=0,i0=0;for(r0=Z=0;r0<_.SBMAX_l;++Z,++r0){for(var v0=V.bo_l[r0],F0=V.npart_l,f0=v0<F0?v0:F0;Z<f0;)n0+=R[Z],i0+=D[Z],Z++;if(V.en[u0].l[r0]=n0,V.thm[u0].l[r0]=i0,Z>=F0){++r0;break}{var oe=V.PSY.bo_l_weight[r0],Z0=1-oe;n0=oe*R[Z],i0=oe*D[Z],V.en[u0].l[r0]+=n0,V.thm[u0].l[r0]+=i0,n0=Z0*R[Z],i0=Z0*D[Z]}}for(;r0<_.SBMAX_l;++r0)V.en[u0].l[r0]=0,V.thm[u0].l[r0]=0}function t(V,R,D,u0,r0,Z){var n0=V.internal_flags,i0,v0;for(v0=i0=0;v0<n0.npart_s;++v0){for(var F0=0,f0=n0.numlines_s[v0],oe=0;oe<f0;++oe,++i0){var Z0=R[Z][i0];F0+=Z0}D[v0]=F0}for(i0=v0=0;v0<n0.npart_s;v0++){var ie=n0.s3ind_s[v0][0],he=n0.s3_ss[i0++]*D[ie];for(++ie;ie<=n0.s3ind_s[v0][1];)he+=n0.s3_ss[i0]*D[ie],++i0,++ie;{var $0=W*n0.nb_s1[r0][v0];u0[v0]=Math.min(he,$0)}if(n0.blocktype_old[r0&1]==_.SHORT_TYPE){var $0=f*n0.nb_s2[r0][v0],H0=u0[v0];u0[v0]=Math.min($0,H0)}n0.nb_s2[r0][v0]=n0.nb_s1[r0][v0],n0.nb_s1[r0][v0]=he}for(;v0<=_.CBANDS;++v0)D[v0]=0,u0[v0]=0}function N(V,R,D,u0){var r0=V.internal_flags;V.short_blocks==A0.short_block_coupled&&!(R[0]!=0&&R[1]!=0)&&(R[0]=R[1]=0);for(var Z=0;Z<r0.channels_out;Z++)u0[Z]=_.NORM_TYPE,V.short_blocks==A0.short_block_dispensed&&(R[Z]=1),V.short_blocks==A0.short_block_forced&&(R[Z]=0),R[Z]!=0?r0.blocktype_old[Z]==_.SHORT_TYPE&&(u0[Z]=_.STOP_TYPE):(u0[Z]=_.SHORT_TYPE,r0.blocktype_old[Z]==_.NORM_TYPE&&(r0.blocktype_old[Z]=_.START_TYPE),r0.blocktype_old[Z]==_.STOP_TYPE&&(r0.blocktype_old[Z]=_.SHORT_TYPE)),D[Z]=r0.blocktype_old[Z],r0.blocktype_old[Z]=u0[Z]}function B(V,R,D){return D>=1?V:D<=0?R:R>0?Math.pow(V/R,D)*R:0}var O=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function Q(V,R){for(var D=309.07,u0=0;u0<_.SBMAX_s-1;u0++)for(var r0=0;r0<3;r0++){var Z=V.thm.s[u0][r0];if(Z>0){var n0=Z*R,i0=V.en.s[u0][r0];i0>n0&&(i0>n0*1e10?D+=O[u0]*(10*I):D+=O[u0]*e0.FAST_LOG10(i0/n0))}}return D}var J=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function a0(V,R){for(var D=281.0575,u0=0;u0<_.SBMAX_l-1;u0++){var r0=V.thm.l[u0];if(r0>0){var Z=r0*R,n0=V.en.l[u0];n0>Z&&(n0>Z*1e10?D+=J[u0]*(10*I):D+=J[u0]*e0.FAST_LOG10(n0/Z))}}return D}function B0(V,R,D,u0,r0){var Z,n0;for(Z=n0=0;Z<V.npart_l;++Z){var i0=0,v0=0,F0;for(F0=0;F0<V.numlines_l[Z];++F0,++n0){var f0=R[n0];i0+=f0,v0<f0&&(v0=f0)}D[Z]=i0,u0[Z]=v0,r0[Z]=i0*V.rnumlines_l[Z]}}function I0(V,R,D,u0){var r0=r.length-1,Z=0,n0=D[Z]+D[Z+1];if(n0>0){var i0=R[Z];i0<R[Z+1]&&(i0=R[Z+1]),n0=20*(i0*2-n0)/(n0*(V.numlines_l[Z]+V.numlines_l[Z+1]-1));var v0=0|n0;v0>r0&&(v0=r0),u0[Z]=v0}else u0[Z]=0;for(Z=1;Z<V.npart_l-1;Z++)if(n0=D[Z-1]+D[Z]+D[Z+1],n0>0){var i0=R[Z-1];i0<R[Z]&&(i0=R[Z]),i0<R[Z+1]&&(i0=R[Z+1]),n0=20*(i0*3-n0)/(n0*(V.numlines_l[Z-1]+V.numlines_l[Z]+V.numlines_l[Z+1]-1));var v0=0|n0;v0>r0&&(v0=r0),u0[Z]=v0}else u0[Z]=0;if(n0=D[Z-1]+D[Z],n0>0){var i0=R[Z-1];i0<R[Z]&&(i0=R[Z]),n0=20*(i0*2-n0)/(n0*(V.numlines_l[Z-1]+V.numlines_l[Z]-1));var v0=0|n0;v0>r0&&(v0=r0),u0[Z]=v0}else u0[Z]=0}var k0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(V,R,D,u0,r0,Z,n0,i0,v0,F0){var f0=V.internal_flags,oe=b0([2,_.BLKSIZE]),Z0=b0([2,3,_.BLKSIZE_s]),ie=P(_.CBANDS+1),he=P(_.CBANDS+1),$0=P(_.CBANDS+2),H0=h0(2),ne=h0(2),Ae,S0,P0,L0,ue,Le,ye,ae,Ze=b0([2,576]),Re,ge=h0(_.CBANDS+2),Fe=h0(_.CBANDS+2);for(g0.fill(Fe,0),Ae=f0.channels_out,V.mode==x0.JOINT_STEREO&&(Ae=4),V.VBR==U.vbr_off?Re=f0.ResvMax==0?0:f0.ResvSize/f0.ResvMax*.5:V.VBR==U.vbr_rh||V.VBR==U.vbr_mtrh||V.VBR==U.vbr_mt?Re=.6:Re=1,S0=0;S0<f0.channels_out;S0++){var Ue=R[S0],Ye=D+576-350-E+192;for(L0=0;L0<576;L0++){var _1,u1;for(_1=Ue[Ye+L0+10],u1=0,ue=0;ue<(E-1)/2-1;ue+=2)_1+=k0[ue]*(Ue[Ye+L0+ue]+Ue[Ye+L0+E-ue]),u1+=k0[ue+1]*(Ue[Ye+L0+ue+1]+Ue[Ye+L0+E-ue-1]);Ze[S0][L0]=_1+u1}r0[u0][S0].en.assign(f0.en[S0]),r0[u0][S0].thm.assign(f0.thm[S0]),Ae>2&&Y()}for(S0=0;S0<Ae;S0++){var A1,w1,Ee=P(12),Ie=[0,0,0,0],v1=P(12),B1=1,M1,y1=P(_.CBANDS),T1=P(_.CBANDS),pe=[0,0,0,0],R1=P(_.HBLKSIZE),E1=b0([3,_.HBLKSIZE_s]);for(L0=0;L0<3;L0++)Ee[L0]=f0.nsPsy.last_en_subshort[S0][L0+6],v1[L0]=Ee[L0]/f0.nsPsy.last_en_subshort[S0][L0+4],Ie[0]+=Ee[L0];S0==2&&Y();{var C1=Ze[S0&1],qe=0;for(L0=0;L0<9;L0++){for(var aa=qe+64,we=1;qe<aa;qe++)we<Math.abs(C1[qe])&&(we=Math.abs(C1[qe]));f0.nsPsy.last_en_subshort[S0][L0]=Ee[L0+3]=we,Ie[1+L0/3]+=we,we>Ee[L0+3-2]?we=we/Ee[L0+3-2]:Ee[L0+3-2]>we*10?we=Ee[L0+3-2]/(we*10):we=0,v1[L0+3]=we}}for(V.analysis&&Y(),M1=S0==3?f0.nsPsy.attackthre_s:f0.nsPsy.attackthre,L0=0;L0<12;L0++)pe[L0/3]==0&&v1[L0]>M1&&(pe[L0/3]=L0%3+1);for(L0=1;L0<4;L0++){var c1;Ie[L0-1]>Ie[L0]?c1=Ie[L0-1]/Ie[L0]:c1=Ie[L0]/Ie[L0-1],c1<1.7&&(pe[L0]=0,L0==1&&(pe[0]=0))}for(pe[0]!=0&&f0.nsPsy.lastAttacks[S0]!=0&&(pe[0]=0),(f0.nsPsy.lastAttacks[S0]==3||pe[0]+pe[1]+pe[2]+pe[3]!=0)&&(B1=0,pe[1]!=0&&pe[0]!=0&&(pe[1]=0),pe[2]!=0&&pe[1]!=0&&(pe[2]=0),pe[3]!=0&&pe[2]!=0&&(pe[3]=0)),S0<2?ne[S0]=B1:Y(),v0[S0]=f0.tot_ener[S0],w1=Z0,A1=oe,d(V,R1,E1,A1,S0&1,w1,S0&1,u0,S0,R,D),B0(f0,R1,ie,y1,T1),I0(f0,y1,T1,ge),ae=0;ae<3;ae++){var f1,Te;for(t(V,E1,he,$0,S0,ae),A(f0,he,$0,S0,ae),ye=0;ye<_.SBMAX_s;ye++){if(Te=f0.thm[S0].s[ye][ae],Te*=X,pe[ae]>=2||pe[ae+1]==1){var je=ae!=0?ae-1:2,we=B(f0.thm[S0].s[ye][je],Te,T*Re);Te=Math.min(Te,we)}if(pe[ae]==1){var je=ae!=0?ae-1:2,we=B(f0.thm[S0].s[ye][je],Te,K*Re);Te=Math.min(Te,we)}else if(ae!=0&&pe[ae-1]==3||ae==0&&f0.nsPsy.lastAttacks[S0]==3){var je=ae!=2?ae+1:0,we=B(f0.thm[S0].s[ye][je],Te,K*Re);Te=Math.min(Te,we)}f1=Ee[ae*3+3]+Ee[ae*3+4]+Ee[ae*3+5],Ee[ae*3+5]*6<f1&&(Te*=.5,Ee[ae*3+4]*6<f1&&(Te*=.5)),f0.thm[S0].s[ye][ae]=Te}}for(f0.nsPsy.lastAttacks[S0]=pe[2],Le=0,P0=0;P0<f0.npart_l;P0++){for(var Ne=f0.s3ind[P0][0],h1=ie[Ne]*r[ge[Ne]],Ve=f0.s3_ll[Le++]*h1;++Ne<=f0.s3ind[P0][1];)h1=ie[Ne]*r[ge[Ne]],Ve=m(Ve,f0.s3_ll[Le++]*h1,Ne,Ne-P0,f0,0);Ve*=.158489319246111,f0.blocktype_old[S0&1]==_.SHORT_TYPE?$0[P0]=Ve:$0[P0]=B(Math.min(Ve,Math.min(F*f0.nb_1[S0][P0],x*f0.nb_2[S0][P0])),Ve,Re),f0.nb_2[S0][P0]=f0.nb_1[S0][P0],f0.nb_1[S0][P0]=Ve}for(;P0<=_.CBANDS;++P0)ie[P0]=0,$0[P0]=0;a(f0,ie,$0,S0)}for((V.mode==x0.STEREO||V.mode==x0.JOINT_STEREO)&&Y(),V.mode==x0.JOINT_STEREO&&Y(),N(V,ne,F0,H0),S0=0;S0<Ae;S0++){var Ge,We=0,k1,m1;S0>1?Y():(Ge=n0,We=0,k1=F0[S0],m1=r0[u0][S0]),k1==_.SHORT_TYPE?Ge[We+S0]=Q(m1,f0.masking_lower):Ge[We+S0]=a0(m1,f0.masking_lower),V.analysis&&(f0.pinfo.pe[u0][S0]=Ge[We+S0])}return 0};function de(V){var R,D,u0,r0;return R=V,R>=0?R*=3:R*=1.5,R>=.5&&R<=2.5?(r0=R-.5,D=8*(r0*r0-2*r0)):D=0,R+=.474,u0=15.811389+7.5*R-17.5*Math.sqrt(1+R*R),u0<=-60?0:(R=Math.exp((D+u0)*e),R/=.6609193,R)}function be(V){return V<0&&(V=0),V=V*.001,13*Math.atan(.76*V)+3.5*Math.atan(V*V/(7.5*7.5))}function le(V,R,D,u0,r0,Z,n0,i0,v0,F0,f0,oe){var Z0=P(_.CBANDS+1),ie=i0/(oe>15?2*576:2*192),he=h0(_.HBLKSIZE),$0;i0/=v0;var H0=0,ne=0;for($0=0;$0<_.CBANDS;$0++){var Ae,S0;for(Ae=be(i0*H0),Z0[$0]=i0*H0,S0=H0;be(i0*S0)-Ae<L&&S0<=v0/2;S0++);for(V[$0]=S0-H0,ne=$0+1;H0<S0;)he[H0++]=$0;if(H0>v0/2){H0=v0/2,++$0;break}}Z0[$0]=i0*H0;for(var P0=0;P0<oe;P0++){var L0,ue,Le,ye,ae;Le=F0[P0],ye=F0[P0+1],L0=0|Math.floor(.5+f0*(Le-.5)),L0<0&&(L0=0),ue=0|Math.floor(.5+f0*(ye-.5)),ue>v0/2&&(ue=v0/2),D[P0]=(he[L0]+he[ue])/2,R[P0]=he[ue];var Ze=ie*ye;n0[P0]=(Ze-Z0[R[P0]])/(Z0[R[P0]+1]-Z0[R[P0]]),n0[P0]<0?n0[P0]=0:n0[P0]>1&&(n0[P0]=1),ae=be(i0*F0[P0]*f0),ae=Math.min(ae,15.5)/15.5,Z[P0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*ae))-2.5)}H0=0;for(var Re=0;Re<ne;Re++){var ge=V[Re],Ae,Fe;Ae=be(i0*H0),Fe=be(i0*(H0+ge-1)),u0[Re]=.5*(Ae+Fe),Ae=be(i0*(H0-.5)),Fe=be(i0*(H0+ge-.5)),r0[Re]=Fe-Ae,H0+=ge}return ne}function fe(V,R,D,u0,r0,Z){var n0=b0([_.CBANDS,_.CBANDS]),i0,v0=0;if(Z)for(var F0=0;F0<R;F0++)for(i0=0;i0<R;i0++){var f0=de(D[F0]-D[i0])*u0[i0];n0[F0][i0]=f0*r0[F0]}else Y();for(var F0=0;F0<R;F0++){for(i0=0;i0<R&&!(n0[F0][i0]>0);i0++);for(V[F0][0]=i0,i0=R-1;i0>0&&!(n0[F0][i0]>0);i0--);V[F0][1]=i0,v0+=V[F0][1]-V[F0][0]+1}for(var oe=P(v0),Z0=0,F0=0;F0<R;F0++)for(i0=V[F0][0];i0<=V[F0][1];i0++)oe[Z0++]=n0[F0][i0];return oe}function Se(V){var R=be(V);return R=Math.min(R,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*R))-2.5)}this.psymodel_init=function(V){var R=V.internal_flags,D,u0=!0,r0=13,Z=24,n0=0,i0=0,v0=-8.25,F0=-4.5,f0=P(_.CBANDS),oe=P(_.CBANDS),Z0=P(_.CBANDS),ie=V.out_samplerate;switch(V.experimentalZ){default:case 0:u0=!0;break;case 1:u0=!(V.VBR==U.vbr_mtrh||V.VBR==U.vbr_mt);break;case 2:u0=!1;break;case 3:r0=8,n0=-1.75,i0=-.0125,v0=-8.25,F0=-2.25;break}for(R.ms_ener_ratio_old=.25,R.blocktype_old[0]=R.blocktype_old[1]=_.NORM_TYPE,D=0;D<4;++D){for(var H0=0;H0<_.CBANDS;++H0)R.nb_1[D][H0]=1e20,R.nb_2[D][H0]=1e20,R.nb_s1[D][H0]=R.nb_s2[D][H0]=1;for(var he=0;he<_.SBMAX_l;he++)R.en[D].l[he]=1e20,R.thm[D].l[he]=1e20;for(var H0=0;H0<3;++H0){for(var he=0;he<_.SBMAX_s;he++)R.en[D].s[he][H0]=1e20,R.thm[D].s[he][H0]=1e20;R.nsPsy.lastAttacks[D]=0}for(var H0=0;H0<9;H0++)R.nsPsy.last_en_subshort[D][H0]=10}for(R.loudness_sq_save[0]=R.loudness_sq_save[1]=0,R.npart_l=le(R.numlines_l,R.bo_l,R.bm_l,f0,oe,R.mld_l,R.PSY.bo_l_weight,ie,_.BLKSIZE,R.scalefac_band.l,_.BLKSIZE/(2*576),_.SBMAX_l),D=0;D<R.npart_l;D++){var $0=n0;f0[D]>=r0&&($0=i0*(f0[D]-r0)/(Z-r0)+n0*(Z-f0[D])/(Z-r0)),Z0[D]=Math.pow(10,$0/10),R.numlines_l[D]>0?R.rnumlines_l[D]=1/R.numlines_l[D]:R.rnumlines_l[D]=0}R.s3_ll=fe(R.s3ind,R.npart_l,f0,oe,Z0,u0);var H0=0;for(D=0;D<R.npart_l;D++){var ne;ne=m0.MAX_VALUE;for(var Ae=0;Ae<R.numlines_l[D];Ae++,H0++){var S0=ie*H0/(1e3*_.BLKSIZE),P0;P0=this.ATHformula(S0*1e3,V)-20,P0=Math.pow(10,.1*P0),P0*=R.numlines_l[D],ne>P0&&(ne=P0)}R.ATH.cb_l[D]=ne,ne=-20+f0[D]*20/10,ne>6&&(ne=100),ne<-15&&(ne=-15),ne-=8,R.minval_l[D]=Math.pow(10,ne/10)*R.numlines_l[D]}for(R.npart_s=le(R.numlines_s,R.bo_s,R.bm_s,f0,oe,R.mld_s,R.PSY.bo_s_weight,ie,_.BLKSIZE_s,R.scalefac_band.s,_.BLKSIZE_s/(2*192),_.SBMAX_s),H0=0,D=0;D<R.npart_s;D++){var ne,$0=v0;f0[D]>=r0&&($0=F0*(f0[D]-r0)/(Z-r0)+v0*(Z-f0[D])/(Z-r0)),Z0[D]=Math.pow(10,$0/10),ne=m0.MAX_VALUE;for(var Ae=0;Ae<R.numlines_s[D];Ae++,H0++){var S0=ie*H0/(1e3*_.BLKSIZE_s),P0;P0=this.ATHformula(S0*1e3,V)-20,P0=Math.pow(10,.1*P0),P0*=R.numlines_s[D],ne>P0&&(ne=P0)}R.ATH.cb_s[D]=ne,ne=-7+f0[D]*7/12,f0[D]>12&&(ne*=1+Math.log(1+ne)*3.1),f0[D]<12&&(ne*=1+Math.log(1-ne)*2.3),ne<-15&&(ne=-15),ne-=8,R.minval_s[D]=Math.pow(10,ne/10)*R.numlines_s[D]}R.s3_ss=fe(R.s3ind_s,R.npart_s,f0,oe,Z0,u0),g(),u.init_fft(R),R.decay=Math.exp(-1*I/(y*ie/192));{var L0;L0=w,V.exp_nspsytune&2&&(L0=1),Math.abs(V.msfix)>0&&(L0=V.msfix),V.msfix=L0;for(var ue=0;ue<R.npart_l;ue++)R.s3ind[ue][1]>R.npart_l-1&&(R.s3ind[ue][1]=R.npart_l-1)}var Le=576*R.mode_gr/ie;if(R.ATH.decay=Math.pow(10,-12/10*Le),R.ATH.adjust=.01,R.ATH.adjustLimit=1,V.ATHtype!=-1){var S0,ye=V.out_samplerate/_.BLKSIZE,ae=0;for(S0=0,D=0;D<_.BLKSIZE/2;++D)S0+=ye,R.ATH.eql_w[D]=1/Math.pow(10,this.ATHformula(S0,V)/10),ae+=R.ATH.eql_w[D];for(ae=1/ae,D=_.BLKSIZE/2;--D>=0;)R.ATH.eql_w[D]*=ae}{for(var ue=H0=0;ue<R.npart_s;++ue)for(D=0;D<R.numlines_s[ue];++D)++H0;for(var ue=H0=0;ue<R.npart_l;++ue)for(D=0;D<R.numlines_l[ue];++D)++H0}for(H0=0,D=0;D<R.npart_l;D++){var S0=ie*(H0+R.numlines_l[D]/2)/(1*_.BLKSIZE);R.mld_cb_l[D]=Se(S0),H0+=R.numlines_l[D]}for(;D<_.CBANDS;++D)R.mld_cb_l[D]=1;for(H0=0,D=0;D<R.npart_s;D++){var S0=ie*(H0+R.numlines_s[D]/2)/(1*_.BLKSIZE_s);R.mld_cb_s[D]=Se(S0),H0+=R.numlines_s[D]}for(;D<_.CBANDS;++D)R.mld_cb_s[D]=1;return 0};function ke(V,R){V<-.3&&(V=3410),V/=1e3,V=Math.max(.1,V);var D=3.64*Math.pow(V,-.8)-6.8*Math.exp(-.6*Math.pow(V-3.4,2))+6*Math.exp(-.15*Math.pow(V-8.7,2))+(.6+.04*R)*.001*Math.pow(V,4);return D}this.ATHformula=function(V,R){var D;switch(R.ATHtype){case 0:D=ke(V,9);break;case 1:D=ke(V,-1);break;case 2:D=ke(V,0);break;case 3:D=ke(V,1)+6;break;case 4:D=ke(V,R.ATHcurve);break;default:D=ke(V,0);break}return D}}function s0(){var u=this,I=128*1024;s0.V9=410,s0.V8=420,s0.V7=430,s0.V6=440,s0.V5=450,s0.V4=460,s0.V3=470,s0.V2=480,s0.V1=490,s0.V0=500,s0.R3MIX=1e3,s0.STANDARD=1001,s0.EXTREME=1002,s0.INSANE=1003,s0.STANDARD_FAST=1004,s0.EXTREME_FAST=1005,s0.MEDIUM=1006,s0.MEDIUM_FAST=1007;var F=16384+I;s0.LAME_MAXMP3BUFFER=F;var x,W,f,L,j,y=new X0,X,T;this.enc=new _,this.setModules=function(a,t,N,B,O,Q,J,a0,B0){x=a,W=t,f=N,L=B,j=O,X=Q,T=a0,this.enc.setModules(W,y,L,X)};function K(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=P(_.SBMAX_l),this.bo_s_weight=P(_.SBMAX_s)}function w(){this.lowerlimit=0}function E(a,t){this.lowpass=t}var e=4294479419;function n(a){var t;return a.class_id=e,t=a.internal_flags=new E0,a.mode=x0.NOT_SET,a.original=1,a.in_samplerate=44100,a.num_channels=2,a.num_samples=-1,a.bWriteVbrTag=!0,a.quality=-1,a.short_blocks=null,t.subblock_gain=-1,a.lowpassfreq=0,a.highpassfreq=0,a.lowpasswidth=-1,a.highpasswidth=-1,a.VBR=U.vbr_off,a.VBR_q=4,a.ATHcurve=-1,a.VBR_mean_bitrate_kbps=128,a.VBR_min_bitrate_kbps=0,a.VBR_max_bitrate_kbps=0,a.VBR_hard_min=0,t.VBR_min_bitrate=1,t.VBR_max_bitrate=13,a.quant_comp=-1,a.quant_comp_short=-1,a.msfix=-1,t.resample_ratio=1,t.OldValue[0]=180,t.OldValue[1]=180,t.CurrentStep[0]=4,t.CurrentStep[1]=4,t.masking_lower=1,t.nsPsy.attackthre=-1,t.nsPsy.attackthre_s=-1,a.scale=-1,a.athaa_type=-1,a.ATHtype=-1,a.athaa_loudapprox=-1,a.athaa_sensitivity=0,a.useTemporal=null,a.interChRatio=-1,t.mf_samples_to_encode=_.ENCDELAY+_.POSTDELAY,a.encoder_padding=0,t.mf_size=_.ENCDELAY-_.MDCTDELAY,a.findReplayGain=!1,a.decode_on_the_fly=!1,t.decode_on_the_fly=!1,t.findReplayGain=!1,t.findPeakSample=!1,t.RadioGain=0,t.AudiophileGain=0,t.noclipGainChange=0,t.noclipScale=-1,a.preset=0,a.write_id3tag_automatic=!0,0}this.lame_init=function(){var a=new Q0;return n(a),a.lame_allocated_gfp=1,a};function d(a){return a>1?0:a<=0?1:Math.cos(Math.PI/2*a)}this.nearestBitrateFullIndex=function(a){var t=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],N=0,B=0,O=0,Q=0;Q=t[16],O=16,B=t[16],N=16;for(var J=0;J<16;J++)if(Math.max(a,t[J+1])!=a){Q=t[J+1],O=J+1,B=t[J],N=J;break}return Q-a>a-B?N:O};function C(a,t){switch(a){case 44100:return t.version=1,0;case 48e3:return t.version=1,1;case 32e3:return t.version=1,2;case 22050:return t.version=0,0;case 24e3:return t.version=0,1;case 16e3:return t.version=0,2;case 11025:return t.version=0,0;case 12e3:return t.version=0,1;case 8e3:return t.version=0,2;default:return t.version=0,-1}}function h(a,t,N){N<16e3&&(t=2);for(var B=H.bitrate_table[t][1],O=2;O<=14;O++)H.bitrate_table[t][O]>0&&Math.abs(H.bitrate_table[t][O]-a)<Math.abs(B-a)&&(B=H.bitrate_table[t][O]);return B}function l(a,t,N){N<16e3&&(t=2);for(var B=0;B<=14;B++)if(H.bitrate_table[t][B]>0&&H.bitrate_table[t][B]==a)return B;return-1}function c(a,t){var N=[new E(8,2e3),new E(16,3700),new E(24,3900),new E(32,5500),new E(40,7e3),new E(48,7500),new E(56,1e4),new E(64,11e3),new E(80,13500),new E(96,15100),new E(112,15600),new E(128,17e3),new E(160,17500),new E(192,18600),new E(224,19400),new E(256,19700),new E(320,20500)],B=u.nearestBitrateFullIndex(t);a.lowerlimit=N[B].lowpass}function i(a){var t=a.internal_flags,N=32;if(t.lowpass1>0){for(var B=999,O=0;O<=31;O++){var Q=O/31;Q>=t.lowpass2&&(N=Math.min(N,O)),t.lowpass1<Q&&Q<t.lowpass2&&(B=Math.min(B,O))}B==999?t.lowpass1=(N-.75)/31:t.lowpass1=(B-.75)/31,t.lowpass2=N/31}t.highpass2>0&&Y(),t.highpass2>0&&Y();for(var O=0;O<32;O++){var J,a0,Q=O/31;t.highpass2>t.highpass1?Y():J=1,t.lowpass2>t.lowpass1?a0=d((Q-t.lowpass1)/(t.lowpass2-t.lowpass1+1e-20)):a0=1,t.amp_filter[O]=J*a0}}function p(a){var t=a.internal_flags;switch(a.quality){default:case 9:t.psymodel=0,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 8:a.quality=7;case 7:t.psymodel=1,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 6:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=0,t.full_outer_loop=0;break;case 5:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=0,t.full_outer_loop=0;break;case 4:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 3:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.noise_shaping_amp=1,t.noise_shaping_stop=1,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 2:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.substep_shaping==0&&(t.substep_shaping=2),t.noise_shaping_amp=1,t.noise_shaping_stop=1,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 1:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.substep_shaping==0&&(t.substep_shaping=2),t.noise_shaping_amp=2,t.noise_shaping_stop=1,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 0:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.substep_shaping==0&&(t.substep_shaping=2),t.noise_shaping_amp=2,t.noise_shaping_stop=1,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break}}function r(a){var t=a.internal_flags;a.frameNum=0,a.write_id3tag_automatic&&T.id3tag_write_v2(a),t.bitrate_stereoMode_Hist=R0([16,5]),t.bitrate_blockType_Hist=R0([16,6]),t.PeakSample=0,a.bWriteVbrTag&&X.InitVbrTag(a)}this.lame_init_params=function(a){var t=a.internal_flags;if(t.Class_ID=0,t.ATH==null&&(t.ATH=new N0),t.PSY==null&&(t.PSY=new K),t.rgdata==null&&(t.rgdata=new o0),t.channels_in=a.num_channels,t.channels_in==1&&(a.mode=x0.MONO),t.channels_out=a.mode==x0.MONO?1:2,t.mode_ext=_.MPG_MD_MS_LR,a.mode==x0.MONO&&(a.force_ms=!1),a.VBR==U.vbr_off&&a.VBR_mean_bitrate_kbps!=128&&a.brate==0&&(a.brate=a.VBR_mean_bitrate_kbps),a.VBR==U.vbr_off||a.VBR==U.vbr_mtrh||a.VBR==U.vbr_mt||(a.free_format=!1),a.VBR==U.vbr_off&&a.brate==0&&Y(),a.VBR==U.vbr_off&&a.compression_ratio>0&&Y(),a.out_samplerate!=0&&(a.out_samplerate<16e3?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,64)):a.out_samplerate<32e3?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,160)):(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,32),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320))),a.lowpassfreq==0){var N=16e3;switch(a.VBR){case U.vbr_off:{var B=new w;c(B,a.brate),N=B.lowerlimit;break}case U.vbr_abr:{var B=new w;c(B,a.VBR_mean_bitrate_kbps),N=B.lowerlimit;break}case U.vbr_rh:Y();default:Y()}a.mode==x0.MONO&&(a.VBR==U.vbr_off||a.VBR==U.vbr_abr)&&(N*=1.5),a.lowpassfreq=N|0}switch(a.out_samplerate==0&&Y(),a.lowpassfreq=Math.min(20500,a.lowpassfreq),a.lowpassfreq=Math.min(a.out_samplerate/2,a.lowpassfreq),a.VBR==U.vbr_off&&(a.compression_ratio=a.out_samplerate*16*t.channels_out/(1e3*a.brate)),a.VBR==U.vbr_abr&&Y(),a.bWriteVbrTag||(a.findReplayGain=!1,a.decode_on_the_fly=!1,t.findPeakSample=!1),t.findReplayGain=a.findReplayGain,t.decode_on_the_fly=a.decode_on_the_fly,t.decode_on_the_fly&&(t.findPeakSample=!0),t.findReplayGain&&Y(),t.decode_on_the_fly&&!a.decode_only&&Y(),t.mode_gr=a.out_samplerate<=24e3?1:2,a.framesize=576*t.mode_gr,a.encoder_delay=_.ENCDELAY,t.resample_ratio=a.in_samplerate/a.out_samplerate,a.VBR){case U.vbr_mt:case U.vbr_rh:case U.vbr_mtrh:{var O=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];a.compression_ratio=O[a.VBR_q]}break;case U.vbr_abr:a.compression_ratio=a.out_samplerate*16*t.channels_out/(1e3*a.VBR_mean_bitrate_kbps);break;default:a.compression_ratio=a.out_samplerate*16*t.channels_out/(1e3*a.brate);break}a.mode==x0.NOT_SET&&(a.mode=x0.JOINT_STEREO),a.highpassfreq>0?Y():(t.highpass1=0,t.highpass2=0),a.lowpassfreq>0?(t.lowpass2=2*a.lowpassfreq,a.lowpasswidth>=0?Y():t.lowpass1=1*2*a.lowpassfreq,t.lowpass1/=a.out_samplerate,t.lowpass2/=a.out_samplerate):Y(),i(a),t.samplerate_index=C(a.out_samplerate,a),t.samplerate_index<0&&Y(),a.VBR==U.vbr_off?a.free_format?t.bitrate_index=0:(a.brate=h(a.brate,a.version,a.out_samplerate),t.bitrate_index=l(a.brate,a.version,a.out_samplerate),t.bitrate_index<=0&&Y()):t.bitrate_index=1,a.analysis&&(a.bWriteVbrTag=!1),t.pinfo!=null&&(a.bWriteVbrTag=!1),W.init_bit_stream_w(t);for(var Q=t.samplerate_index+3*a.version+6*(a.out_samplerate<16e3?1:0),J=0;J<_.SBMAX_l+1;J++)t.scalefac_band.l[J]=L.sfBandIndex[Q].l[J];for(var J=0;J<_.PSFB21+1;J++){var a0=(t.scalefac_band.l[22]-t.scalefac_band.l[21])/_.PSFB21,B0=t.scalefac_band.l[21]+J*a0;t.scalefac_band.psfb21[J]=B0}t.scalefac_band.psfb21[_.PSFB21]=576;for(var J=0;J<_.SBMAX_s+1;J++)t.scalefac_band.s[J]=L.sfBandIndex[Q].s[J];for(var J=0;J<_.PSFB12+1;J++){var a0=(t.scalefac_band.s[13]-t.scalefac_band.s[12])/_.PSFB12,B0=t.scalefac_band.s[12]+J*a0;t.scalefac_band.psfb12[J]=B0}t.scalefac_band.psfb12[_.PSFB12]=192,a.version==1?t.sideinfo_len=t.channels_out==1?21:36:t.sideinfo_len=t.channels_out==1?13:21,a.error_protection&&(t.sideinfo_len+=2),r(a),t.Class_ID=e;{var I0;for(I0=0;I0<19;I0++)t.nsPsy.pefirbuf[I0]=700*t.mode_gr*t.channels_out;a.ATHtype==-1&&(a.ATHtype=4)}switch(a.VBR){case U.vbr_mt:a.VBR=U.vbr_mtrh;case U.vbr_mtrh:{a.useTemporal==null&&(a.useTemporal=!1),f.apply_preset(a,500-a.VBR_q*10,0),a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),a.quality<5&&(a.quality=0),a.quality>5&&(a.quality=5),t.PSY.mask_adjust=a.maskingadjust,t.PSY.mask_adjust_short=a.maskingadjust_short,a.experimentalY?t.sfb21_extra=!1:t.sfb21_extra=a.out_samplerate>44e3,t.iteration_loop=new VBRNewIterationLoop(j);break}case U.vbr_rh:{f.apply_preset(a,500-a.VBR_q*10,0),t.PSY.mask_adjust=a.maskingadjust,t.PSY.mask_adjust_short=a.maskingadjust_short,a.experimentalY?t.sfb21_extra=!1:t.sfb21_extra=a.out_samplerate>44e3,a.quality>6&&(a.quality=6),a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),t.iteration_loop=new VBROldIterationLoop(j);break}default:{var k0;t.sfb21_extra=!1,a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),k0=a.VBR,k0==U.vbr_off&&(a.VBR_mean_bitrate_kbps=a.brate),f.apply_preset(a,a.VBR_mean_bitrate_kbps,0),a.VBR=k0,t.PSY.mask_adjust=a.maskingadjust,t.PSY.mask_adjust_short=a.maskingadjust_short,k0==U.vbr_off?t.iteration_loop=new ve(j):Y();break}}return a.VBR!=U.vbr_off&&Y(),a.tune&&Y(),p(a),a.athaa_type<0?t.ATH.useAdjust=3:t.ATH.useAdjust=a.athaa_type,t.ATH.aaSensitivityP=Math.pow(10,a.athaa_sensitivity/-10),a.short_blocks==null&&(a.short_blocks=A0.short_block_allowed),a.short_blocks==A0.short_block_allowed&&(a.mode==x0.JOINT_STEREO||a.mode==x0.STEREO)&&(a.short_blocks=A0.short_block_coupled),a.quant_comp<0&&(a.quant_comp=1),a.quant_comp_short<0&&(a.quant_comp_short=0),a.msfix<0&&(a.msfix=0),a.exp_nspsytune=a.exp_nspsytune|1,a.internal_flags.nsPsy.attackthre<0&&(a.internal_flags.nsPsy.attackthre=X0.NSATTACKTHRE),a.internal_flags.nsPsy.attackthre_s<0&&(a.internal_flags.nsPsy.attackthre_s=X0.NSATTACKTHRE_S),a.scale<0&&(a.scale=1),a.ATHtype<0&&(a.ATHtype=4),a.ATHcurve<0&&(a.ATHcurve=4),a.athaa_loudapprox<0&&(a.athaa_loudapprox=2),a.interChRatio<0&&(a.interChRatio=0),a.useTemporal==null&&(a.useTemporal=!0),t.slot_lag=t.frac_SpF=0,a.VBR==U.vbr_off&&(t.slot_lag=t.frac_SpF=(a.version+1)*72e3*a.brate%a.out_samplerate|0),L.iteration_init(a),y.psymodel_init(a),0};function g(a,t){(a.in_buffer_0==null||a.in_buffer_nsamples<t)&&(a.in_buffer_0=P(t),a.in_buffer_1=P(t),a.in_buffer_nsamples=t)}this.lame_encode_flush=function(a,t,N,B){var O=a.internal_flags,Q=p0([2,1152]),J=0,a0,B0,I0,k0,de=O.mf_samples_to_encode-_.POSTDELAY,be=s(a);if(O.mf_samples_to_encode<1)return 0;for(a0=0,a.in_samplerate!=a.out_samplerate&&Y(),I0=a.framesize-de%a.framesize,I0<576&&(I0+=a.framesize),a.encoder_padding=I0,k0=(de+I0)/a.framesize;k0>0&&J>=0;){var le=be-O.mf_size,fe=a.frameNum;le*=a.in_samplerate,le/=a.out_samplerate,le>1152&&(le=1152),le<1&&(le=1),B0=B-a0,B==0&&(B0=0),J=this.lame_encode_buffer(a,Q[0],Q[1],le,t,N,B0),N+=J,a0+=J,k0-=fe!=a.frameNum?1:0}return O.mf_samples_to_encode=0,J<0||(B0=B-a0,B==0&&(B0=0),W.flush_bitstream(a),J=W.copy_buffer(O,t,N,B0,1),J<0)?J:(N+=J,a0+=J,B0=B-a0,B==0&&(B0=0),a.write_id3tag_automatic&&Y(),a0)},this.lame_encode_buffer=function(a,t,N,B,O,Q,J){var a0=a.internal_flags,B0=[null,null];if(a0.Class_ID!=e)return-3;if(B==0)return 0;g(a0,B),B0[0]=a0.in_buffer_0,B0[1]=a0.in_buffer_1;for(var I0=0;I0<B;I0++)B0[0][I0]=t[I0],a0.channels_in>1&&(B0[1][I0]=N[I0]);return o(a,B0[0],B0[1],B,O,Q,J)};function s(a){var t=_.BLKSIZE+a.framesize-_.FFTOFFSET;return t=Math.max(t,512+a.framesize-32),t}function o(a,t,N,B,O,Q,J){var a0=a.internal_flags,B0=0,I0,k0,de,be,le,fe=[null,null],Se=[null,null];if(a0.Class_ID!=e)return-3;if(B==0)return 0;if(le=W.copy_buffer(a0,O,Q,J,0),le<0)return le;if(Q+=le,B0+=le,Se[0]=t,Se[1]=N,q0.NEQ(a.scale,0)&&q0.NEQ(a.scale,1))for(k0=0;k0<B;++k0)Se[0][k0]*=a.scale,a0.channels_out==2&&(Se[1][k0]*=a.scale);if(q0.NEQ(a.scale_left,0)&&q0.NEQ(a.scale_left,1))for(k0=0;k0<B;++k0)Se[0][k0]*=a.scale_left;if(q0.NEQ(a.scale_right,0)&&q0.NEQ(a.scale_right,1))for(k0=0;k0<B;++k0)Se[1][k0]*=a.scale_right;a.num_channels==2&&a0.channels_out==1&&Y(),be=s(a),fe[0]=a0.mfbuf[0],fe[1]=a0.mfbuf[1];for(var ke=0;B>0;){var V=[null,null],R=0,D=0;V[0]=Se[0],V[1]=Se[1];var u0=new m;if(A(a,fe,V,ke,B,u0),R=u0.n_in,D=u0.n_out,a0.findReplayGain&&!a0.decode_on_the_fly&&x.AnalyzeSamples(a0.rgdata,fe[0],a0.mf_size,fe[1],a0.mf_size,D,a0.channels_out)==z0.GAIN_ANALYSIS_ERROR)return-6;if(B-=R,ke+=R,a0.channels_out==2,a0.mf_size+=D,a0.mf_samples_to_encode<1&&Y(),a0.mf_samples_to_encode+=D,a0.mf_size>=be){var r0=J-B0;if(J==0&&(r0=0),I0=v(a,fe[0],fe[1],O,Q,r0),I0<0)return I0;for(Q+=I0,B0+=I0,a0.mf_size-=a.framesize,a0.mf_samples_to_encode-=a.framesize,de=0;de<a0.channels_out;de++)for(k0=0;k0<a0.mf_size;k0++)fe[de][k0]=fe[de][k0+a.framesize]}}return B0}function v(a,t,N,B,O,Q){var J=u.enc.lame_encode_mp3_frame(a,t,N,B,O,Q);return a.frameNum++,J}function m(){this.n_in=0,this.n_out=0}function A(a,t,N,B,O,Q){var J=a.internal_flags;if(J.resample_ratio<.9999||J.resample_ratio>1.0001)Y();else{Q.n_out=Math.min(a.framesize,O),Q.n_in=Q.n_out;for(var a0=0;a0<Q.n_out;++a0)t[0][J.mf_size+a0]=N[0][B+a0],J.channels_out==2&&(t[1][J.mf_size+a0]=N[1][B+a0])}}}function te(){this.setModules=function(u,I){}}function G0(){this.setModules=function(u,I,F){}}function U0(){}function se(){this.setModules=function(u,I){}}function j0(u,I,F){u!=1&&Y("fix cc: only supports mono");var x=new s0,W=new te,f=new z0,L=new q0,j=new ee,y=new b,X=new G,T=new Y0,K=new C0,w=new se,E=new W0,e=new V0,n=new G0,d=new U0;x.setModules(f,L,j,y,X,T,K,w,d),L.setModules(f,d,K,T),w.setModules(L,K),j.setModules(x),X.setModules(L,E,y,e),y.setModules(e,E,x.enc.psy),E.setModules(L),e.setModules(y),T.setModules(x,L,K),W.setModules(n,d),n.setModules(K,w,j);var C=x.lame_init();C.num_channels=u,C.in_samplerate=I,C.out_samplerate=I,C.brate=F,C.mode=x0.STEREO,C.quality=3,C.bWriteVbrTag=!1,C.disable_reservoir=!0,C.write_id3tag_automatic=!1,x.lame_init_params(C);var h=1152,l=0|1.25*h+7200,c=y0(l);this.encodeBuffer=function(i,p){u==1&&(p=i),i.length>h&&(h=i.length,l=0|1.25*h+7200,c=y0(l));var r=x.lame_encode_buffer(C,i,p,i.length,c,0,l);return new Int8Array(c.subarray(0,r))},this.flush=function(){var i=x.lame_encode_flush(C,c,0,l);return new Int8Array(c.subarray(0,i))}}k.SFBMAX=_.SBMAX_s*3,T0.Mp3Encoder=j0}T0(),z.lamejs=T0});(function(z){var T0=typeof window=="object"&&!!window.document,_0=T0?window:Object,Y=_0.Recorder,y0=Y.i18n;z(Y,y0,y0.$T,T0)})(function(z,T0,_0,Y){var y0=function(P){return new h0(P)},$="WaveView",h0=function(P){var d0=this,b0={scale:2,speed:9,phase:21.8,fps:20,keep:!0,lineWidth:3,linear1:[0,"rgba(150,96,238,1)",.2,"rgba(170,79,249,1)",1,"rgba(53,199,253,1)"],linear2:[0,"rgba(209,130,255,0.6)",1,"rgba(53,199,255,0.6)"],linearBg:[0,"rgba(255,255,255,0.2)",1,"rgba(54,197,252,0.2)"]};for(var R0 in P)b0[R0]=P[R0];d0.set=P=b0;var p0="compatibleCanvas";if(P[p0])var O0=d0.canvas=P[p0];else{if(!Y)throw new Error(_0.G("NonBrowser-1",[$]));var g0=P.elem;g0&&(typeof g0=="string"?g0=document.querySelector(g0):g0.length&&(g0=g0[0])),g0&&(P.width=g0.offsetWidth,P.height=g0.offsetHeight);var q=d0.elem=document.createElement("div");q.style.fontSize=0,q.innerHTML='<canvas style="width:100%;height:100%;"/>';var O0=d0.canvas=q.querySelector("canvas");g0&&(g0.innerHTML="",g0.appendChild(q))}var e0=P.scale,A0=P.width*e0,m0=P.height*e0;if(!A0||!m0)throw new Error(_0.G("IllegalArgs-1",[$+" width=0 height=0"]));O0.width=A0,O0.height=m0;var U=d0.ctx=O0.getContext("2d");d0.linear1=d0.genLinear(U,A0,P.linear1),d0.linear2=d0.genLinear(U,A0,P.linear2),d0.linearBg=d0.genLinear(U,m0,P.linearBg,!0),d0._phase=0};h0.prototype=y0.prototype={genLinear:function(P,d0,b0,R0){for(var p0=P.createLinearGradient(0,0,R0?0:d0,R0?d0:0),O0=0;O0<b0.length;)p0.addColorStop(b0[O0++],b0[O0++]);return p0},genPath:function(P,d0,b0){for(var R0=[],p0=this,O0=p0.set,g0=O0.scale,q=O0.width*g0,e0=O0.height*g0/2,A0=0;A0<=q;A0+=g0){var m0=(1+Math.cos(Math.PI+A0/q*2*Math.PI))/2,U=m0*e0*d0*Math.sin(2*Math.PI*(A0/q)*P+b0)+e0;R0.push(U)}return R0},input:function(P,d0,b0){var R0=this;R0.sampleRate=b0,R0.pcmData=P,R0.pcmPos=0,R0.inputTime=Date.now(),R0.schedule()},schedule:function(){var P=this,d0=P.set,b0=Math.floor(1e3/d0.fps);P.timer||(P.timer=setInterval(function(){P.schedule()},b0));var R0=Date.now(),p0=P.drawTime||0;if(!(R0-p0<b0)){P.drawTime=R0;for(var O0=P.sampleRate/d0.fps,g0=P.pcmData,q=P.pcmPos,e0=Math.max(0,Math.min(O0,g0.length-q)),A0=0,m0=0;m0<e0;m0++,q++)A0+=Math.abs(g0[q]);P.pcmPos=q,(e0||!d0.keep)&&P.draw(z.PowerLevel(A0,e0)),!e0&&R0-P.inputTime>1300&&(clearInterval(P.timer),P.timer=0)}},draw:function(P){var d0=this,b0=d0.set,R0=d0.ctx,p0=b0.scale,O0=b0.width*p0,g0=b0.height*p0,q=b0.speed/b0.fps,e0=d0._phase-=q,A0=e0+q*b0.phase,m0=P/100,U=d0.genPath(2,m0,e0),x0=d0.genPath(1.8,m0,A0);R0.clearRect(0,0,O0,g0),R0.beginPath();for(var C0=0,V0=0;V0<=O0;C0++,V0+=p0)V0==0?R0.moveTo(V0,U[C0]):R0.lineTo(V0,U[C0]);C0--;for(var V0=O0-1;V0>=0;C0--,V0-=p0)R0.lineTo(V0,x0[C0]);R0.closePath(),R0.fillStyle=d0.linearBg,R0.fill(),d0.drawPath(x0,d0.linear2),d0.drawPath(U,d0.linear1)},drawPath:function(P,d0){var b0=this,R0=b0.set,p0=b0.ctx,O0=R0.scale,g0=R0.width*O0;p0.beginPath();for(var q=0,e0=0;e0<=g0;q++,e0+=O0)e0==0?p0.moveTo(e0,P[q]):p0.lineTo(e0,P[q]);p0.lineWidth=R0.lineWidth*O0,p0.strokeStyle=d0,p0.stroke()}},z[$]=y0});const ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPEAAAAoCAYAAAAv+hzuAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAA68SURBVHic7Z1rlFTVlYC/faqqu3mDBOxuunmIGBDMCBMjvhKUZWZWjMiraBjEIY4hiTgyk8XSOGQyoyZLo5noZJJBXVExLYFOqURg0ImKJL4FASEqw0NAmqqmOwiC0HRV3bPnR1VX16Pf3dVV3dS3Vq91zzn37L3v7bvvPY99TglZgNbMLSborEDkWtBNWGeBlDxXCaCBOd8AfoFSDDxMXe97ZNSKM5m1OEeO7MFk2gAAQs4dEQcGkCkY9w8B1H99b5RHUEYDvYC7KDh9WeYMzZEj+3Bn2oAo5yelRwNgBgq2rjShxMpo4NWuMat7obqwgEDtd8HORGQHxnWvnLvqSKbtykY0MHcK1i5DAKP3SaFvY6Ztai/Z4sQ5OoOq09OAh0BAuQrH6QsszLBVWYdWewsJO88gMhgAK5O0Zu5FMmS1P8OmtYucE3dDtHJmCcZ1I4KD27Uy9vApVyScKFwZq7Nnfn/6hqejOhZjnpfC1e90rdVdj1Z7+xKSOcAkLBuk9HcbAHAYDlEHjnAOwfBIwA+gh8smIfYmRPxIaIUUrqnucuPbQHb0iXO0Gj02fSDG/TLIfag8QNC+qHvm9wdANPn/qbGjPqF/R/Up4C6sfVUDZZd0ndUZIiRLER5HWIyL/4kOkjaLVpZdgOjLIEtQfop6nlD1urrC3PaS+xJnMVo9ayLWVULQvCfDo1/bU55xGL4YO0m4iAHB84DtLYibF3fcC9W/ATYD6NH5/QmHvkIIB3f+u1JYfqpzryS9RFom7ikY9VNb86aM2hSdvdAZIHEncj2woVlhLiajDIqrcx17P+8DnABQ/9wvI3Y8Yd0qpb6dnX0t7SH3Jc5S1F+2iLBrK5a1uOxmPTRrDACG1K9CuJG8VJLO0QIArVrQhzPBlTi8hGEj9sxy/cCb1+EL6CLUP3ME4n4bKMfKK+QP+WGsUJKuWVvx0RLrSckb0NcCaGWZF7Fvo6zAJW9pwPu1DprfKRgAPeQ9R/3e4apTcl/m7OGfY0dCMR7X7PSoCV6EyDcb0rKAQe7z0qMrDah7KsKwhgxZkjZdRhehsRdDH1RuSZuuNmC0cs4cXLIX5CBVQ8v1U++ATBuVA0D7JSZ1UBMndoyw7Z2SZ8KpX6NsxZB4X4SCNGrrlZjUdOpqNQbDgxC9EcpczsjVmTUpR44cbcENDE/MkpH1R+r3LgL5J1RPYPUHUvrMpo4o04D3e6i5HdFjqN4hxb7XOyKvQe6cb6DcA+SD3C/FFSs7Q+7Zju7zDqC3+RFWvYhuxTq3xcJhI6O4yxFGoboCy4NS6quNlHkXYOQO0DPAv0qx70WIjqzX5t0NzEB4l7AukVLfYQANeC8E+SXKcOAJ6nr/vD68VgNzF4IuRfU0qstkmO+lTNyPriTS35b7UQaAPizFvscA9ANvHgNZgpFFKH5ccnuTA1t6uGwSyKPAOEQuxWXKtWZav6bOb9mosktQ+W/QsSiXgfxGqxb0aa+8mNy9M4ailAN/DUwAfVxryi7oqNwcQL7MQ/X7CKUgN+Dy/CxWZvRxhGuAUYjcjZipAOqfNRYjvwYmgHwZeFr9874AQG3eTcDtQCnKLFzmvpg8yxMoVxOJ1vsJ+aemAGhV2QTU/hrV8cAliKzU/dMHdsXlZwrdNa0fKuUok4FxII9G/BEYzJWIPIByPvBVHPtk0wNZ6oxGEny8hGDvgcDJZg2omVlEyHN7ZLBBn5Si30VCJNWOSRjuh1FIuC/QsemMvnlDsXpOXE4+VocDuwH08JzrEcoQ3Q0slyJfTUfUqX/OdGA21u7C1D0ixev+0hF5WY3RiYlTNPql2LHwV3Gz0GD0S8B6cI0A4ka3ZTASHgr8BdWJSPwzEC9PJiboVi4CXsTRUUmjzEPo4/kCcLzd15Xt9HUPABLDjQ2jga2ouZCEGy8Tm3Zil5GEcwHyguHmdKt6XQRYAfp1FFBma2XZZVJS8T5JbwQAQmealdcq6sKKJ2n2JKwCoNXeKwnzPCCoAHo+cFN7VWlg9hSUNQAYA1owEsiKEcouIv6JsAklotFnSSXpZQ1qE89tXJ6TKK/ecRuRV+s0Ja9nEMYheZLP2oj/NDJN1u4ppcikt34FK9tl2Oo3ATjQx0P+6a/HThJ6IfZS4P326ukQYZlCwhMQP5XSNFo5YzAuz1RU3Qgvxb7eGmkyxjByXayOLvJw5NhVWDMGMa9L0aoPWqUr4L0Qx1yFW/Zy1HlNxvuCramXI0c97Qr2UL/3b8G+ieqvEPuGVpXNBWBknpN6ssnc3LNo8lRJctsiBfVf3xvjXoVSAbISZK0ejYY1ok1fS+DYP2LlFdBHwHkj1odpTle192JU3sDoI1j7MgNJ3xxnjh5L+xxM5e8RGhzE2m8BqzvJpi5DD99QiskroiC0Wwb9PtLHMgWjsfVrmwFlMrXB8cBbzUsz3469I5QBYL3AVoh9pccSskLJ4I9EHgsBEJZZQMMgjZhvAw921vXl6Fr0kLcXxowjRC0jKnZJXIdUK2cMRs355OUdSF4eqpVlF2BsP0zBrvaEvLYv7FI0PykjKya924IGvNdh8nei8g61+e9qYO5IAByb+mJzpfRQUkm+JxIJDNAtizz4jz+ElR24XO9Tdfxh1UWeaJ2kQIvk+5qju6A10/rhkpWIvkeefkjA+y+xsqqyCbg8O3C53sZxdmrV3EtjZX7vEox+BLIFW7dGj/9dm4N6zuLYaVkW+WIC6Bisfistako++yLC4lhauZXKo+PSoitH5gjmTwZmxNIqP9KAdwgAVpdGt5cCGIK1P4Bo1w25hwY/vJbToSltVX32OrFyTkJa7JC06AmFU+fCxXR4fjxHJ+OWFsdLmsVlBiekhTyMu96/kkKZNdKFOhV2gP6JZXJuW1WfvU6cI0cPoX1OrFKXlJHbfbIpjDuUmmdT83J0bxx7OiWv7lRkrls0yV+k3l/ySZ4fx5xoq+r2Dmw9BTQ8iMY82S45ZwPH7W7QTQ0Z+hpusytj9uRID4a3EPk4LudpSvOjo9DmKSTOX1RXAMiYF04gPNqQz2Hyg39qu+p2EAloN5cjshg1V0hhRWR66UAwdXG62I5HZaUFTewDafIbsXOQ8b7P6Ruejdp5GJkH7pky1Pd5OnTlyBxS5KuhLnQlloWgM6nV20R8TqSs4gWQKxBZjEsvl2G+ilhFl96JMg2Rm6kLXyGDIwtM2kK7AzGkePUWYEtC5shTIQL8AaQ+aqsWa7JzQzZhA8rYuJy0rYyR/muO0g3n0XO0DRn5XAB4qtGyoorNRLdDSsiPvNDXdURv007sWMUkfaiDec06vYjP0QMzF5IXtwCipCIacqk2JQbWU5C5aK6g58fkhapQczHGrpVC39pIgVtaEdjVGNLyKckYknS1Q0aXEm9f4sOhEm1xNTLKK8kPUqPykrfScZqU18vVswdk3Y1st2RMJF5cCCc/nk07kbj2JT1gleSdbnHlSPRtdFdqgdmT1ILdj7oz1qyUEb89RmPRUXmeAKHgZzRMC5wmZFrTxNkJjGxQYLa2WENJPEfIio3XYljZluCqIjtix8r70LAlLra+zDkIriCxlUx6FHVXR+tvI2EfbI2Tp9sQiQVBxO6FS/Zj1aHByWs4Feq5K8cAPg9/Rj9XJSIlsTzLPgDEfhhZzBNFdXuTbzQZVrEV9DvAR6i+g+iNMmRts8sQm0OKKjYjeivILoS3UBZk466KMuTpAKo3RR4q3YHRm2V4xb4WK6reBmwAPYjwU9y1a1qs47bPo3o/6EHgRTR8a8evoBOp01XAQyiHQJ/HCS2NlVn5B5SNwH5U/w21rwBI8bO7sHoL8GfQLcCNUrwq4nS9gr8BfgEcAp7FiXvZG25GeBXYByyjrs8mACms+DNibkHkA2AzqvNl1O977jJEQMauPYnhRoS3gY9AvxPxR+Aor6N6B8Je4E+4zcLmm8eR3QQe6zTjinzLgeWdJa9lXPsTVswph1tTS4b51gJrU0vMgYTWSZw8KfZ9AlyXWqcZPZH+0F001nLJAmS07zPg+9G/xLKSit3A1JRKgJT4yoHylPxIfPqS6F9iWZHvQ+CaRuUVrV4BrGi95d0fKfL9EUj53bHoKrcHiWtF9uy+hVO3DtH10VQNRu7skDyxzwH/G00dQTUrnS/H2YUhZacO7TH9DSlZc5RPmUWBjqBWx0SG+jsgr8hXw6mTN0B4JPmeC9K615OSOF4gciwtetwmNUjBNhKgkq0oR5LS6blPEeGJgRgi7e5ediZuLA9guBcA1T0EeTnDNnUq0ebHJ50mb8wLdcDBzpLXtCL5OWgkEEDxE3KeSY+ivJ3omfUNe09rOcfCHzdfJ4swoT9gPVuByPptI/emTZflZxguI7J89AiO/GfadLUBw7Dq+zFmMqLfRNyXyyhfVaaNahPqTt2qJTbd0X2R4orHcDuTMEzDMZdI6bN70qKnsPwUBXnzcXEtlmswBd/rTruLSOGaauqCU8F8FXEmSGHFf6VNV4lvI4QvRszVuPXihunTzOIW2RQGsjMgozUU5H2CrdsM1P9A2AEI7WimRrdBhj67DdiWdj2DV56A7tsCi45Wv9YluoqfO0hXtMTaQLcf2JLC8lMEwzcgLAWWEdRrpGTN0UzblYUkBWekJ8w0q5FWXHNj9+Vkq37rKmP0iN9eigaY/Eem7egSPK6PCdpPkdh66GqkVX3+14DpsZS0tN1QD0BkI8r4WFr5Y4t1HLZjqCOywgiEdzmP2nSZ2Bn0CCc+m5Ahq/0a8M4Ecyeqisv8RM5d3fJe2h6zmKAeRXQMllUMG/RKF5ibWZzQ3RjPSdCJCOuo69NiAI6U+LZr5ezZiFmEoQbVu0Wye4wgW5x4b1I6EiFljyv0OkT8Rtpqu8/IaZqIBgKkflUs/5cQjWw5EKszZLWfs2uPbKLdqmWpBdRgtQ6R+j3NggSpaaj3zHpgfUq9LCU7+sQe1wOoRudcdRM2/GMAKV53GuG7CPuAWuA+Qn3ezJyhWY6GV4H8lkhY2XsYzW2B2whS6NsPLAYOI/iB26TUl/wh6Tb8Pw+6SykPg1TKAAAAAElFTkSuQmCC",_t=""+new URL("wave-V_DnhRzx.gif",import.meta.url).href,$1=(z,T0)=>{const _0=z.__vccOpts||z;for(const[Y,y0]of T0)_0[Y]=y0;return _0},ea=z=>(Ra("data-v-b98f65fe"),z=z(),Ea(),z),ut=["src"],vt={class:"center"},ct=ea(()=>Me("img",{src:ot,alt:"",class:"wave"},null,-1)),ft={class:"text"},ht=ea(()=>Me("div",{class:"center"},[Me("img",{src:_t,alt:"",class:"wave"})],-1)),mt={__name:"recordItem",props:{blob:{type:Object},time:{type:Number},type:{type:String},url:{type:String}},emits:["del"],setup(z,{emit:T0}){const _0=T0,Y=z,y0=Be(!0),$=Be(null),h0=()=>{const p0=$.value;p0.play(),y0.value=!1,p0.addEventListener("ended",function(){y0.value=!0})},P=()=>{try{$.value.pause(),y0.value=!0}catch{}},d0=()=>{_0("del")},b0=r1(()=>URL.createObjectURL(Y.blob)),R0=r1(()=>parseInt(Math.random()*18)+82);return(p0,O0)=>{const g0=Pe("van-icon");return He(),Oe("div",{class:Ta(["recordItem",{small:z.type==="small"}])},[Me("audio",{src:b0.value,ref_key:"audio",ref:$},null,8,ut),y0.value?(He(),Oe(n1,{key:0},[re(g0,{name:"play-circle-o",onClick:h0,class:"mvan-icon"}),Me("div",vt,[ct,Me("span",ft,Xe(R0.value)+"分",1)])],64)):(He(),Oe(n1,{key:1},[re(g0,{name:"pause-circle-o",onClick:P,class:"mvan-icon"}),ht],64)),re(g0,{name:"delete-o",onClick:d0,class:"mvan-icon"})],2)}}},dt=$1(mt,[["__scopeId","data-v-b98f65fe"]]),bt={class:"page main",id:"page"},pt={class:"text"},xt={class:"zh"},St={class:"phonetic"},At={key:0,class:"text"},wt=["src"],Bt={key:1,class:"recordBtnBox"},Mt={class:"recordBtn_inner"},yt={class:"txt"},Tt={__name:"main",setup(z){const T0=Be(!1),_0=Be(""),Y=Be(""),y0=Be([]),$=Be([]),h0=Be(0),P=Be({}),d0=Be(null),b0=[{text:"一年级上",value:1,children:[{text:"Unit 1",value:1},{text:"Unit 2",value:2},{text:"Unit 3",value:3},{text:"Unit 4",value:4},{text:"Unit 5",value:5},{text:"Unit 6",value:6}]}],R0=({selectedOptions:M0})=>{T0.value=!1,_0.value=M0.map(Q0=>Q0.text).join(" / ");const N0=M0.map(Q0=>Q0.value);p0(N0)},p0=M0=>{const N0=it.filter(Q0=>Q0.level==M0[0]&&Q0.unit==M0[1]);N0.length>0?(y0.value=M0,$.value=N0,P.value=N0[h0.value],a1(()=>{e0()})):O0()},O0=()=>{Ka("恭喜你已学完当前全部内容")},g0=()=>{if(me(),h0.value<$.value.length-1)h0.value=h0.value+1,P.value=$.value[h0.value],a1(()=>{e0()});else{const M0=b0.find(Q0=>Q0.value===y0.value[0]),N0=M0.children.find(Q0=>Q0.value===y0.value[1]+1);N0?(h0.value=0,_0.value=`${M0.text} / ${N0.text}`,p0([y0.value[0],N0.value])):y0.value[0]<b0.length?h0.value=0:O0()}},q=()=>`https://dict.youdao.com/dictvoice?audio=${P.value.audio}&type=1`,e0=()=>{d0.value&&d0.value.play()},A0=()=>{window.addEventListener("resize",M0);function M0(){console.log("resize",window.innerWidth,window.innerHeight),window.innerWidth>window.innerHeight&&(document.getElementsByTagName("html")[0].style.fontSize=window.innerHeight/10+"px")}M0()};S1(()=>{console.log("main onMounted"),A0()}),Ca(()=>{console.log("main onMounted"),A0()});function m0(M0){nt({message:M0,theme:"round-button"}).then(()=>{})}const U=()=>new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAQ5SURBVHic7d3tcdtGFIXhu5kUwBLQQdSB0UHUQZQK4lRgpgInFSgd2K6AdAVWKgBTAdXByY+FEkUjERefC/C+zwx/aAZaXeJowcUCWJoBAAAAAAAAAAAAAAAAAAAA+L9UuoClSboxs3dmdmtmu/ZlZnYyswcz+5JSOhYpDtOTVEk6yOebpLp0zRhJ0t4Z+EsfS9eOgSR9HBj6v72/9HtATyN6+kv0/K2QVE8U+pO70u8JDvIP5Lya0u8JHZRH8HO4Lf3epvJd6QJm8uPG2l3ctQZfz9TuzUztLu5ag69mapfgV27XvckwkmZre0nXGvycCB7bRfBBEXxQBB8UwQdF8EERfFAEHxTBB0XwQRF8UAQfFMEHRfBBEXxQBB8UwQdF8EERfFAEHxTBB0XwQRF8UAQf1PelC3iN8rPoTw8onszsj5TSqVQ9Q0mqzOyD5Ue6dmb2xcx+Tyk9FixrfSTtlBcees37Hu00Mz0mrTZMTw13b/x+420jDEmfJtrpzXQ5969B+fn884U2ii+ysJrPeOWHEbsWHvjgbG62Q6nzI+fOLj9jV6nwcmqrCd58z7R7H1OeK/iTc7sfHNvUw8sYb03Be8LyBv95TCEXHJ3beeoserhfU/Anz0bKS5J2+TqulDcduzZoxwCVo62/R9YyymqCbz87J+n1KaUH8/dOr5Pl07Eu75ztPQwvZbzVBN/y7Azvjv11TCGv+M15/u05Ij1wLv+MfMuPnuVcjkTTrWx57/x7O10+jXtSfKXMtfX4vxzbeE77zMwspbQ3sz9H1GOWD/Heo8dP5lsqpehhfnXaHuPRa0Ss4T3/k3osdqS3Zx2fcx+xQpF07wzlrme7tfzLnDYD2n/vbLv4YX6VJN32CKca0H6tPJb4pv+mds/tz/caMKOm7ina53q3H4b8c+2uQdfc5D+SHErXumrq95m831Ct7iuMISkP8poeO/SuUJ3ez3WJ3u6jt69nryL8AfXVS9a3aep/XX2/UF19Tw9XMRbZDA37woGDZrrDpa2n62aRl85z1XPVNGzy5dz+3mQTJcqH9mZALfVUNYSj4V8hNuofQHmQOTRwiVH8eCN2/pODpF/UcdiVdNOGfRj591Y9Q7eZ75ZtAzvYdN8+8di+TpYvrFQ23Vr0n83sZy69TkSXb79ei1X39E2T/0LO0val983V03Q3WUzhLAZyy1EeiB3KZq57cZ5ehvKcufey6FQa8X2z5SkP/PYL/AM0yqd7Ven3jBfU724br4OuqIdv5jx+COUZu9ryLdk37ct7rn60fFPkVzM7ck6+cc7eXZWuc25ru70aCyH4oAg+KIIPiuCDIvigCD4ogg+K4IOKGDxTrxYz+K4VsY5bXD4VHZQfimguzNPXpWvETPT6nTuNJNcSK9fgqi/LdlFeM68ys8eU0rFsNQAAAAAAAAAAAAAAAAAAYI3+Ae+1srHGABiEAAAAAElFTkSuQmCC",import.meta.url).href;let x0=null,C0=null,V0=Be(null);const z0=Be(null),ee=Be(""),W0=Be(0),Y0=M0=>{x0||(x0=F1({type:"mp3",sampleRate:16e3,bitRate:16,onProcess:(N0,Q0,ve,o0,_e,b)=>{C0&&C0.input(N0[N0.length-1],Q0,o0)}})),x0.open(()=>{console.log("录音已打开"),ee.value="录音已打开",z0.value&&(C0=F1.WaveView({elem:z0.value,lineWidth:2,linear1:[0,"rgba(255,255,255,1)",1,"rgba(255,255,255,1)"],linear2:[0,"rgba(255,255,255,1)",1,"rgba(255,255,255,1)"],linearBg:[0,"rgba(255,255,255,1)",1,"rgba(255,255,255,1)"]})),M0&&M0()},(N0,Q0)=>{console.log((Q0?"UserNotAllow，":"")+"无法录音:"+N0),ee.value=(Q0?"UserNotAllow，":"")+"无法录音:"+N0,m0(N0)})};let q0=null;const w0=()=>{Y0(()=>{W0.value=1,x0.start(),console.log("已开始录音"),ee.value="已开始录音"})},H=()=>{if(!x0){console.error("未打开录音"),ee.value="未打开录音";return}x0.stop((M0,N0)=>{V0.value=M0;const Q0=(window.URL||webkitURL).createObjectURL(M0);console.log("录音成功",M0,Q0,"时长:"+N0+"ms"),ee.value="录音成功",W0.value=0,clearInterval(q0)},M0=>{console.error("结束录音出错："+M0),ee.value="结束录音出错："+M0,W0.value=0,clearInterval(q0)})},xe=()=>{W0.value===1?H():w0()},me=()=>{V0.value=null};return(M0,N0)=>{const Q0=Pe("van-field"),ve=Pe("van-cascader"),o0=Pe("van-popup"),_e=Pe("van-icon"),b=Pe("van-button");return He(),Oe("div",bt,[re(Q0,{modelValue:_0.value,"onUpdate:modelValue":N0[0]||(N0[0]=M=>_0.value=M),"is-link":"",readonly:"",label:"单元",placeholder:"请选择单元",onClick:N0[1]||(N0[1]=M=>T0.value=!0)},null,8,["modelValue"]),re(o0,{show:T0.value,"onUpdate:show":N0[4]||(N0[4]=M=>T0.value=M),round:"",position:"bottom"},{default:I1(()=>[re(ve,{modelValue:Y.value,"onUpdate:modelValue":N0[2]||(N0[2]=M=>Y.value=M),title:"请选择单元",options:b0,onClose:N0[3]||(N0[3]=M=>T0.value=!1),onFinish:R0},null,8,["modelValue"])]),_:1},8,["show"]),P.value.audio?(He(),Oe(n1,{key:0},[Me("div",pt,Xe(P.value.audio),1),Me("div",xt,Xe(P.value.zh),1),Me("div",St,[Me("span",null,[P.value.phonetic?(He(),Oe("span",At,Xe(P.value.phonetic),1)):H1("",!0),re(_e,{name:"volume-o",onClick:O1(e0,["stop"]),class:"mvan-icon"}),Me("audio",{src:q(),ref_key:"audio",ref:d0},null,8,wt)])]),D1(V0)?(He(),Oe(n1,{key:0},[re(dt,{blob:D1(V0),onDel:me},null,8,["blob"]),re(b,{round:"",type:"success",block:"",onClick:O1(g0,["stop"])},{default:I1(()=>[ka(Xe(h0.value<$.value.length-1?"下一个":"完成挑战，进入下一单元"),1)]),_:1})],64)):(He(),Oe("div",Bt,[Me("div",{class:"recordBtn",onClick:xe},[Me("div",Mt,[re(_e,{name:U(),class:"mvan-icon2"},null,8,["name"]),Me("span",yt,Xe(W0.value===1?"正在录音":"跟读"),1)]),Me("div",{class:"recwave",ref_key:"recwave",ref:z0},null,512)])]))],64)):H1("",!0)])}}},Et=$1(Tt,[["__scopeId","data-v-5dab9f07"]]);export{Et as default};
